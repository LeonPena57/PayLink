[{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\scripts\\verify_paylink.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createService' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createOrder' is defined but never used.","line":2,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":36,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'updateOrderStatus' is defined but never used.","line":2,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":55,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getSellerMetrics' is defined but never used.","line":2,"column":74,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":90,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'uploadOrderFile' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getOrderFiles' is defined but never used.","line":4,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":40,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\admin\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[643,646],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[643,646],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":67,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2249,2252],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2249,2252],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\create\\invoice\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1235,1238],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1235,1238],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2112,2115],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2112,2115],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2811,2814],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2811,2814],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\create\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\create\\post\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":138,"column":25,"nodeType":"JSXOpeningElement","endLine":138,"endColumn":118,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\create\\product\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\create\\service\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\dashboard\\page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\dashboard\\page.tsx:97:9\n   95 |\n   96 |     useEffect(() => {\n>  97 |         setActiveTab(userMode === \"SELLER\" ? \"SERVICES\" : \"ORDERS\");\n      |         ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n   98 |         if (userMode === \"SELLER\") {\n   99 |             fetchPortfolio();\n  100 |         }","line":97,"column":9,"nodeType":null,"endLine":97,"endColumn":21},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\dashboard\\page.tsx:105:13\n  103 |     useEffect(() => {\n  104 |         if (activeTab === \"FOLLOWING\" && userMode === \"BUYER\") {\n> 105 |             fetchFollowing();\n      |             ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  106 |         }\n  107 |     }, [activeTab, userMode]); // eslint-disable-line react-hooks/exhaustive-deps\n  108 |","line":105,"column":13,"nodeType":null,"endLine":105,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":412,"column":112,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":412,"endColumn":115,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23044,23047],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23044,23047],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":419,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":419,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23703,23706],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23703,23706],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-explicit-any').","line":429,"column":66,"severity":1,"nodeType":null,"fix":{"range":[24918,24983],"text":" "}}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2612,2615],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2612,2615],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2820,2823],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2820,2823],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchPortfolio'. Either include it or remove the dependency array.","line":101,"column":8,"nodeType":"ArrayExpression","endLine":101,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [fetchPortfolio, userMode]","fix":{"range":[4278,4288],"text":"[fetchPortfolio, userMode]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchFollowing'. Either include it or remove the dependency array.","line":107,"column":8,"nodeType":"ArrayExpression","endLine":107,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [activeTab, fetchFollowing, userMode]","fix":{"range":[4483,4504],"text":"[activeTab, fetchFollowing, userMode]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4728,4731],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4728,4731],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4739,4742],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4739,4742],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useRef, Suspense } from \"react\";\r\nimport { ServicesWidget } from \"@/components/features/dashboard/ServicesWidget\";\r\nimport { EditProfileModal } from \"@/components/features/dashboard/EditProfileModal\";\r\nimport { CreateInvoiceModal } from \"@/components/features/dashboard/CreateInvoiceModal\";\r\nimport { SettingsModal } from \"@/components/features/dashboard/SettingsModal\";\r\nimport { CartModal } from \"@/components/features/dashboard/CartModal\";\r\nimport { SubscriptionModal } from \"@/components/features/dashboard/SubscriptionModal\";\r\nimport { AddPortfolioItemModal } from \"@/components/features/dashboard/AddPortfolioItemModal\";\r\nimport { CreateProductModal } from \"@/components/features/dashboard/CreateProductModal\";\r\nimport { Twitter, Instagram, Twitch, Camera, Edit3, MapPin, Plus, Check, User, Settings, ShoppingBag, Grid as GridIcon, Package, Heart, MoreHorizontal } from \"lucide-react\";\r\nimport clsx from \"clsx\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { useUser } from \"@/context/UserContext\";\r\nimport { supabase } from \"@/lib/supabase/client\";\r\nimport { useSearchParams } from \"next/navigation\";\r\n\r\nconst SELLER_TABS = [\"SERVICES\", \"PORTFOLIO\", \"SHOP\"];\r\nconst BUYER_TABS = [\"ORDERS\", \"SAVED\", \"FOLLOWING\"];\r\n\r\nfunction DashboardContent() {\r\n    const { userMode, profile, uploadAvatar, uploadBanner, loading } = useUser();\r\n    const { user } = useUser(); // Need user object for ID\r\n    const searchParams = useSearchParams();\r\n    const tabParam = searchParams.get(\"tab\");\r\n\r\n    const [activeTab, setActiveTab] = useState(\r\n        tabParam && (userMode === \"SELLER\" ? SELLER_TABS : BUYER_TABS).includes(tabParam)\r\n            ? tabParam\r\n            : (userMode === \"SELLER\" ? \"SERVICES\" : \"ORDERS\")\r\n    );\r\n\r\n\r\n    // Modal States\r\n    const [isEditProfileOpen, setIsEditProfileOpen] = useState(false);\r\n    const [isCreateInvoiceOpen, setIsCreateInvoiceOpen] = useState(false);\r\n    const [isSettingsOpen, setIsSettingsOpen] = useState(false);\r\n    const [isCartOpen, setIsCartOpen] = useState(false);\r\n    const [isSubscriptionOpen, setIsSubscriptionOpen] = useState(false);\r\n    const [isAddProjectOpen, setIsAddProjectOpen] = useState(false);\r\n    const [isCreateProductOpen, setIsCreateProductOpen] = useState(false);\r\n\r\n    // Upload States\r\n    const [isUploadingBanner, setIsUploadingBanner] = useState(false);\r\n    const [isUploadingAvatar, setIsUploadingAvatar] = useState(false);\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [portfolioItems, setPortfolioItems] = useState<any[]>([]);\r\n    const [loadingPortfolio, setLoadingPortfolio] = useState(false);\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [followingList, setFollowingList] = useState<any[]>([]);\r\n    const [loadingFollowing, setLoadingFollowing] = useState(false);\r\n\r\n    const fetchPortfolio = async () => {\r\n        if (!user) return;\r\n        setLoadingPortfolio(true);\r\n        const { data } = await supabase\r\n            .from('portfolio_items')\r\n            .select('*')\r\n            .eq('user_id', user.id)\r\n            .order('created_at', { ascending: false });\r\n\r\n        if (data) setPortfolioItems(data);\r\n        setLoadingPortfolio(false);\r\n    };\r\n\r\n    const fetchFollowing = async () => {\r\n        if (!user) return;\r\n        setLoadingFollowing(true);\r\n\r\n        // 1. Get IDs of people I follow\r\n        const { data: follows } = await supabase\r\n            .from('follows')\r\n            .select('following_id')\r\n            .eq('follower_id', user.id);\r\n\r\n        if (follows && follows.length > 0) {\r\n            const followingIds = follows.map(f => f.following_id);\r\n\r\n            // 2. Get their profiles\r\n            const { data: profiles } = await supabase\r\n                .from('profiles')\r\n                .select('*')\r\n                .in('id', followingIds);\r\n\r\n            if (profiles) setFollowingList(profiles);\r\n        } else {\r\n            setFollowingList([]);\r\n        }\r\n        setLoadingFollowing(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        setActiveTab(userMode === \"SELLER\" ? \"SERVICES\" : \"ORDERS\");\r\n        if (userMode === \"SELLER\") {\r\n            fetchPortfolio();\r\n        }\r\n    }, [userMode]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    useEffect(() => {\r\n        if (activeTab === \"FOLLOWING\" && userMode === \"BUYER\") {\r\n            fetchFollowing();\r\n        }\r\n    }, [activeTab, userMode]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    // Group portfolio items by section\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const portfolioSections = portfolioItems.reduce((acc: any, item: any) => {\r\n        const section = item.section || 'General';\r\n        if (!acc[section]) acc[section] = [];\r\n        acc[section].push(item);\r\n        return acc;\r\n    }, {});\r\n\r\n\r\n\r\n    const bannerInputRef = useRef<HTMLInputElement>(null);\r\n    const avatarInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const handleBannerClick = () => {\r\n        bannerInputRef.current?.click();\r\n    };\r\n\r\n    const handleAvatarClick = () => {\r\n        avatarInputRef.current?.click();\r\n    };\r\n\r\n    const handleBannerChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            setIsUploadingBanner(true);\r\n            await uploadBanner(file);\r\n            setIsUploadingBanner(false);\r\n        }\r\n    };\r\n\r\n    const handleAvatarChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            setIsUploadingAvatar(true);\r\n            await uploadAvatar(file);\r\n            setIsUploadingAvatar(false);\r\n        }\r\n    };\r\n\r\n    const accentColor = profile?.accent_color || \"#3b82f6\";\r\n    const tabs = userMode === \"SELLER\" ? SELLER_TABS : BUYER_TABS;\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen bg-background flex items-center justify-center\">\r\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-background pb-32 selection:bg-primary/30 transition-colors duration-300\">\r\n            {/* Modals */}\r\n            <EditProfileModal isOpen={isEditProfileOpen} onClose={() => setIsEditProfileOpen(false)} />\r\n            <CreateInvoiceModal isOpen={isCreateInvoiceOpen} onClose={() => setIsCreateInvoiceOpen(false)} />\r\n            <SettingsModal\r\n                isOpen={isSettingsOpen}\r\n                onClose={() => setIsSettingsOpen(false)}\r\n                onOpenSubscription={() => {\r\n                    setIsSettingsOpen(false);\r\n                    setIsSubscriptionOpen(true);\r\n                }}\r\n            />\r\n            <CartModal isOpen={isCartOpen} onClose={() => setIsCartOpen(false)} />\r\n            <SubscriptionModal isOpen={isSubscriptionOpen} onClose={() => setIsSubscriptionOpen(false)} />\r\n            <AddPortfolioItemModal isOpen={isAddProjectOpen} onClose={() => setIsAddProjectOpen(false)} onSuccess={fetchPortfolio} />\r\n            <CreateProductModal isOpen={isCreateProductOpen} onClose={() => setIsCreateProductOpen(false)} />\r\n\r\n            <input\r\n                type=\"file\"\r\n                ref={bannerInputRef}\r\n                onChange={handleBannerChange}\r\n                className=\"hidden\"\r\n                accept=\"image/*\"\r\n            />\r\n            <input\r\n                type=\"file\"\r\n                ref={avatarInputRef}\r\n                onChange={handleAvatarChange}\r\n                className=\"hidden\"\r\n                accept=\"image/*\"\r\n            />\r\n\r\n            {/* Profile Header */}\r\n            <div className=\"relative group pb-4\">\r\n                {/* Immersive Banner */}\r\n                <div className=\"h-64 md:h-96 w-full relative overflow-hidden group/banner\">\r\n                    {profile?.banner_url ? (\r\n                        <div className=\"absolute inset-0 animate-in fade-in duration-700\">\r\n                            <Image src={profile.banner_url} alt=\"Profile Banner\" fill className=\"object-cover\" />\r\n                            <div className=\"absolute inset-0 bg-black/20\" />\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            <div className=\"absolute inset-0 bg-gradient-to-b from-muted via-muted/50 to-background\" />\r\n                            <div className=\"absolute inset-0 flex items-center justify-center text-muted-foreground/20 font-bold text-4xl uppercase tracking-widest\">\r\n                                No Banner\r\n                            </div>\r\n                        </>\r\n                    )}\r\n\r\n                    {isUploadingBanner && (\r\n                        <div className=\"absolute inset-0 flex items-center justify-center bg-black/50 z-30\">\r\n                            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white\"></div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Banner Actions */}\r\n                    <div className=\"absolute top-4 right-4 md:top-6 md:right-6 flex items-center gap-3 z-20\">\r\n                        {/* Edit Profile Pencil */}\r\n                        <button\r\n                            onClick={() => setIsEditProfileOpen(true)}\r\n                            className=\"p-2.5 bg-black/20 backdrop-blur-md border border-white/10 rounded-full text-white/90 hover:text-white hover:bg-black/40 transition-all shadow-lg active:scale-95\"\r\n                            title=\"Edit Profile\"\r\n                        >\r\n                            <Edit3 className=\"w-5 h-5\" />\r\n                        </button>\r\n\r\n                        {/* Upload Banner Camera */}\r\n                        <button\r\n                            onClick={handleBannerClick}\r\n                            className=\"p-2.5 bg-black/20 backdrop-blur-md border border-white/10 rounded-full text-white/90 hover:text-white hover:bg-black/40 transition-all shadow-lg active:scale-95\"\r\n                            title=\"Change Banner\"\r\n                        >\r\n                            <Camera className=\"w-5 h-5\" />\r\n                        </button>\r\n\r\n                        {/* Settings Button */}\r\n                        <button\r\n                            onClick={() => setIsSettingsOpen(true)}\r\n                            className=\"p-2.5 bg-black/20 backdrop-blur-md border border-white/10 rounded-full text-white/90 hover:text-white hover:bg-black/40 transition-all shadow-lg active:scale-95\"\r\n                            title=\"Settings\"\r\n                        >\r\n                            <Settings className=\"w-5 h-5\" />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 -mt-32 md:-mt-40\">\r\n                    <div className=\"flex flex-col md:flex-row items-end gap-6 md:gap-10\">\r\n                        {/* Avatar */}\r\n                        <div className=\"relative group/avatar shrink-0 mx-auto md:mx-0\">\r\n                            <div className=\"w-40 h-40 md:w-56 md:h-56 rounded-[2.5rem] p-1.5 bg-background shadow-2xl shadow-black/20 rotate-3 hover:rotate-0 transition-all duration-500 ease-out\">\r\n                                <div className=\"w-full h-full rounded-[2rem] bg-muted overflow-hidden relative border border-border\">\r\n                                    {profile?.avatar_url ? (\r\n                                        <Image src={profile.avatar_url} alt=\"Avatar\" fill className=\"object-cover\" />\r\n                                    ) : (\r\n                                        <div className=\"w-full h-full bg-muted flex items-center justify-center\">\r\n                                            <User className=\"w-20 h-20 text-muted-foreground\" />\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {/* Avatar Upload Overlay */}\r\n                                    <div\r\n                                        onClick={handleAvatarClick}\r\n                                        className=\"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover/avatar:opacity-100 transition-opacity cursor-pointer backdrop-blur-sm\"\r\n                                    >\r\n                                        {isUploadingAvatar ? (\r\n                                            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white\"></div>\r\n                                        ) : (\r\n                                            <Camera className=\"w-10 h-10 text-white\" />\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            {/* Verified Badge - Only if Verified */}\r\n                            {profile?.verification_status === 'verified' && (\r\n                                <div className=\"absolute -bottom-2 -right-2 md:bottom-2 md:right-2 bg-background p-1.5 rounded-full shadow-lg\">\r\n                                    <div className=\"text-white p-1.5 rounded-full\" style={{ backgroundColor: accentColor }}>\r\n                                        <Check className=\"w-4 h-4 stroke-[4]\" />\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Profile Info */}\r\n                        <div className=\"flex-1 flex flex-col md:flex-row items-end justify-between gap-6 w-full text-center md:text-left pb-4\">\r\n                            <div className=\"space-y-4 flex-1 w-full\">\r\n                                <div>\r\n                                    <h1 className=\"text-4xl md:text-6xl font-black text-foreground tracking-tight leading-none mb-2\">\r\n                                        {profile?.full_name || \"No Name\"}\r\n                                    </h1>\r\n                                    <div className=\"flex flex-wrap items-center justify-center md:justify-start gap-3 text-muted-foreground font-medium text-lg\">\r\n                                        <span className=\"text-foreground\">@{profile?.username || \"username\"}</span>\r\n                                        {profile?.location && (\r\n                                            <>\r\n                                                <span className=\"hidden md:inline\">â€¢</span>\r\n                                                <span className=\"flex items-center gap-1\">\r\n                                                    <MapPin className=\"w-4 h-4\" />\r\n                                                    {profile.location}\r\n                                                </span>\r\n                                            </>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <p className=\"text-lg md:text-xl text-muted-foreground max-w-2xl leading-relaxed font-medium\">\r\n                                    {profile?.bio || \"No bio information provided yet.\"}\r\n                                </p>\r\n\r\n                                {/* Social Pills */}\r\n                                <div className=\"flex flex-col md:flex-row items-center gap-4 pt-2\">\r\n                                    <div className=\"flex flex-wrap items-center justify-center md:justify-start gap-3\">\r\n                                        {profile?.social_links?.twitter && (\r\n                                            <a href={`https://twitter.com/${profile.social_links.twitter}`} target=\"_blank\" className=\"px-4 py-2 bg-card border border-border rounded-xl hover:border-blue-400/50 hover:bg-blue-400/5 hover:text-[#1DA1F2] transition-all flex items-center gap-2 font-bold text-sm\">\r\n                                                <Twitter className=\"w-4 h-4\" />\r\n                                                Twitter\r\n                                            </a>\r\n                                        )}\r\n                                        {profile?.social_links?.instagram && (\r\n                                            <a href={`https://instagram.com/${profile.social_links.instagram}`} target=\"_blank\" className=\"px-4 py-2 bg-card border border-border rounded-xl hover:border-pink-500/50 hover:bg-pink-500/5 hover:text-[#E1306C] transition-all flex items-center gap-2 font-bold text-sm\">\r\n                                                <Instagram className=\"w-4 h-4\" />\r\n                                                Instagram\r\n                                            </a>\r\n                                        )}\r\n                                        {profile?.social_links?.twitch && (\r\n                                            <a href={`https://twitch.tv/${profile.social_links.twitch}`} target=\"_blank\" className=\"px-4 py-2 bg-card border border-border rounded-xl hover:border-purple-500/50 hover:bg-purple-500/5 hover:text-[#9146FF] transition-all flex items-center gap-2 font-bold text-sm\">\r\n                                                <Twitch className=\"w-4 h-4\" />\r\n                                                Twitch\r\n                                            </a>\r\n                                        )}\r\n                                        {!profile?.social_links?.twitter && !profile?.social_links?.instagram && !profile?.social_links?.twitch && (\r\n                                            <span className=\"text-sm text-muted-foreground italic\">No social links added.</span>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Navigation Tabs */}\r\n                    <div className=\"mt-12 border-b border-border\">\r\n                        <div className=\"flex gap-8 overflow-x-auto max-w-full pb-px no-scrollbar justify-center md:justify-start\">\r\n                            {tabs.map((tab) => (\r\n                                <button\r\n                                    key={tab}\r\n                                    onClick={() => setActiveTab(tab)}\r\n                                    className={clsx(\r\n                                        \"py-3 md:py-4 px-4 md:px-6 text-xs md:text-sm font-black tracking-widest border-b-[3px] transition-all flex items-center gap-2 uppercase\",\r\n                                        activeTab === tab\r\n                                            ? \"text-foreground\"\r\n                                            : \"border-transparent text-muted-foreground hover:text-foreground\"\r\n                                    )}\r\n                                    style={{\r\n                                        borderColor: activeTab === tab ? accentColor : \"transparent\",\r\n                                        color: activeTab === tab ? accentColor : undefined\r\n                                    }}\r\n                                >\r\n                                    {tab === \"SERVICES\" && <MoreHorizontal className=\"w-4 h-4\" />}\r\n                                    {tab === \"PORTFOLIO\" && <GridIcon className=\"w-4 h-4\" />}\r\n                                    {tab === \"SHOP\" && <ShoppingBag className=\"w-4 h-4\" />}\r\n                                    {tab === \"ORDERS\" && <Package className=\"w-4 h-4\" />}\r\n                                    {tab === \"SAVED\" && <Heart className=\"w-4 h-4\" />}\r\n                                    {tab === \"FOLLOWING\" && <User className=\"w-4 h-4\" />}\r\n                                    {tab}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content Area */}\r\n            <div className=\"max-w-7xl mx-auto mt-2 pb-20\">\r\n                {userMode === \"SELLER\" ? (\r\n                    <>\r\n                        {activeTab === \"SERVICES\" && (\r\n                            <div className=\"p-4 md:p-6 space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                                    <div className=\"lg:col-span-2\">\r\n                                        <ServicesWidget />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {activeTab === \"PORTFOLIO\" && (\r\n                            <div className=\"p-4 md:p-6 animate-in fade-in slide-in-from-bottom-4 duration-500 space-y-8\">\r\n                                {loadingPortfolio ? (\r\n                                    <div className=\"flex justify-center py-20\">\r\n                                        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n                                    </div>\r\n                                ) : portfolioItems.length === 0 ? (\r\n                                    <div className=\"flex flex-col items-center justify-center py-20 text-center space-y-4 border-2 border-dashed border-border rounded-3xl bg-muted/30\">\r\n                                        <div className=\"w-16 h-16 bg-muted rounded-full flex items-center justify-center\">\r\n                                            <GridIcon className=\"w-8 h-8 text-muted-foreground\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <h3 className=\"text-xl font-bold text-foreground\">No Portfolio Items</h3>\r\n                                            <p className=\"text-muted-foreground max-w-sm mx-auto mt-2\">\r\n                                                Showcase your best work to attract more clients.\r\n                                            </p>\r\n                                        </div>\r\n                                        <Link\r\n                                            href=\"/create/post\"\r\n                                            className=\"px-6 py-2 bg-primary text-primary-foreground rounded-full font-bold shadow-lg hover:scale-105 transition-all\"\r\n                                        >\r\n                                            Add Project\r\n                                        </Link>\r\n                                    </div>\r\n                                ) : (\r\n                                    <>\r\n                                        {Object.entries(portfolioSections).map(([sectionName, items]: [string, any]) => (\r\n                                            <div key={sectionName} className=\"space-y-4\">\r\n                                                <h3 className=\"text-xl font-bold text-foreground px-1 flex items-center gap-2\">\r\n                                                    <span className=\"w-1 h-6 bg-primary rounded-full\" />\r\n                                                    {sectionName}\r\n                                                </h3>\r\n                                                <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4\">\r\n                                                    {items.map((item: any) => (\r\n                                                        <div key={item.id} className=\"group relative aspect-square rounded-2xl overflow-hidden cursor-pointer bg-muted border border-border shadow-sm hover:shadow-md transition-all\">\r\n                                                            <Image\r\n                                                                src={item.image_url}\r\n                                                                alt={item.title}\r\n                                                                fill\r\n                                                                className=\"object-cover transition-transform duration-500 group-hover:scale-110\"\r\n                                                            />\r\n                                                            <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-4\">\r\n                                                                <h4 className=\"text-white font-bold text-sm truncate\">{item.title}</h4>\r\n                                                                {/* eslint-disable-next-line @typescript-eslint/no-explicit-any */}\r\n                                                                {item.description && <p className=\"text-white/70 text-xs truncate\">{item.description}</p>}\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                        {/* Global Add Project Button if items exist */}\r\n                                        <div className=\"flex justify-center pt-8\">\r\n                                            <Link\r\n                                                href=\"/create/post\"\r\n                                                className=\"px-6 py-3 bg-muted hover:bg-muted/80 text-foreground rounded-xl font-bold transition-colors flex items-center gap-2\"\r\n                                            >\r\n                                                <Plus className=\"w-5 h-5\" />\r\n                                                Add New Project\r\n                                            </Link>\r\n                                        </div>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n\r\n                        {activeTab === \"SHOP\" && (\r\n                            <div className=\"p-4 md:p-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                                <div className=\"flex flex-col items-center justify-center py-20 text-center space-y-4 border-2 border-dashed border-border rounded-3xl bg-muted/30\">\r\n                                    <div className=\"w-16 h-16 bg-muted rounded-full flex items-center justify-center\">\r\n                                        <ShoppingBag className=\"w-8 h-8 text-muted-foreground\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <h3 className=\"text-xl font-bold text-foreground\">Shop is Empty</h3>\r\n                                        <p className=\"text-muted-foreground max-w-sm mx-auto mt-2\">\r\n                                            Start selling digital products and assets.\r\n                                        </p>\r\n                                    </div>\r\n                                    <Link\r\n                                        href=\"/create/product\"\r\n                                        className=\"px-6 py-2 bg-primary text-primary-foreground rounded-full font-bold shadow-lg hover:scale-105 transition-all\"\r\n                                    >\r\n                                        Create Product\r\n                                    </Link>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        {activeTab === \"ORDERS\" && (\r\n                            <div className=\"p-4 md:p-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                                <div className=\"flex flex-col items-center justify-center py-20 text-center space-y-4 border-2 border-dashed border-border rounded-3xl bg-muted/30\">\r\n                                    <div className=\"w-16 h-16 bg-muted rounded-full flex items-center justify-center\">\r\n                                        <Package className=\"w-8 h-8 text-muted-foreground\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <h3 className=\"text-xl font-bold text-foreground\">No Orders Yet</h3>\r\n                                        <p className=\"text-muted-foreground max-w-sm mx-auto mt-2\">\r\n                                            When you purchase services or products, they will appear here.\r\n                                        </p>\r\n                                    </div>\r\n                                    <Link href=\"/home\" className=\"px-6 py-2 bg-primary text-primary-foreground rounded-full font-bold shadow-lg hover:scale-105 transition-all\">\r\n                                        Browse Services\r\n                                    </Link>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {activeTab === \"SAVED\" && (\r\n                            <div className=\"p-4 md:p-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                                <div className=\"flex flex-col items-center justify-center py-20 text-center space-y-4 border-2 border-dashed border-border rounded-3xl bg-muted/30\">\r\n                                    <div className=\"w-16 h-16 bg-muted rounded-full flex items-center justify-center\">\r\n                                        <Heart className=\"w-8 h-8 text-muted-foreground\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <h3 className=\"text-xl font-bold text-foreground\">No Saved Items</h3>\r\n                                        <p className=\"text-muted-foreground max-w-sm mx-auto mt-2\">\r\n                                            Save services and products you like to find them easily later.\r\n                                        </p>\r\n                                    </div>\r\n                                    <Link href=\"/home\" className=\"px-6 py-2 bg-primary text-primary-foreground rounded-full font-bold shadow-lg hover:scale-105 transition-all\">\r\n                                        Explore\r\n                                    </Link>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {activeTab === \"FOLLOWING\" && (\r\n                            <div className=\"p-4 md:p-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                                {loadingFollowing ? (\r\n                                    <div className=\"flex justify-center py-20\">\r\n                                        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n                                    </div>\r\n                                ) : followingList.length === 0 ? (\r\n                                    <div className=\"flex flex-col items-center justify-center py-20 text-center space-y-4 border-2 border-dashed border-border rounded-3xl bg-muted/30\">\r\n                                        <div className=\"w-16 h-16 bg-muted rounded-full flex items-center justify-center\">\r\n                                            <User className=\"w-8 h-8 text-muted-foreground\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <h3 className=\"text-xl font-bold text-foreground\">Not Following Anyone</h3>\r\n                                            <p className=\"text-muted-foreground max-w-sm mx-auto mt-2\">\r\n                                                Follow creators to see them here.\r\n                                            </p>\r\n                                        </div>\r\n                                        <Link href=\"/home\" className=\"px-6 py-2 bg-primary text-primary-foreground rounded-full font-bold shadow-lg hover:scale-105 transition-all\">\r\n                                            Find Creators\r\n                                        </Link>\r\n                                    </div>\r\n                                ) : (\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                                        {followingList.map((followedUser) => (\r\n                                            <Link key={followedUser.id} href={`/${followedUser.username}`} className=\"block\">\r\n                                                <div className=\"bg-card border border-border rounded-2xl p-4 flex items-center gap-4 hover:bg-muted/50 transition-colors group\">\r\n                                                    <div className=\"w-12 h-12 rounded-full bg-muted overflow-hidden border border-border shrink-0\">\r\n                                                        {followedUser.avatar_url ? (\r\n                                                            <Image src={followedUser.avatar_url} alt={followedUser.username} fill className=\"object-cover\" />\r\n                                                        ) : (\r\n                                                            <div className=\"w-full h-full flex items-center justify-center bg-primary/10 text-primary font-bold\">\r\n                                                                {followedUser.full_name?.substring(0, 2).toUpperCase() || \"??\"}\r\n                                                            </div>\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <div className=\"flex-1 min-w-0\">\r\n                                                        <h4 className=\"font-bold text-foreground truncate group-hover:text-primary transition-colors\">\r\n                                                            {followedUser.full_name}\r\n                                                        </h4>\r\n                                                        <p className=\"text-sm text-muted-foreground truncate\">@{followedUser.username}</p>\r\n                                                    </div>\r\n                                                    <div className=\"px-3 py-1 bg-primary/10 text-primary text-xs font-bold rounded-full\">\r\n                                                        View\r\n                                                    </div>\r\n                                                </div>\r\n                                            </Link>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function DashboardPage() {\r\n    return (\r\n        <Suspense fallback={\r\n            <div className=\"min-h-screen bg-background flex items-center justify-center\">\r\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n            </div>\r\n        }>\r\n            <DashboardContent />\r\n        </Suspense>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\drive\\page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\drive\\page.tsx:65:7\n  63 |     const orderId = searchParams.get(\"orderId\");\n  64 |     if (orderId && orderId !== activeFolderId) {\n> 65 |       setActiveFolderId(orderId);\n     |       ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  66 |     }\n  67 |   }, [searchParams, activeFolderId]);\n  68 |","line":65,"column":7,"nodeType":null,"endLine":65,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect, Suspense } from \"react\";\nimport { FileCard, FileItem } from \"@/components/features/FileCard\";\nimport { PaymentModal } from \"@/components/features/PaymentModal\";\nimport { Search, LayoutGrid, List, File as FileIcon, Folder, ArrowLeft } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport clsx from \"clsx\";\nimport { useSearchParams } from \"next/navigation\";\n\n// Mock Data Structure\ninterface CommissionFolder {\n  id: string;\n  sellerName: string;\n  sellerAvatar: string; // Initials or URL\n  projectTitle: string;\n  pricePaid: number;\n  hasNewItems: boolean;\n  files: FileItem[];\n  lastUpdated: string;\n}\n\nconst MOCK_FOLDERS: CommissionFolder[] = [\n  {\n    id: \"ORD-2025-001\",\n    sellerName: \"FateCreates\",\n    sellerAvatar: \"FC\",\n    projectTitle: \"Stream Overlay Package\",\n    pricePaid: 150.00,\n    hasNewItems: true,\n    lastUpdated: \"2 mins ago\",\n    files: [\n      { id: \"1\", name: \"Overlay_Source.psd\", isLocked: false, price: 0, thumbnailUrl: \"/pokemon-overlay.jpg\" },\n      { id: \"2\", name: \"Alerts_Pack.zip\", isLocked: false, price: 0 },\n      { id: \"3\", name: \"Preview_Watermarked.png\", isLocked: false, price: 0 },\n    ]\n  },\n  {\n    id: \"ORD-2025-004\",\n    sellerName: \"TechStart Inc\",\n    sellerAvatar: \"TS\",\n    projectTitle: \"App UI Redesign\",\n    pricePaid: 450.00,\n    hasNewItems: false,\n    lastUpdated: \"2 days ago\",\n    files: [\n      { id: \"4\", name: \"UI_Kit_v1.fig\", isLocked: true, price: 50 },\n      { id: \"5\", name: \"Wireframes.pdf\", isLocked: false, price: 0 },\n    ]\n  }\n];\n\nfunction DriveContent() {\n  const searchParams = useSearchParams();\n  const [activeFolderId, setActiveFolderId] = useState<string | null>(null);\n  const [selectedFile, setSelectedFile] = useState<FileItem | null>(null);\n  const [isPaymentOpen, setIsPaymentOpen] = useState(false);\n  const [viewMode, setViewMode] = useState<\"grid\" | \"list\">(\"grid\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  // Auto-open folder from URL\n  useEffect(() => {\n    const orderId = searchParams.get(\"orderId\");\n    if (orderId && orderId !== activeFolderId) {\n      setActiveFolderId(orderId);\n    }\n  }, [searchParams, activeFolderId]);\n\n  const activeFolder = MOCK_FOLDERS.find(f => f.id === activeFolderId);\n\n  // Filter folders or files based on search\n  const filteredFolders = MOCK_FOLDERS.filter(f =>\n    f.projectTitle.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    f.sellerName.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  const filteredFiles = activeFolder?.files.filter(f =>\n    f.name.toLowerCase().includes(searchQuery.toLowerCase())\n  ) || [];\n\n  const handleUnlockClick = (file: FileItem) => {\n    setSelectedFile(file);\n    setIsPaymentOpen(true);\n  };\n\n  const handlePaymentSuccess = () => {\n    // In a real app, update the file status in the folder\n    setIsPaymentOpen(false);\n    setSelectedFile(null);\n    alert(\"Payment successful! File unlocked.\");\n  };\n\n  return (\n    <div className=\"p-6 max-w-7xl mx-auto min-h-screen relative pb-32\">\n      {/* Header */}\n      <div className=\"flex flex-col md:flex-row items-center justify-between gap-4 mb-8 sticky top-0 z-40 bg-background/80 backdrop-blur-xl py-4 -mx-6 px-6 border-b border-border\">\n        <div className=\"flex items-center gap-4 w-full md:w-auto\">\n          {activeFolderId && (\n            <button\n              onClick={() => setActiveFolderId(null)}\n              className=\"p-2 hover:bg-muted rounded-full transition-colors\"\n            >\n              <ArrowLeft className=\"w-5 h-5\" />\n            </button>\n          )}\n          <h1 className=\"text-2xl font-semibold text-foreground tracking-tight flex items-center gap-2\">\n            {activeFolderId ? (\n              <>\n                <span className=\"text-muted-foreground font-normal\">Files /</span>\n                <span>{activeFolder?.projectTitle || \"Unknown Project\"}</span>\n              </>\n            ) : (\n              \"My Files\"\n            )}\n          </h1>\n        </div>\n\n        <div className=\"flex items-center gap-4 w-full md:w-auto\">\n          {/* Search Bar */}\n          <div className=\"relative w-full md:max-w-md flex-1\">\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n              <Search className=\"h-4 w-4 text-muted-foreground\" />\n            </div>\n            <input\n              type=\"text\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"block w-full pl-9 pr-4 py-2 bg-card border border-border rounded-xl text-sm focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all\"\n              placeholder={activeFolderId ? \"Search in folder...\" : \"Search projects...\"}\n            />\n          </div>\n\n          {/* View Toggles */}\n          <div className=\"flex items-center gap-1 bg-card p-1 rounded-xl border border-border shrink-0\">\n            <button\n              onClick={() => setViewMode(\"grid\")}\n              className={clsx(\n                \"p-2 rounded-lg transition-all\",\n                viewMode === \"grid\" ? \"bg-muted-foreground text-background shadow-sm\" : \"text-muted-foreground hover:text-foreground\"\n              )}\n            >\n              <LayoutGrid className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => setViewMode(\"list\")}\n              className={clsx(\n                \"p-2 rounded-lg transition-all\",\n                viewMode === \"list\" ? \"bg-muted-foreground text-background shadow-sm\" : \"text-muted-foreground hover:text-foreground\"\n              )}\n            >\n              <List className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      <AnimatePresence mode=\"wait\">\n        {!activeFolderId ? (\n          /* FOLDER LIST VIEW */\n          <motion.div\n            key=\"folders\"\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -10 }}\n            className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\"\n          >\n            {filteredFolders.map((folder) => (\n              <div\n                key={folder.id}\n                onClick={() => setActiveFolderId(folder.id)}\n                className=\"bg-card border border-border rounded-3xl p-6 hover:bg-muted/30 transition-all cursor-pointer group hover:shadow-2xl hover:shadow-primary/5 relative overflow-hidden active:scale-[0.98] duration-300\"\n              >\n                {/* Notification Dot */}\n                {folder.hasNewItems && (\n                  <div className=\"absolute top-5 right-5 w-3 h-3 bg-primary rounded-full border-2 border-card z-10 animate-pulse shadow-lg shadow-primary/50\" />\n                )}\n\n                <div className=\"flex items-start justify-between mb-6\">\n                  <div className=\"w-14 h-14 bg-primary/10 rounded-2xl flex items-center justify-center text-primary group-hover:scale-110 transition-transform shadow-sm\">\n                    <Folder className=\"w-7 h-7 fill-current\" />\n                  </div>\n                  <div className=\"flex -space-x-2\">\n                    <div className=\"w-9 h-9 rounded-full bg-muted border-2 border-card flex items-center justify-center text-[10px] font-bold shadow-sm\">\n                      {folder.sellerAvatar}\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <h3 className=\"font-bold text-xl text-foreground mb-1 group-hover:text-primary transition-colors tracking-tight\">{folder.projectTitle}</h3>\n                  <p className=\"text-sm text-muted-foreground mb-5 font-medium\">by {folder.sellerName}</p>\n\n                  <div className=\"flex items-center justify-between pt-5 border-t border-border/50\">\n                    <div className=\"text-xs font-semibold text-muted-foreground bg-muted/50 px-3 py-1 rounded-full\">\n                      {folder.files.length} files â€¢ {folder.lastUpdated}\n                    </div>\n                    <div className=\"text-sm font-bold text-foreground\">\n                      ${folder.pricePaid.toFixed(2)}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </motion.div>\n        ) : (\n          /* FILE LIST VIEW */\n          <motion.div\n            key=\"files\"\n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: -20 }}\n          >\n            {filteredFiles.length > 0 ? (\n              <div className={clsx(\n                \"gap-4\",\n                viewMode === \"grid\" ? \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4\" : \"flex flex-col space-y-3\"\n              )}>\n                {filteredFiles.map((file) => (\n                  viewMode === \"grid\" ? (\n                    <FileCard\n                      key={file.id}\n                      file={file}\n                      onUnlock={handleUnlockClick}\n                    />\n                  ) : (\n                    <div key={file.id} className=\"flex items-center justify-between p-4 bg-card border border-border rounded-2xl hover:bg-muted/50 transition-all group hover:shadow-md hover:shadow-black/5 cursor-default\">\n                      <div className=\"flex items-center gap-5\">\n                        <div className=\"w-12 h-12 bg-muted/50 rounded-xl flex items-center justify-center group-hover:bg-primary/10 group-hover:text-primary transition-colors\">\n                          <FileIcon className=\"w-6 h-6 text-muted-foreground group-hover:text-primary transition-colors\" />\n                        </div>\n                        <div>\n                          <div className=\"font-bold text-foreground text-base mb-0.5\">{file.name}</div>\n                          <div className=\"text-xs text-muted-foreground font-medium flex items-center gap-2\">\n                            <span className={clsx(\"w-2 h-2 rounded-full\", file.isLocked ? \"bg-amber-500\" : \"bg-[#30D158]\")} />\n                            ${file.price} â€¢ {file.isLocked ? \"Locked\" : \"Unlocked\"}\n                          </div>\n                        </div>\n                      </div>\n                      <button\n                        onClick={() => file.isLocked ? handleUnlockClick(file) : alert(\"Downloading...\")}\n                        className={clsx(\n                          \"px-5 py-2.5 rounded-xl text-sm font-bold transition-all shadow-sm active:scale-95\",\n                          file.isLocked\n                            ? \"bg-primary text-primary-foreground hover:bg-primary/90 hover:shadow-primary/20\"\n                            : \"bg-muted text-foreground hover:bg-muted/80\"\n                        )}\n                      >\n                        {file.isLocked ? \"Unlock File\" : \"Download\"}\n                      </button>\n                    </div>\n                  )\n                ))}\n              </div>\n            ) : (\n              <div className=\"flex flex-col items-center justify-center h-64 text-muted-foreground\">\n                <Folder className=\"w-12 h-12 mb-4 opacity-20\" />\n                <p>No files found in this folder.</p>\n              </div>\n            )}\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Payment Modal */}\n      <PaymentModal\n        isOpen={isPaymentOpen}\n        onClose={() => setIsPaymentOpen(false)}\n        onPay={handlePaymentSuccess}\n        file={selectedFile}\n      />\n    </div>\n  );\n}\n\nexport default function DrivePage() {\n  return (\n    <Suspense fallback={\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\"></div>\n      </div>\n    }>\n      <DriveContent />\n    </Suspense>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\home\\page.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: ')' expected.","line":851,"column":52}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport {\r\n    Grid as GridIcon,\r\n    ShoppingBag,\r\n    MoreHorizontal,\r\n    Check,\r\n    TrendingUp,\r\n    RefreshCw,\r\n    Star,\r\n    Home,\r\n    MessageCircle,\r\n    Search,\r\n    UserPlus,\r\n    Heart,\r\n    Camera,\r\n    DollarSign,\r\n    Twitter,\r\n    Instagram,\r\n    Twitch,\r\n    Edit3,\r\n    User,\r\n    Maximize2,\r\n    Send,\r\n    X,\r\n    Briefcase,\r\n    Flag\r\n} from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport clsx from \"clsx\";\r\nimport { useUserMode, useUser } from \"@/context/UserContext\";\r\nimport { supabase } from \"@/lib/supabase/client\";\r\nimport { useToast } from \"@/context/ToastContext\";\r\n\r\nconst PROFILE_TABS = [\"HOME\", \"SERVICES\", \"PORTFOLIO\", \"SHOP\"];\r\nconst TAGS = [\"All\", \"Digital Art\", \"Graphic Design\", \"Photography\", \"3D Modeling\", \"Animation\"];\r\n\r\nimport { EditProfileModal } from \"@/components/features/dashboard/EditProfileModal\";\r\nimport { EditServiceModal } from \"@/components/features/dashboard/EditServiceModal\";\r\nimport { PostModal } from \"@/components/features/PostModal\";\r\nimport { ReportModal } from \"@/components/features/ReportModal\";\r\n\r\nexport default function HomePage() {\r\n    const { userMode } = useUserMode();\r\n    const { user, profile, uploadAvatar, uploadBanner, isConfigured, loading } = useUser();\r\n    const { toast } = useToast();\r\n    const [activeProfileTab, setActiveProfileTab] = useState(\"HOME\");\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const [activeTag, setActiveTag] = useState(\"All\");\r\n    const [isEditProfileOpen, setIsEditProfileOpen] = useState(false);\r\n    const [stats, setStats] = useState({ followers: 0, following: 0, is_following: false });\r\n\r\n    // Feed State\r\n    const [feedTab, setFeedTab] = useState<'foryou' | 'following'>('foryou');\r\n\r\n    // Scroll Direction State for Mobile Header\r\n    const [isHeaderVisible, setIsHeaderVisible] = useState(true);\r\n    const [lastScrollY, setLastScrollY] = useState(0);\r\n\r\n    useEffect(() => {\r\n        const controlNavbar = () => {\r\n            if (typeof window !== 'undefined') {\r\n                // Hide on scroll down (if > 100px), show on scroll up\r\n                if (window.scrollY > lastScrollY && window.scrollY > 100) {\r\n                    setIsHeaderVisible(false);\r\n                } else {\r\n                    setIsHeaderVisible(true);\r\n                }\r\n                setLastScrollY(window.scrollY);\r\n            }\r\n        };\r\n\r\n        window.addEventListener('scroll', controlNavbar);\r\n        return () => window.removeEventListener('scroll', controlNavbar);\r\n    }, [lastScrollY]);\r\n\r\n    // Post Modal State\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [selectedPost, setSelectedPost] = useState<any>(null);\r\n    const [isPostModalOpen, setIsPostModalOpen] = useState(false);\r\n\r\n    // Edit Service State\r\n    const [selectedService, setSelectedService] = useState<any>(null);\r\n    const [isEditServiceOpen, setIsEditServiceOpen] = useState(false);\r\n    const [activeServiceDropdown, setActiveServiceDropdown] = useState<string | null>(null);\r\n\r\n    // Report Modal State\r\n    const [isReportModalOpen, setIsReportModalOpen] = useState(false);\r\n    const [reportTarget, setReportTarget] = useState<{ id: string, type: 'user' | 'service' | 'product' | 'post' | 'order' } | null>(null);\r\n    const [activeFeedMenuId, setActiveFeedMenuId] = useState<string | null>(null);\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const handleReport = (item: any) => {\r\n        setReportTarget({ id: item.id, type: item.type });\r\n        setIsReportModalOpen(true);\r\n        setActiveFeedMenuId(null);\r\n    };\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const handlePostClick = (post: any) => {\r\n        setSelectedPost(post);\r\n        setIsPostModalOpen(true);\r\n    };\r\n\r\n    const fetchStats = async () => {\r\n        if (!profile) return;\r\n        const { data, error } = await supabase\r\n            .rpc('get_profile_stats', { target_user_id: profile.id });\r\n\r\n        if (data) {\r\n            setStats(data);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (profile) {\r\n            fetchStats();\r\n        }\r\n    }, [profile]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    // Upload States\r\n    const avatarInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const handleAvatarClick = () => avatarInputRef.current?.click();\r\n\r\n    const handleBannerChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            await uploadBanner(file);\r\n        }\r\n    };\r\n\r\n    const [searchedUsers, setSearchedUsers] = useState<any[]>([]);\r\n\r\n    useEffect(() => {\r\n        const searchUsers = async () => {\r\n            if (searchQuery.trim().length === 0) {\r\n                setSearchedUsers([]);\r\n                return;\r\n            }\r\n\r\n            const { data, error } = await supabase\r\n                .from('profiles')\r\n                .select('id, username, full_name, avatar_url, verification_status')\r\n                .or(`username.ilike.%${searchQuery}%,full_name.ilike.%${searchQuery}%`)\r\n                .limit(5);\r\n\r\n            if (data) {\r\n                setSearchedUsers(data);\r\n            }\r\n        };\r\n\r\n        const debounce = setTimeout(searchUsers, 300);\r\n        return () => clearTimeout(debounce);\r\n    }, [searchQuery]);\r\n\r\n    const handleAvatarChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            await uploadAvatar(file);\r\n        }\r\n    };\r\n\r\n    // Fetch Feed Items (All Portfolio Items for now, simulating a public feed)\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [feedItems, setFeedItems] = useState<any[]>([]);\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    const [loadingFeed, setLoadingFeed] = useState(false);\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [suggestedUsers, setSuggestedUsers] = useState<any[]>([]);\r\n\r\n\r\n\r\n    const fetchFeed = async () => {\r\n        setLoadingFeed(true);\r\n\r\n        // 1. Fetch Portfolio Items (Posts)\r\n        const { data: posts } = await supabase\r\n            .from('portfolio_items')\r\n            .select(`\r\n                *,\r\n                profiles (id, username, full_name, avatar_url, verification_status),\r\n                comments (count),\r\n                likes (count)\r\n            `)\r\n            .order('created_at', { ascending: false })\r\n            .limit(20);\r\n\r\n        // 2. Fetch Services\r\n        const { data: servicesData } = await supabase\r\n            .from('services')\r\n            .select(`\r\n                *,\r\n                profiles (id, username, full_name, avatar_url, verification_status)\r\n            `)\r\n            .order('created_at', { ascending: false })\r\n            .limit(20);\r\n\r\n        // 3. Fetch Products\r\n        const { data: productsData } = await supabase\r\n            .from('products')\r\n            .select(`\r\n                *,\r\n                profiles (id, username, full_name, avatar_url, verification_status),\r\n                product_images (image_url)\r\n            `)\r\n            .order('created_at', { ascending: false })\r\n            .limit(20);\r\n\r\n        const combinedFeed = [];\r\n\r\n        // Process Posts\r\n        if (posts) {\r\n            combinedFeed.push(...posts.map((item: any) => ({\r\n                type: 'post',\r\n                id: item.id,\r\n                user: {\r\n                    name: item.profiles?.full_name || \"Unknown User\",\r\n                    handle: `@${item.profiles?.username || \"unknown\"}`,\r\n                    avatar: item.profiles?.avatar_url,\r\n                    username: item.profiles?.username,\r\n                    verification_status: item.profiles?.verification_status\r\n                },\r\n                image: item.image_url,\r\n                title: item.title,\r\n                caption: item.description || item.title,\r\n                likes: item.likes?.[0]?.count || 0,\r\n                comments: item.comments?.[0]?.count || 0,\r\n                tags: item.section ? [item.section] : [\"Creative\"],\r\n                created_at: item.created_at\r\n            })));\r\n        }\r\n\r\n        // Process Services\r\n        if (servicesData) {\r\n            combinedFeed.push(...servicesData.map((item: any) => ({\r\n                type: 'service',\r\n                id: item.id,\r\n                user: {\r\n                    name: item.profiles?.full_name || \"Unknown User\",\r\n                    handle: `@${item.profiles?.username || \"unknown\"}`,\r\n                    avatar: item.profiles?.avatar_url,\r\n                    username: item.profiles?.username,\r\n                    verification_status: item.profiles?.verification_status\r\n                },\r\n                image: item.thumbnail_url,\r\n                title: item.title,\r\n                caption: item.description,\r\n                price: item.price,\r\n                tags: [\"Service\"],\r\n                created_at: item.created_at\r\n            })));\r\n        }\r\n\r\n        // Process Products\r\n        if (productsData) {\r\n            combinedFeed.push(...productsData.map((item: any) => ({\r\n                type: 'product',\r\n                id: item.id,\r\n                user: {\r\n                    name: item.profiles?.full_name || \"Unknown User\",\r\n                    handle: `@${item.profiles?.username || \"unknown\"}`,\r\n                    avatar: item.profiles?.avatar_url,\r\n                    username: item.profiles?.username,\r\n                    verification_status: item.profiles?.verification_status\r\n                },\r\n                image: item.product_images?.[0]?.image_url,\r\n                title: item.title,\r\n                caption: item.description,\r\n                price: item.price,\r\n                tags: [\"Product\"],\r\n                created_at: item.created_at\r\n            })));\r\n        }\r\n\r\n        // Sort by Date\r\n        combinedFeed.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\r\n\r\n        setFeedItems(combinedFeed);\r\n        setLoadingFeed(false);\r\n    };\r\n\r\n    const fetchSuggestedUsers = async () => {\r\n        const { data, error } = await supabase\r\n            .from('profiles')\r\n            .select('id, username, full_name, avatar_url')\r\n            .limit(5);\r\n\r\n        if (data) {\r\n            const formattedUsers = data.map(user => ({\r\n                id: user.id,\r\n                name: user.full_name || \"Unknown\",\r\n                handle: `@${user.username || \"unknown\"}`,\r\n                avatar: user.avatar_url,\r\n                username: user.username\r\n            }));\r\n            setSuggestedUsers(formattedUsers);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Fetch feed if in BUYER mode OR if user is not logged in (public view)\r\n        if (userMode === \"BUYER\" || !user) {\r\n            fetchFeed();\r\n            fetchSuggestedUsers();\r\n        }\r\n    }, [userMode, user]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const handleLike = async (post: any) => {\r\n        if (!user) {\r\n            toast(\"Please login to like posts.\", \"error\");\r\n            return;\r\n        }\r\n\r\n        // Optimistic update\r\n        const isLiked = post.user_has_liked;\r\n        const newLikesCount = isLiked ? Math.max(0, post.likes - 1) : post.likes + 1;\r\n\r\n        setFeedItems(prev => prev.map(item =>\r\n            item.id === post.id\r\n                ? { ...item, likes: newLikesCount, user_has_liked: !isLiked }\r\n                : item\r\n        ));\r\n\r\n        if (isLiked) {\r\n            // Unlike\r\n            const { error } = await supabase\r\n                .from('likes')\r\n                .delete()\r\n                .eq('user_id', user.id)\r\n                .eq('portfolio_item_id', post.id);\r\n\r\n            if (error) {\r\n                toast(\"Error unliking post\", \"error\");\r\n                // Revert\r\n                setFeedItems(prev => prev.map(item =>\r\n                    item.id === post.id\r\n                        ? { ...item, likes: post.likes, user_has_liked: true }\r\n                        : item\r\n                ));\r\n            }\r\n        } else {\r\n            // Like\r\n            const { error } = await supabase\r\n                .from('likes')\r\n                .insert({\r\n                    user_id: user.id,\r\n                    portfolio_item_id: post.id\r\n                });\r\n\r\n            if (error) {\r\n                if (error.code === '23505') {\r\n                    // Already liked, do nothing (optimistic update was correct)\r\n                } else {\r\n                    toast(\"Error liking post\", \"error\");\r\n                    // Revert\r\n                    setFeedItems(prev => prev.map(item =>\r\n                        item.id === post.id\r\n                            ? { ...item, likes: post.likes, user_has_liked: false }\r\n                            : item\r\n                    ));\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [portfolioItems, setPortfolioItems] = useState<any[]>([]);\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [services, setServices] = useState<any[]>([]);\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [products, setProducts] = useState<any[]>([]);\r\n\r\n    const deleteProduct = async (productId: string) => {\r\n        if (!confirm(\"Are you sure you want to delete this product?\")) return;\r\n\r\n        const { error } = await supabase\r\n            .from('products')\r\n            .delete()\r\n            .eq('id', productId);\r\n\r\n        if (error) {\r\n            toast(\"Error deleting product\", \"error\");\r\n        } else {\r\n            toast(\"Product deleted\", \"success\");\r\n            setProducts(prev => prev.filter(p => p.id !== productId));\r\n        }\r\n    };\r\n\r\n    const deleteService = async (serviceId: string) => {\r\n        if (!confirm(\"Are you sure you want to delete this service?\")) return;\r\n\r\n        const { error } = await supabase\r\n            .from('services')\r\n            .delete()\r\n            .eq('id', serviceId);\r\n\r\n        if (error) {\r\n            toast(\"Error deleting service\", \"error\");\r\n        } else {\r\n            toast(\"Service deleted\", \"success\");\r\n            setServices(prev => prev.filter(s => s.id !== serviceId));\r\n        }\r\n    };\r\n\r\n    const handleEditService = (service: any) => {\r\n        setSelectedService(service);\r\n        setIsEditServiceOpen(true);\r\n        setActiveServiceDropdown(null);\r\n    };\r\n\r\n    // Inline Comment State\r\n    const [commentingPostId, setCommentingPostId] = useState<string | null>(null);\r\n    const [inlineComment, setInlineComment] = useState(\"\");\r\n\r\n\r\n\r\n    const handleInlineCommentSubmit = async (postId: string) => {\r\n        if (!user) {\r\n            toast(\"Please login to comment.\", \"error\");\r\n            return;\r\n        }\r\n        if (!inlineComment.trim()) return;\r\n\r\n        const { error } = await supabase\r\n            .from('comments')\r\n            .insert({\r\n                user_id: user.id,\r\n                portfolio_item_id: postId,\r\n                content: inlineComment.trim()\r\n            });\r\n\r\n        if (error) {\r\n            toast(`Error posting comment: ${error.message}`, \"error\");\r\n        } else {\r\n            toast(\"Comment posted!\", \"success\");\r\n            setInlineComment(\"\");\r\n            setCommentingPostId(null);\r\n            // Optimistically update comment count\r\n            setFeedItems(prev => prev.map(item =>\r\n                item.id === postId\r\n                    ? { ...item, comments: item.comments + 1 }\r\n                    : item\r\n            ));\r\n        }\r\n    };\r\n\r\n    const fetchSellerData = async () => {\r\n        // Fetch Portfolio\r\n        const { data: portfolio } = await supabase\r\n            .from('portfolio_items')\r\n            .select('*')\r\n            .eq('user_id', profile!.id)\r\n            .order('created_at', { ascending: false });\r\n\r\n        if (portfolio) {\r\n            // Attach current user profile to items so PostModal has data\r\n            const formattedPortfolio = portfolio.map(item => ({\r\n                ...item,\r\n                user: {\r\n                    name: profile?.full_name || \"Me\",\r\n                    handle: `@${profile?.username}`,\r\n                    avatar: profile?.avatar_url,\r\n                    username: profile?.username\r\n                },\r\n                // Ensure image_url is present (it should be from DB)\r\n                image_url: item.image_url\r\n            }));\r\n            setPortfolioItems(formattedPortfolio);\r\n        }\r\n\r\n        // Fetch Services\r\n        const { data: servicesData } = await supabase\r\n            .from('services')\r\n            .select('*')\r\n            .eq('seller_id', profile!.id)\r\n            .order('created_at', { ascending: false });\r\n\r\n        if (servicesData) {\r\n            // Mock previews for now as the schema might not have it or it's a different structure\r\n            const formattedServices = servicesData.map(s => ({\r\n                ...s,\r\n                icon: ShoppingBag, // Default icon\r\n                previews: s.thumbnail_url ? [s.thumbnail_url] : []\r\n            }));\r\n            setServices(formattedServices);\r\n        }\r\n\r\n\r\n        // Fetch Products (Shop)\r\n        const { data: productsData } = await supabase\r\n            .from('products')\r\n            .select(`\r\n                *,\r\n                product_images (\r\n                    image_url\r\n                )\r\n            `)\r\n            .eq('seller_id', profile!.id)\r\n            .order('created_at', { ascending: false });\r\n\r\n        if (productsData) {\r\n            setProducts(productsData);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (userMode === \"SELLER\" && profile) {\r\n            fetchSellerData();\r\n        }\r\n    }, [userMode, profile]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    const filteredFeed = feedItems.filter(item => {\r\n        const matchesTag = activeTag === \"All\" || item.tags.includes(activeTag);\r\n        const matchesSearch = item.caption.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            item.user.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            item.user.username?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            item.user.handle?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            item.tags.some((tag: string) => tag.toLowerCase().includes(searchQuery.toLowerCase()));\r\n        return matchesTag && matchesSearch;\r\n    });\r\n\r\n    const accentColor = profile?.accent_color || \"#5975fa\";\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen bg-gray-50 dark:bg-[#1a1a1a] flex items-center justify-center\">\r\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-white\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={clsx(\r\n            \"min-h-screen text-gray-900 dark:text-white pb-32 selection:bg-red-500/30 transition-colors duration-300 font-sans\",\r\n            userMode === \"SELLER\" ? \"bg-gray-50 dark:bg-[#1a1a1a]\" : \"bg-white dark:bg-[#222]\"\r\n        )}>\r\n\r\n            <EditProfileModal isOpen={isEditProfileOpen} onClose={() => setIsEditProfileOpen(false)} />\r\n            <EditServiceModal\r\n                isOpen={isEditServiceOpen}\r\n                onClose={() => setIsEditServiceOpen(false)}\r\n                service={selectedService}\r\n                onUpdate={(updatedService) => {\r\n                    setServices(prev => prev.map(s => s.id === updatedService.id ? { ...s, ...updatedService, previews: updatedService.thumbnail_url ? [updatedService.thumbnail_url] : [] } : s));\r\n                }}\r\n            />\r\n            {reportTarget && (\r\n                <ReportModal\r\n                    isOpen={isReportModalOpen}\r\n                    onClose={() => setIsReportModalOpen(false)}\r\n                    targetId={reportTarget.id}\r\n                    targetType={reportTarget.type}\r\n                />\r\n            )}\r\n            <PostModal\r\n                isOpen={isPostModalOpen}\r\n                onClose={() => setIsPostModalOpen(false)}\r\n                post={selectedPost}\r\n                onUpdate={(updatedPost) => {\r\n                    setFeedItems(prev => prev.map(item => item.id === updatedPost.id ? { ...item, ...updatedPost } : item));\r\n                    setPortfolioItems(prev => prev.map(item => item.id === updatedPost.id ? { ...item, ...updatedPost } : item));\r\n                }}\r\n            />\r\n            <input type=\"file\" ref={bannerInputRef} onChange={handleBannerChange} className=\"hidden\" accept=\"image/*\" />\r\n            <input type=\"file\" ref={avatarInputRef} onChange={handleAvatarChange} className=\"hidden\" accept=\"image/*\" />\r\n\r\n            {user && userMode === \"SELLER\" ? (\r\n                /* SELLER DASHBOARD */\r\n                <div>\r\n                    {/* Profile Header */}\r\n                    <div className=\"relative group pb-4\">\r\n                        {/* Immersive Banner */}\r\n                        <div className=\"h-48 md:h-80 w-full relative overflow-hidden group/banner\">\r\n                            {profile?.banner_url ? (\r\n                                <Image src={profile.banner_url} alt=\"Banner\" fill className=\"object-cover\" />\r\n                            ) : (\r\n                                <div className=\"w-full h-full bg-gradient-to-b from-gray-100 to-gray-200 dark:from-[#2a2a2a] dark:to-[#1a1a1a]\" />\r\n                            )}\r\n                            <div className=\"absolute inset-0 bg-gradient-to-b from-black/10 via-transparent to-background\" />\r\n\r\n                            {/* Social Icons Overlay (Top Right) */}\r\n                            <div className=\"absolute top-6 right-6 flex items-center gap-4 z-20\">\r\n                                {profile?.social_links?.twitch && (\r\n                                    <a href={`https://twitch.tv/${profile.social_links.twitch}`} target=\"_blank\" className=\"text-white/80 hover:text-white transition-colors hover:scale-110 transform\">\r\n                                        <Twitch className=\"w-6 h-6\" />\r\n                                    </a>\r\n                                )}\r\n                                {profile?.social_links?.instagram && (\r\n                                    <a href={`https://instagram.com/${profile.social_links.instagram}`} target=\"_blank\" className=\"text-white/80 hover:text-white transition-colors hover:scale-110 transform\">\r\n                                        <Instagram className=\"w-6 h-6\" />\r\n                                    </a>\r\n                                )}\r\n                                {profile?.social_links?.twitter && (\r\n                                    <a href={`https://twitter.com/${profile.social_links.twitter}`} target=\"_blank\" className=\"text-white/80 hover:text-white transition-colors hover:scale-110 transform\">\r\n                                        <Twitter className=\"w-6 h-6\" />\r\n                                    </a>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Edit Profile Button */}\r\n                            <button\r\n                                onClick={() => setIsEditProfileOpen(true)}\r\n                                className=\"absolute top-4 left-4 p-2 bg-black/50 rounded-full text-white opacity-0 group-hover/banner:opacity-100 transition-opacity hover:bg-black/70 z-30\"\r\n                            >\r\n                                <Edit3 className=\"w-5 h-5\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 -mt-20 md:-mt-32\">\r\n                            <div className=\"flex flex-col md:flex-row items-center md:items-end gap-6 md:gap-8\">\r\n                                {/* Avatar */}\r\n                                <div className=\"relative shrink-0 mx-auto md:mx-0 group/avatar\">\r\n                                    <div className=\"w-32 h-32 md:w-48 md:h-48 rounded-3xl p-1 bg-white dark:bg-[#1a1a1a] shadow-2xl\">\r\n                                        <div className=\"w-full h-full rounded-2xl overflow-hidden relative border-2 border-gray-200 dark:border-[#333]\">\r\n                                            {profile?.avatar_url ? (\r\n                                                <Image src={profile.avatar_url} alt=\"Avatar\" fill className=\"object-cover\" />\r\n                                            ) : (\r\n                                                <div className=\"w-full h-full bg-gray-200 dark:bg-[#333] flex items-center justify-center\">\r\n                                                    <User className=\"w-16 h-16 text-gray-400\" />\r\n                                                </div>\r\n                                            )}\r\n                                            <div\r\n                                                onClick={handleAvatarClick}\r\n                                                className=\"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover/avatar:opacity-100 transition-opacity cursor-pointer\"\r\n                                            >\r\n                                                <Camera className=\"w-8 h-8 text-white\" />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    {profile?.verification_status === 'verified' && (\r\n                                        <div className=\"absolute -bottom-2 -right-2 bg-white dark:bg-[#1a1a1a] p-1.5 rounded-full shadow-lg border border-gray-200 dark:border-[#333]\">\r\n                                            <div className=\"text-white p-1 rounded-full bg-red-500\">\r\n                                                <Check className=\"w-3 h-3 stroke-[4]\" />\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n\r\n                                {/* Profile Info */}\r\n                                <div className=\"flex-1 flex flex-col md:flex-row items-center md:items-end justify-between gap-6 w-full text-center md:text-left pb-4 min-w-0\">\r\n                                    <div className=\"space-y-1\">\r\n                                        <h1 className=\"text-3xl md:text-4xl font-black text-gray-900 dark:text-white tracking-tight\">\r\n                                            {profile?.full_name || user?.email?.split('@')[0]}\r\n                                        </h1>\r\n                                        <p className=\"text-gray-500 font-medium\">@{profile?.username || \"username\"}</p>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex items-center gap-6 text-sm font-bold justify-center md:justify-end\">\r\n                                        <div className=\"text-center md:text-right\">\r\n                                            <div className=\"text-gray-900 dark:text-white text-lg\">{stats.followers}</div>\r\n                                            <div className=\"text-gray-500 text-xs uppercase tracking-wider\">Followers</div>\r\n                                        </div>\r\n                                        <div className=\"text-center md:text-right\">\r\n                                            <div className=\"text-gray-900 dark:text-white text-lg\">{stats.following}</div>\r\n                                            <div className=\"text-gray-500 text-xs uppercase tracking-wider\">Following</div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Sticky Tabs */}\r\n                    <div className=\"sticky top-16 z-30 bg-background/95 backdrop-blur-md w-full mt-6 py-4\">\r\n                        <div className=\"flex gap-2 overflow-x-auto w-full px-4 md:px-0 no-scrollbar justify-start md:justify-center\">\r\n                            {PROFILE_TABS.map((tab) => (\r\n                                <button\r\n                                    key={tab}\r\n                                    onClick={() => setActiveProfileTab(tab)}\r\n                                    className={clsx(\r\n                                        \"px-6 py-3 rounded-full text-xs font-black tracking-wider transition-all flex items-center gap-2 uppercase min-w-max\",\r\n                                        activeProfileTab === tab\r\n                                            ? \"bg-primary text-primary-foreground shadow-lg shadow-primary/25 scale-105\"\r\n                                            : \"bg-muted/50 text-muted-foreground hover:bg-muted hover:text-foreground\"\r\n                                    )}\r\n                                >\r\n                                    {tab === \"HOME\" && <Home className=\"w-4 h-4\" />}\r\n                                    {tab === \"SERVICES\" && <MoreHorizontal className=\"w-4 h-4\" />}\r\n                                    {tab === \"PORTFOLIO\" && <GridIcon className=\"w-4 h-4\" />}\r\n                                    {tab === \"SHOP\" && <ShoppingBag className=\"w-4 h-4\" />}\r\n                                    {tab}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    {/* Dashboard Content */}\r\n                    <div className=\"max-w-7xl mx-auto mt-6 px-4 pb-20\">\r\n                        {activeProfileTab === \"HOME\" && (\r\n                            <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500 space-y-6\">\r\n                                {/* Revenue Chart Section */}\r\n                                <div className=\"bg-card rounded-[2.5rem] p-8 relative overflow-hidden shadow-sm border border-border/50\">\r\n                                    <div className=\"flex justify-between items-center mb-8\">\r\n                                        <div>\r\n                                            <h3 className=\"text-2xl font-black italic tracking-tight text-foreground\">REVENUE</h3>\r\n                                            <p className=\"text-muted-foreground font-medium\">Your earnings over time.</p>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2 text-xs font-bold bg-primary/10 px-4 py-2 rounded-full text-primary\">\r\n                                            <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\" />\r\n                                            2025\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"h-64 w-full relative flex items-center justify-center bg-muted/30 rounded-[2rem] border-2 border-dashed border-border/50\">\r\n                                        <div className=\"text-center\">\r\n                                            <div className=\"w-16 h-16 bg-background rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm\">\r\n                                                <DollarSign className=\"w-8 h-8 text-muted-foreground\" />\r\n                                            </div>\r\n                                            <p className=\"text-foreground font-bold text-lg\">No Data Available</p>\r\n                                            <p className=\"text-sm text-muted-foreground mt-1 font-medium\">Revenue data will appear here once you start selling.</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Overview Cards */}\r\n                                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                                    <div className=\"lg:col-span-2 bg-card rounded-[2.5rem] p-8 shadow-sm border border-border/50\">\r\n                                        <div className=\"flex justify-between items-center mb-8\">\r\n                                            <h4 className=\"text-xl font-black italic text-foreground\">WEEKLY STATS</h4>\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                                            <div className=\"bg-muted/30 rounded-[2rem] p-6 flex flex-col items-center justify-center aspect-square hover:bg-muted/50 transition-colors group\">\r\n                                                <TrendingUp className=\"w-8 h-8 text-foreground mb-3 group-hover:scale-110 transition-transform\" />\r\n                                                <span className=\"text-3xl font-black text-foreground\">0</span>\r\n                                                <span className=\"text-xs font-bold text-muted-foreground uppercase tracking-wider mt-1\">Orders</span>\r\n                                            </div>\r\n                                            <div className=\"bg-primary/5 rounded-[2rem] p-6 flex flex-col items-center justify-center aspect-square hover:bg-primary/10 transition-colors group\">\r\n                                                <UserPlus className=\"w-8 h-8 text-primary mb-3 group-hover:scale-110 transition-transform\" />\r\n                                                <span className=\"text-3xl font-black text-foreground\">0</span>\r\n                                                <span className=\"text-xs font-bold text-primary uppercase tracking-wider mt-1\">Visits</span>\r\n                                            </div>\r\n                                            <div className=\"bg-muted/30 rounded-[2rem] p-6 flex flex-col items-center justify-center aspect-square hover:bg-muted/50 transition-colors group\">\r\n                                                <Star className=\"w-8 h-8 text-yellow-500 mb-3 fill-current group-hover:scale-110 transition-transform\" />\r\n                                                <span className=\"text-3xl font-black text-foreground\">0.0</span>\r\n                                                <span className=\"text-xs font-bold text-muted-foreground uppercase tracking-wider mt-1\">Rating</span>\r\n                                            </div>\r\n                                            <div className=\"bg-muted/30 rounded-[2rem] p-6 flex flex-col items-center justify-center aspect-square hover:bg-muted/50 transition-colors group\">\r\n                                                <RefreshCw className=\"w-8 h-8 text-foreground mb-3 group-hover:scale-110 transition-transform\" />\r\n                                                <span className=\"text-3xl font-black text-foreground\">0</span>\r\n                                                <span className=\"text-xs font-bold text-muted-foreground uppercase tracking-wider mt-1\">Refunds</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"bg-primary text-primary-foreground rounded-[2.5rem] p-8 shadow-lg shadow-primary/20 flex flex-col justify-between relative overflow-hidden\">\r\n                                        <div className=\"absolute top-0 right-0 p-8 opacity-10\">\r\n                                            <DollarSign className=\"w-32 h-32\" />\r\n                                        </div>\r\n                                        <div className=\"relative z-10\">\r\n                                            <h4 className=\"text-xl font-black italic mb-8\">EARNINGS</h4>\r\n                                            <div className=\"space-y-6\">\r\n                                                <div className=\"bg-white/10 backdrop-blur-md rounded-[2rem] p-6 text-center border border-white/20\">\r\n                                                    <span className=\"text-xs font-bold uppercase tracking-wider opacity-80 block mb-1\">This Week</span>\r\n                                                    <span className=\"text-4xl font-black tracking-tight\">$0.00</span>\r\n                                                </div>\r\n                                                <div className=\"bg-white/10 backdrop-blur-md rounded-[2rem] p-6 text-center border border-white/20\">\r\n                                                    <span className=\"text-xs font-bold uppercase tracking-wider opacity-80 block mb-1\">Total</span>\r\n                                                    <span className=\"text-4xl font-black tracking-tight\">$0.00</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {activeProfileTab === \"SERVICES\" && (\r\n                            <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                                <div className=\"space-y-4\">\r\n                                    <div className=\"flex items-center justify-between px-2\">\r\n                                        <h3 className=\"text-2xl font-black text-foreground tracking-tight\">Active Services</h3>\r\n                                        <button className=\"text-sm font-bold text-primary hover:underline\">Manage</button>\r\n                                    </div>\r\n                                    <div className=\"space-y-4\">\r\n                                        {services.length > 0 ? (\r\n                                            services.map((service) => (\r\n                                                <div key={service.id} className=\"bg-card rounded-[2rem] p-6 shadow-sm border border-border/50 hover:shadow-md transition-all\">\r\n                                                    <div className=\"flex items-start justify-between mb-6\">\r\n                                                        <div className=\"flex items-center gap-4\">\r\n                                                            <div className=\"w-12 h-12 bg-primary/10 rounded-2xl flex items-center justify-center text-primary\">\r\n                                                                <service.icon className=\"w-6 h-6\" />\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <h4 className=\"font-bold text-lg text-foreground\">{service.title}</h4>\r\n                                                                <p className=\"text-sm text-primary font-bold\">Starting at ${service.price}</p>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <div className=\"relative\">\r\n                                                            <button\r\n                                                                onClick={() => setActiveServiceDropdown(activeServiceDropdown === service.id ? null : service.id)}\r\n                                                                className=\"p-2 hover:bg-muted rounded-full transition-colors text-muted-foreground hover:text-foreground\"\r\n                                                            >\r\n                                                                <MoreHorizontal className=\"w-5 h-5\" />\r\n                                                            </button>\r\n                                                            {activeServiceDropdown === service.id && (\r\n                                                                <div className=\"absolute right-0 top-full mt-2 w-32 bg-card border border-border rounded-xl shadow-xl z-10 overflow-hidden animate-in fade-in zoom-in-95 duration-200\">\r\n                                                                    <button\r\n                                                                        onClick={() => handleEditService(service)}\r\n                                                                        className=\"w-full text-left px-4 py-2 text-sm font-bold hover:bg-muted transition-colors flex items-center gap-2\"\r\n                                                                    >\r\n                                                                        <Edit3 className=\"w-4 h-4\" />\r\n                                                                        Edit\r\n                                                                    </button>\r\n                                                                    <button\r\n                                                                        onClick={() => deleteService(service.id)}\r\n                                                                        className=\"w-full text-left px-4 py-2 text-sm font-bold hover:bg-red-500/10 text-red-500 transition-colors flex items-center gap-2\"\r\n                                                                    >\r\n                                                                        <X className=\"w-4 h-4\" />\r\n                                                                        Delete\r\n                                                                    </button>\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"flex gap-3 overflow-x-auto pb-2 no-scrollbar\">\r\n                                                        {service.previews.map((preview: string, idx: number) => (\r\n                                                            <div key={idx} className=\"w-40 h-24 flex-shrink-0 rounded-2xl overflow-hidden border border-border/50 bg-muted/30 relative\">\r\n                                                                <Image src={preview} alt=\"Preview\" fill className=\"object-cover\" />\r\n                                                            </div>\r\n                                                        ))}\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))\r\n                                        ) : (\r\n                                            <div className=\"text-center py-16 bg-muted/30 rounded-[2.5rem] border-2 border-dashed border-border/50\">\r\n                                                <div className=\"w-16 h-16 bg-background rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm\">\r\n                                                    <ShoppingBag className=\"w-8 h-8 text-muted-foreground\" />\r\n                                                </div>\r\n                                                <h3 className=\"text-lg font-bold text-foreground\">No services yet</h3>\r\n                                                <p className=\"text-muted-foreground font-medium mt-1\">Create your first service to start selling.</p>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {activeProfileTab === \"PORTFOLIO\" && (\r\n                            <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\r\n                                    {portfolioItems.length > 0 ? (\r\n                                                        <div className=\"bg-background/80 backdrop-blur-md text-foreground text-xs font-black px-3 py-1.5 rounded-full shadow-sm\">\r\n                                                            ${product.price}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={(e) => {\r\n                                                            e.stopPropagation();\r\n                                                            deleteProduct(product.id);\r\n                                                        }}\r\n                                                        className=\"absolute top-3 left-3 bg-red-500 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-sm hover:bg-red-600\"\r\n                                                        title=\"Delete Product\"\r\n                                                    >\r\n                                                        <X className=\"w-4 h-4\" />\r\n                                                    </button>\r\n                                                </div>\r\n                                                <div className=\"p-5 flex-1 flex flex-col\">\r\n                                                    <h4 className=\"font-bold text-foreground truncate text-lg mb-1\">{product.title}</h4>\r\n                                                    <p className=\"text-xs text-muted-foreground line-clamp-2 mb-4 font-medium\">{product.description}</p>\r\n                                                    <button className=\"w-full mt-auto bg-primary text-primary-foreground py-3 rounded-xl text-sm font-bold hover:bg-primary/90 transition-colors shadow-lg shadow-primary/20\">\r\n                                                        Buy Now\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                </div>\r\n            ) : (\r\n                <div className=\"flex flex-col items-center justify-center py-20 text-center space-y-4 border-2 border-dashed border-border/50 rounded-[2.5rem] bg-muted/10\">\r\n                    <div className=\"w-20 h-20 bg-muted/30 rounded-full flex items-center justify-center\">\r\n                        <ShoppingBag className=\"w-10 h-10 text-muted-foreground\" />\r\n                    </div>\r\n                    <div>\r\n                        <h3 className=\"text-xl font-black text-foreground\">Shop is Empty</h3>\r\n                        <p className=\"text-muted-foreground font-medium max-w-sm mx-auto mt-2\">\r\n                            You haven&apos;t listed any products yet.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n                    </div >\r\n                </div >\r\n            ) : (\r\n    /* BUYER FEED */\r\n    /* BUYER FEED */\r\n    <div className=\"w-full max-w-6xl mx-auto pb-24 md:pt-8 md:px-6\">\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n            {/* Middle Column - Feed */}\r\n            <div className=\"lg:col-span-2\">\r\n                {/* Mobile Search Header & Tabs */}\r\n                {/* Mobile Search Header & Tabs */}\r\n                {/* Mobile Search Header & Tabs */}\r\n                <div className={clsx(\r\n                    \"fixed top-0 left-0 right-0 z-20 bg-white/95 dark:bg-[#222]/95 backdrop-blur-md border-b border-gray-200 dark:border-[#333] transition-transform duration-300 md:hidden\",\r\n                    isHeaderVisible ? \"translate-y-0\" : \"-translate-y-full\"\r\n                )}>\r\n                    <div className=\"px-4 py-2\">\r\n                        <div className=\"relative\">\r\n                            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                value={searchQuery}\r\n                                onChange={(e) => setSearchQuery(e.target.value)}\r\n                                placeholder=\"Search creators...\"\r\n                                className=\"w-full bg-gray-100 dark:bg-[#2a2a2a] border-none rounded-xl pl-10 pr-4 py-2.5 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-gray-200 dark:focus:ring-[#333] placeholder:text-gray-500\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Search Results Dropdown */}\r\n                        {searchQuery && searchedUsers.length > 0 && (\r\n                            <div className=\"absolute top-full left-0 right-0 mt-2 mx-4 bg-white dark:bg-[#222] border border-gray-200 dark:border-[#333] rounded-2xl overflow-hidden shadow-xl max-h-[60vh] overflow-y-auto\">\r\n                                {searchedUsers.map(user => (\r\n                                    <Link\r\n                                        key={user.id}\r\n                                        href={`/${user.username}`}\r\n                                        className=\"flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-[#333] transition-colors\"\r\n                                    >\r\n                                        <div className=\"w-10 h-10 rounded-full overflow-hidden ring-1 ring-gray-100 dark:ring-[#333] bg-gray-100 dark:bg-[#333] flex items-center justify-center relative\">\r\n                                            {user.avatar_url ? (\r\n                                                <Image src={user.avatar_url} alt={user.full_name} fill className=\"object-cover\" />\r\n                                            ) : (\r\n                                                <User className=\"w-5 h-5 text-gray-400\" />\r\n                                            )}\r\n                                        </div>\r\n                                        <div>\r\n                                            <div className=\"font-bold text-gray-900 dark:text-white text-sm flex items-center gap-1\">\r\n                                                {user.full_name}\r\n                                                {user.verification_status === 'verified' && (\r\n                                                    <div className=\"bg-primary text-white p-0.5 rounded-full\">\r\n                                                        <Check className=\"w-2 h-2 stroke-[4]\" />\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                            <div className=\"text-xs text-gray-500\">@{user.username}</div>\r\n                                        </div>\r\n                                    </Link>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Feed Tabs */}\r\n                    <div className=\"flex border-t border-gray-200 dark:border-[#333]\">\r\n                        <button\r\n                            onClick={() => setFeedTab('foryou')}\r\n                            className={clsx(\r\n                                \"flex-1 py-3 text-sm font-bold text-center relative\",\r\n                                feedTab === 'foryou' ? \"text-gray-900 dark:text-white\" : \"text-gray-500 dark:text-gray-400\"\r\n                            )}\r\n                        >\r\n                            For You\r\n                            {feedTab === 'foryou' && (\r\n                                <div className=\"absolute bottom-0 left-1/2 -translate-x-1/2 w-12 h-1 bg-gray-900 dark:bg-white rounded-t-full\" />\r\n                            )}\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setFeedTab('following')}\r\n                            className={clsx(\r\n                                \"flex-1 py-3 text-sm font-bold text-center relative\",\r\n                                feedTab === 'following' ? \"text-gray-900 dark:text-white\" : \"text-gray-500 dark:text-gray-400\"\r\n                            )}\r\n                        >\r\n                            Following\r\n                            {feedTab === 'following' && (\r\n                                <div className=\"absolute bottom-0 left-1/2 -translate-x-1/2 w-12 h-1 bg-gray-900 dark:bg-white rounded-t-full\" />\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Desktop Tabs (Sticky) */}\r\n                <div className=\"hidden md:flex sticky top-24 z-10 bg-white/95 dark:bg-[#222]/95 backdrop-blur-md border border-gray-200 dark:border-[#333] rounded-2xl mb-6 overflow-hidden shadow-sm\">\r\n                    <button\r\n                        onClick={() => setFeedTab('foryou')}\r\n                        className={clsx(\r\n                            \"flex-1 py-3 text-sm font-bold text-center relative hover:bg-gray-50 dark:hover:bg-[#333] transition-colors\",\r\n                            feedTab === 'foryou' ? \"text-gray-900 dark:text-white\" : \"text-gray-500 dark:text-gray-400\"\r\n                        )}\r\n                    >\r\n                        For You\r\n                        {feedTab === 'foryou' && (\r\n                            <div className=\"absolute bottom-0 left-1/2 -translate-x-1/2 w-12 h-1 bg-gray-900 dark:bg-white rounded-t-full\" />\r\n                        )}\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setFeedTab('following')}\r\n                        className={clsx(\r\n                            \"flex-1 py-3 text-sm font-bold text-center relative hover:bg-gray-50 dark:hover:bg-[#333] transition-colors\",\r\n                            feedTab === 'following' ? \"text-gray-900 dark:text-white\" : \"text-gray-500 dark:text-gray-400\"\r\n                        )}\r\n                    >\r\n                        Following\r\n                        {feedTab === 'following' && (\r\n                            <div className=\"absolute bottom-0 left-1/2 -translate-x-1/2 w-12 h-1 bg-gray-900 dark:bg-white rounded-t-full\" />\r\n                        )}\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"pt-[110px] md:pt-0 px-0 space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                    {/* Tag Filter (Hidden on Desktop, moved to sidebar) */}\r\n                    {feedTab === 'foryou' && (\r\n                        <div className=\"md:hidden flex items-center gap-2 mb-4 overflow-x-auto pb-2 no-scrollbar px-4\">\r\n                            {TAGS.map((tag) => (\r\n                                <button\r\n                                    key={tag}\r\n                                    onClick={() => setActiveTag(tag)}\r\n                                    className={clsx(\r\n                                        \"px-4 py-1.5 rounded-full font-bold text-xs transition-all whitespace-nowrap border\",\r\n                                        activeTag === tag\r\n                                            ? \"bg-gray-900 dark:bg-white text-white dark:text-black border-transparent\"\r\n                                            : \"bg-transparent border-gray-200 dark:border-[#333] text-gray-600 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500\"\r\n                                    )}\r\n                                >\r\n                                    {tag}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Feed Items */}\r\n                    {filteredFeed.length > 0 ? (\r\n                        filteredFeed.map((item) => (\r\n                            <div key={item.id} className=\"w-full bg-white dark:bg-[#222] border-y md:border border-gray-200 dark:border-[#333] md:rounded-3xl overflow-hidden shadow-sm hover:shadow-md transition-shadow\">\r\n                                <div className=\"p-3 flex items-center justify-between\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <Link href={`/${item.user.username}`} className=\"block\">\r\n                                            <div className=\"w-9 h-9 rounded-full overflow-hidden ring-1 ring-gray-100 dark:ring-[#333] bg-gray-100 dark:bg-[#333] flex items-center justify-center relative\">\r\n                                                {item.user.avatar ? (\r\n                                                    <Image src={item.user.avatar} alt={item.user.name} fill className=\"object-cover\" />\r\n                                                ) : (\r\n                                                    <User className=\"w-4 h-4 text-gray-400\" />\r\n                                                )}\r\n                                            </div>\r\n                                        </Link>\r\n                                        <div className=\"leading-tight\">\r\n                                            <Link href={`/${item.user.username}`} className=\"flex items-center gap-1 font-bold text-gray-900 dark:text-white text-sm hover:underline\">\r\n                                                {item.user.name}\r\n                                                {(item.user.username === \"leonp\" || item.user.username === \"paylink\") && (\r\n                                                    <div className=\"bg-primary text-white p-0.5 rounded-full\">\r\n                                                        <Check className=\"w-2 h-2 stroke-[4]\" />\r\n                                                    </div>\r\n                                                )}\r\n                                            </Link>\r\n                                            <Link href={`/${item.user.username}`} className=\"text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300\">\r\n                                                {item.user.handle}\r\n                                            </Link>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"relative\">\r\n                                        <button\r\n                                            onClick={() => setActiveFeedMenuId(activeFeedMenuId === item.id ? null : item.id)}\r\n                                            className=\"text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors p-1\"\r\n                                        >\r\n                                            <MoreHorizontal className=\"w-5 h-5\" />\r\n                                        </button>\r\n                                        {activeFeedMenuId === item.id && (\r\n                                            <div className=\"absolute right-0 top-full mt-2 w-40 bg-card border border-border rounded-xl shadow-xl z-20 overflow-hidden animate-in fade-in zoom-in-95 duration-200\">\r\n                                                <button\r\n                                                    onClick={() => handleReport(item)}\r\n                                                    className=\"w-full text-left px-4 py-2.5 text-sm font-bold hover:bg-red-500/10 text-red-500 transition-colors flex items-center gap-2\"\r\n                                                >\r\n                                                    <Flag className=\"w-4 h-4\" />\r\n                                                    Report\r\n                                                </button>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div\r\n                                    className=\"aspect-square w-full bg-gray-100 dark:bg-[#1a1a1a] relative group\"\r\n                                >\r\n                                    {item.image ? (\r\n                                        <Image src={item.image} alt=\"Post\" fill className=\"object-cover\" />\r\n                                    ) : (\r\n                                        <div className=\"w-full h-full flex items-center justify-center bg-muted\">\r\n                                            {item.type === 'service' ? <Briefcase className=\"w-12 h-12 text-muted-foreground/50\" /> : <ShoppingBag className=\"w-12 h-12 text-muted-foreground/50\" />}\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {/* Type Badge */}\r\n                                    <div className=\"absolute top-3 right-3\">\r\n                                        {item.type === 'service' && (\r\n                                            <div className=\"bg-blue-500 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-lg flex items-center gap-1\">\r\n                                                <Briefcase className=\"w-3 h-3\" />\r\n                                                Service\r\n                                            </div>\r\n                                        )}\r\n                                        {item.type === 'product' && (\r\n                                            <div className=\"bg-green-500 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-lg flex items-center gap-1\">\r\n                                                <ShoppingBag className=\"w-3 h-3\" />\r\n                                                Shop\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {/* Price Tag for Services/Products */}\r\n                                    {(item.type === 'service' || item.type === 'product') && (\r\n                                        <div className=\"absolute bottom-3 left-3\">\r\n                                            <div className=\"bg-black/60 backdrop-blur-md text-white text-sm font-black px-4 py-2 rounded-xl shadow-lg border border-white/10\">\r\n                                                ${item.price}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <button\r\n                                        onClick={() => handlePostClick(item)}\r\n                                        className=\"absolute bottom-3 right-3 p-2 bg-black/50 hover:bg-black/70 rounded-full text-white opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity\"\r\n                                    >\r\n                                        <Maximize2 className=\"w-5 h-5\" />\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <div className=\"p-4\">\r\n                                    <div className=\"flex items-center justify-between mb-3\">\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <button\r\n                                                onClick={() => handleLike(item)}\r\n                                                className={clsx(\r\n                                                    \"hover:scale-110 transition-transform flex items-center justify-center\",\r\n                                                    item.user_has_liked ? \"text-red-500\" : \"text-gray-900 dark:text-white\"\r\n                                                )}\r\n                                            >\r\n                                                <Heart className={clsx(\"w-7 h-7\", item.user_has_liked && \"fill-current\")} />\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => setCommentingPostId(commentingPostId === item.id ? null : item.id)}\r\n                                                className=\"text-gray-900 dark:text-white hover:scale-110 transition-transform flex items-center justify-center\"\r\n                                            >\r\n                                                <MessageCircle className=\"w-7 h-7\" />\r\n                                            </button>\r\n                                            <button className=\"text-gray-900 dark:text-white hover:scale-110 transition-transform flex items-center justify-center\">\r\n                                                <Send className=\"w-7 h-7 -rotate-45 mt-2\" />\r\n                                            </button>\r\n                                        </div>\r\n                                        <div className=\"font-bold text-sm mb-1 text-gray-900 dark:text-white flex items-center gap-2\">\r\n                                            {item.type === 'post' ? (\r\n                                                <span>{item.likes} likes</span>\r\n                                            ) : (\r\n                                                <button className=\"bg-primary text-primary-foreground px-4 py-1.5 rounded-full text-xs font-bold hover:bg-primary/90 transition-colors\">\r\n                                                    {item.type === 'service' ? 'Book Now' : 'Buy Now'}\r\n                                                </button>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-1\">\r\n                                        <p className=\"text-sm text-gray-900 dark:text-white\">\r\n                                            <span className=\"font-bold mr-2\">{item.user.name}</span>\r\n                                            {item.caption}\r\n                                        </p>\r\n                                        <div className=\"flex flex-wrap gap-2 mt-2\">\r\n                                            {item.tags.map((tag: string, idx: number) => (\r\n                                                <span key={idx} className=\"text-xs text-primary hover:underline cursor-pointer\">#{tag}</span>\r\n                                            ))}\r\n                                        </div>\r\n                                        <button\r\n                                            onClick={() => handlePostClick(item)}\r\n                                            className=\"text-gray-500 text-sm mt-1 hover:text-gray-900 dark:hover:text-gray-300\"\r\n                                        >\r\n                                            View all {item.comments} comments\r\n                                        </button>\r\n\r\n                                        {/* Inline Comment Input */}\r\n                                        {commentingPostId === item.id && (\r\n                                            <div className=\"flex items-center gap-2 mt-2 animate-in fade-in slide-in-from-top-1 duration-200\">\r\n                                                <input\r\n                                                    id={`inline-comment-${item.id}`}\r\n                                                    type=\"text\"\r\n                                                    value={inlineComment}\r\n                                                    onChange={(e) => setInlineComment(e.target.value)}\r\n                                                    onKeyDown={(e) => e.key === 'Enter' && handleInlineCommentSubmit(item.id)}\r\n                                                    placeholder=\"Add a comment...\"\r\n                                                    className=\"flex-1 bg-gray-100 dark:bg-[#333] border-none rounded-full px-4 py-2 text-sm focus:ring-2 focus:ring-primary/20 transition-all\"\r\n                                                    autoFocus\r\n                                                />\r\n                                                <button\r\n                                                    onClick={() => handleInlineCommentSubmit(item.id)}\r\n                                                    disabled={!inlineComment.trim()}\r\n                                                    className=\"text-primary font-bold text-sm disabled:opacity-50 hover:text-primary/80 transition-colors px-2\"\r\n                                                >\r\n                                                    Post\r\n                                                </button>\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {!commentingPostId && (\r\n                                            <button\r\n                                                onClick={() => setCommentingPostId(item.id)}\r\n                                                className=\"text-gray-400 text-xs mt-2 block hover:text-gray-600 dark:hover:text-gray-300\"\r\n                                            >\r\n                                                Add a comment...\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    ) : (\r\n                        <div className=\"text-center py-20 bg-white dark:bg-[#222] rounded-3xl border border-gray-200 dark:border-[#333]\">\r\n                            <div className=\"w-16 h-16 bg-gray-100 dark:bg-[#333] rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                                <Search className=\"w-8 h-8 text-gray-400\" />\r\n                            </div>\r\n                            <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">No posts found</h3>\r\n                            <p className=\"text-gray-500 dark:text-gray-400 mt-2\">Try adjusting your search or filters</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Right Sidebar - Desktop Only */}\r\n            <div className=\"hidden lg:block space-y-6 sticky top-24 h-fit\">\r\n                {/* Search Widget */}\r\n                <div className=\"bg-white dark:bg-[#222] rounded-2xl p-4 border border-gray-200 dark:border-[#333] shadow-sm\">\r\n                    <div className=\"relative\">\r\n                        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                            placeholder=\"Search creators...\"\r\n                            className=\"w-full bg-gray-100 dark:bg-[#2a2a2a] border-none rounded-xl pl-10 pr-4 py-2.5 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-gray-200 dark:focus:ring-[#333] placeholder:text-gray-500\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Search Results Dropdown */}\r\n                    {searchQuery && searchedUsers.length > 0 && (\r\n                        <div className=\"mt-4 space-y-2\">\r\n                            {searchedUsers.map(user => (\r\n                                <Link\r\n                                    key={user.id}\r\n                                    href={`/${user.username}`}\r\n                                    className=\"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-[#333] rounded-xl transition-colors\"\r\n                                >\r\n                                    <div className=\"w-8 h-8 rounded-full overflow-hidden ring-1 ring-gray-100 dark:ring-[#333] bg-gray-100 dark:bg-[#333] flex items-center justify-center relative\">\r\n                                        {user.avatar_url ? (\r\n                                            <Image src={user.avatar_url} alt={user.full_name} fill className=\"object-cover\" />\r\n                                        ) : (\r\n                                            <User className=\"w-4 h-4 text-gray-400\" />\r\n                                        )}\r\n                                    </div>\r\n                                    <div className=\"min-w-0\">\r\n                                        <div className=\"font-bold text-gray-900 dark:text-white text-sm flex items-center gap-1 truncate\">\r\n                                            {user.full_name}\r\n                                            {user.verification_status === 'verified' && (\r\n                                                <div className=\"bg-primary text-white p-0.5 rounded-full shrink-0\">\r\n                                                    <Check className=\"w-2 h-2 stroke-[4]\" />\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"text-xs text-gray-500 truncate\">@{user.username}</div>\r\n                                    </div>\r\n                                </Link>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Tags Widget */}\r\n                <div className=\"bg-white dark:bg-[#222] rounded-2xl p-6 border border-gray-200 dark:border-[#333] shadow-sm\">\r\n                    <h3 className=\"font-bold text-gray-900 dark:text-white mb-4\">Trending Topics</h3>\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                        {TAGS.map((tag) => (\r\n                            <button\r\n                                key={tag}\r\n                                onClick={() => setActiveTag(tag)}\r\n                                className={clsx(\r\n                                    \"px-3 py-1.5 rounded-full font-bold text-xs transition-all border\",\r\n                                    activeTag === tag\r\n                                        ? \"bg-gray-900 dark:bg-white text-white dark:text-black border-transparent\"\r\n                                        : \"bg-transparent border-gray-200 dark:border-[#333] text-gray-600 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500\"\r\n                                )}\r\n                            >\r\n                                {tag}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Footer Links */}\r\n                <div className=\"flex flex-wrap gap-x-4 gap-y-2 px-2\">\r\n                    <Link href=\"#\" className=\"text-xs text-gray-400 hover:underline\">Terms of Service</Link>\r\n                    <Link href=\"#\" className=\"text-xs text-gray-400 hover:underline\">Privacy Policy</Link>\r\n                    <Link href=\"#\" className=\"text-xs text-gray-400 hover:underline\">Cookie Policy</Link>\r\n                    <Link href=\"#\" className=\"text-xs text-gray-400 hover:underline\">Accessibility</Link>\r\n                    <Link href=\"#\" className=\"text-xs text-gray-400 hover:underline\">Ads Info</Link>\r\n                    <div className=\"text-xs text-gray-400 mt-2 w-full\">Â© 2024 PayLink, Inc.</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div >\r\n)\r\n            }\r\n        </div >\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\layout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useUser' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'supabase' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":13,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useUser } from \"@/context/UserContext\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useEffect } from \"react\";\r\nimport { supabase } from \"@/lib/supabase/client\";\r\n\r\nexport default function AppLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode;\r\n}) {\r\n    const router = useRouter();\r\n\r\n    // Removed strict session check to allow public access to /home\r\n    // Individual protected pages should handle their own redirects if needed.\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-background\">\r\n            {children}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\messages\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\orders\\[id]\\page.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: Identifier expected.","line":7,"column":8}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport {\r\n    CheckCircle2,\r\n        if (user && orderId) {\r\n    fetchOrder();\r\n    fetchMessages();\r\n\r\n    // Subscribe to changes\r\n    const channel = supabase\r\n        .channel(`order-${orderId}`)\r\n        .on('postgres_changes', { event: '*', schema: 'public', table: 'orders', filter: `id=eq.${orderId}` }, (payload) => {\r\n            fetchOrder();\r\n        })\r\n        .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'messages', filter: `order_id=eq.${orderId}` }, (payload) => {\r\n            fetchMessages();\r\n        })\r\n        .subscribe();\r\n\r\n    return () => {\r\n        supabase.removeChannel(channel);\r\n    };\r\n}\r\n    }, [user, orderId]);\r\n\r\nconst fetchOrder = async () => {\r\n    const { data, error } = await supabase\r\n        .from('orders')\r\n        .select(`\r\n                *,\r\n                service:services(*),\r\n                buyer:buyer_id(*),\r\n                seller:seller_id(*)\r\n            `)\r\n        .eq('id', orderId)\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error(\"Error fetching order:\", error);\r\n        // toast(\"Error loading order\", \"error\");\r\n    } else {\r\n        setOrder(data);\r\n    }\r\n    setLoading(false);\r\n};\r\n\r\nconst fetchMessages = async () => {\r\n    // Assuming a messages table exists with order_id\r\n    // If not, we might need to create it or use the existing chat system linked to orders\r\n    // For now, I'll assume a simple query\r\n    /* \r\n    const { data } = await supabase\r\n        .from('messages')\r\n        .select('*')\r\n        .eq('order_id', orderId)\r\n        .order('created_at', { ascending: true });\r\n    if (data) setMessages(data);\r\n    */\r\n    // Mocking messages for now as the table structure isn't fully clear\r\n    setMessages([]);\r\n};\r\n\r\nconst handleSendMessage = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!newMessage.trim()) return;\r\n\r\n    // Insert message logic here\r\n    // await supabase.from('messages').insert(...)\r\n\r\n    setMessages([...messages, {\r\n        id: Date.now(),\r\n        sender_id: user?.id,\r\n        content: newMessage,\r\n        created_at: new Date().toISOString()\r\n    }]);\r\n    setNewMessage(\"\");\r\n};\r\n\r\nconst submitRequirements = async () => {\r\n    if (!requirements.trim()) return;\r\n\r\n    const { error } = await supabase\r\n        .from('orders')\r\n        .update({\r\n            status: 'in_progress',\r\n            requirements_data: { text: requirements },\r\n            started_at: new Date().toISOString()\r\n        })\r\n        .eq('id', orderId);\r\n\r\n    if (error) {\r\n        toast(\"Error submitting requirements\", \"error\");\r\n    } else {\r\n        toast(\"Requirements submitted! Order started.\", \"success\");\r\n        fetchOrder();\r\n    }\r\n};\r\n\r\nconst deliverWork = async () => {\r\n    // Upload file logic would go here\r\n\r\n    const { error } = await supabase\r\n        .from('orders')\r\n        .update({\r\n            status: 'delivered',\r\n            delivered_at: new Date().toISOString()\r\n        })\r\n        .eq('id', orderId);\r\n\r\n    if (error) {\r\n        toast(\"Error delivering work\", \"error\");\r\n    } else {\r\n        toast(\"Work delivered!\", \"success\");\r\n        fetchOrder();\r\n    }\r\n};\r\n\r\nconst acceptDelivery = async () => {\r\n    const { error } = await supabase\r\n        .from('orders')\r\n        .update({\r\n            status: 'completed',\r\n            completed_at: new Date().toISOString()\r\n        })\r\n        .eq('id', orderId);\r\n\r\n    if (error) {\r\n        toast(\"Error accepting delivery\", \"error\");\r\n    } else {\r\n        toast(\"Order completed! Please leave a review.\", \"success\");\r\n        fetchOrder();\r\n    }\r\n};\r\n\r\nconst requestRevision = async () => {\r\n    if (!revisionComment.trim()) return;\r\n\r\n    const { error } = await supabase\r\n        .from('orders')\r\n        .update({\r\n            status: 'revision'\r\n        })\r\n        .eq('id', orderId);\r\n\r\n    // Also insert into order_revisions table\r\n    await supabase.from('order_revisions').insert({\r\n        order_id: orderId,\r\n        requester_id: user?.id,\r\n        comment: revisionComment\r\n    });\r\n\r\n    if (error) {\r\n        toast(\"Error requesting revision\", \"error\");\r\n    } else {\r\n        toast(\"Revision requested.\", \"success\");\r\n        setIsRevisionModalOpen(false);\r\n        fetchOrder();\r\n    }\r\n};\r\n\r\nif (loading) return <div className=\"min-h-screen flex items-center justify-center\"><div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div></div>;\r\nif (!order) return <div className=\"min-h-screen flex items-center justify-center\">Order not found</div>;\r\n\r\nconst isBuyer = user?.id === order.buyer_id;\r\nconst isSeller = user?.id === order.seller_id;\r\nconst otherParty = isBuyer ? order.seller : order.buyer;\r\n\r\nreturn (\r\n    <div className=\"min-h-screen bg-background pb-32\">\r\n        <DisputeModal isOpen={isDisputeOpen} onClose={() => setIsDisputeOpen(false)} orderId={orderId} />\r\n\r\n        {/* Header */}\r\n        <div className=\"bg-card border-b border-border sticky top-0 z-20\">\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <Link href=\"/receipts\" className=\"p-2 hover:bg-muted rounded-full transition-colors\">\r\n                        <AlertCircle className=\"w-5 h-5 rotate-180\" />\r\n                    </Link>\r\n                    <div>\r\n                        <h1 className=\"text-xl font-bold text-foreground\">Order #{order.id.slice(0, 8)}</h1>\r\n                        <p className=\"text-sm text-muted-foreground flex items-center gap-2\">\r\n                            {order.service?.title || \"Custom Order\"}\r\n                            <span className=\"w-1 h-1 bg-muted-foreground rounded-full\" />\r\n                            <span className=\"font-bold text-primary\">${order.amount}</span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className={clsx(\r\n                        \"px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider flex items-center gap-2\",\r\n                        order.status === 'completed' ? \"bg-green-500/10 text-green-500\" :\r\n                            order.status === 'in_progress' ? \"bg-blue-500/10 text-blue-500\" :\r\n                                \"bg-orange-500/10 text-orange-500\"\r\n                    )}>\r\n                        {order.status === 'completed' ? <CheckCircle2 className=\"w-3 h-3\" /> : <Clock className=\"w-3 h-3\" />}\r\n                        {order.status.replace('_', ' ')}\r\n                    </div>\r\n                    <button\r\n                        onClick={() => setIsDisputeOpen(true)}\r\n                        className=\"text-xs font-bold text-muted-foreground hover:text-destructive transition-colors\"\r\n                    >\r\n                        Report Problem\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n            {/* Left Column: Order Context */}\r\n            <div className=\"space-y-6\">\r\n                {/* Status Card */}\r\n                <div className=\"bg-card rounded-3xl p-6 border border-border shadow-sm\">\r\n                    <h2 className=\"text-lg font-bold mb-4\">Order Status</h2>\r\n\r\n                    {/* PENDING REQUIREMENTS */}\r\n                    {order.status === 'pending_requirements' && (\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"bg-orange-500/10 text-orange-600 p-4 rounded-2xl flex gap-3\">\r\n                                <AlertCircle className=\"w-5 h-5 shrink-0\" />\r\n                                <p className=\"text-sm font-medium\">\r\n                                    {isBuyer ? \"Please submit the requirements to start the order.\" : \"Waiting for buyer to submit requirements.\"}\r\n                                </p>\r\n                            </div>\r\n                            {isBuyer && (\r\n                                <div className=\"space-y-3\">\r\n                                    <label className=\"text-sm font-bold\">Requirements</label>\r\n                                    <textarea\r\n                                        value={requirements}\r\n                                        onChange={(e) => setRequirements(e.target.value)}\r\n                                        className=\"w-full bg-muted/30 rounded-xl p-3 min-h-[100px] text-sm\"\r\n                                        placeholder=\"Describe what you need...\"\r\n                                    />\r\n                                    <button\r\n                                        onClick={submitRequirements}\r\n                                        className=\"w-full py-2 bg-primary text-primary-foreground rounded-xl font-bold text-sm\"\r\n                                    >\r\n                                        Start Order\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* IN PROGRESS */}\r\n                    {order.status === 'in_progress' && (\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"bg-blue-500/10 text-blue-600 p-4 rounded-2xl flex gap-3\">\r\n                                <Clock className=\"w-5 h-5 shrink-0\" />\r\n                                <p className=\"text-sm font-medium\">\r\n                                    Order is in progress. Expected delivery: {new Date(Date.now() + 86400000 * 3).toLocaleDateString()}\r\n                                </p>\r\n                            </div>\r\n                            {isSeller && (\r\n                                <div className=\"space-y-3\">\r\n                                    <button\r\n                                        onClick={deliverWork}\r\n                                        className=\"w-full py-3 bg-primary text-primary-foreground rounded-xl font-bold text-sm flex items-center justify-center gap-2\"\r\n                                    >\r\n                                        <Upload className=\"w-4 h-4\" />\r\n                                        Deliver Work\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* DELIVERED */}\r\n                    {order.status === 'delivered' && (\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"bg-purple-500/10 text-purple-600 p-4 rounded-2xl flex gap-3\">\r\n                                <CheckCircle2 className=\"w-5 h-5 shrink-0\" />\r\n                                <p className=\"text-sm font-medium\">\r\n                                    {isSeller ? \"Work delivered! Waiting for buyer approval.\" : \"Seller has delivered the work. Please review.\"}\r\n                                </p>\r\n                            </div>\r\n                            {isBuyer && (\r\n                                <div className=\"grid grid-cols-2 gap-3\">\r\n                                    <button\r\n                                        onClick={() => setIsRevisionModalOpen(true)}\r\n                                        className=\"py-2 bg-muted text-foreground rounded-xl font-bold text-sm hover:bg-muted/80\"\r\n                                    >\r\n                                        Request Revision\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={acceptDelivery}\r\n                                        className=\"py-2 bg-green-500 text-white rounded-xl font-bold text-sm hover:bg-green-600\"\r\n                                    >\r\n                                        Accept & Complete\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* COMPLETED */}\r\n                    {order.status === 'completed' && (\r\n                        <div className=\"bg-green-500/10 text-green-600 p-4 rounded-2xl flex gap-3\">\r\n                            <Check className=\"w-5 h-5 shrink-0\" />\r\n                            <p className=\"text-sm font-medium\">\r\n                                Order completed! Funds have been released.\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Requirements Data Display */}\r\n                {order.requirements_data && (\r\n                    <div className=\"bg-card rounded-3xl p-6 border border-border shadow-sm\">\r\n                        <h3 className=\"font-bold mb-3 flex items-center gap-2\">\r\n                            <FileText className=\"w-4 h-4\" />\r\n                            Requirements\r\n                        </h3>\r\n                        <p className=\"text-sm text-muted-foreground bg-muted/30 p-4 rounded-xl\">\r\n                            {order.requirements_data.text}\r\n                        </p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Right Column: Chat/Activity */}\r\n            <div className=\"lg:col-span-2 bg-card rounded-3xl border border-border shadow-sm flex flex-col h-[600px] overflow-hidden\">\r\n                <div className=\"p-4 border-b border-border bg-muted/10 flex items-center gap-3\">\r\n                    <div className=\"w-10 h-10 rounded-full bg-muted flex items-center justify-center overflow-hidden\">\r\n                        {otherParty?.avatar_url ? (\r\n                            <img src={otherParty.avatar_url} alt=\"\" className=\"w-full h-full object-cover\" />\r\n                        ) : (\r\n                            <div className=\"font-bold text-muted-foreground\">{otherParty?.full_name?.[0]}</div>\r\n                        )}\r\n                    </div>\r\n                    <div>\r\n                        <div className=\"font-bold text-foreground\">{otherParty?.full_name}</div>\r\n                        <div className=\"text-xs text-muted-foreground\">@{otherParty?.username}</div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n                    {/* System Message */}\r\n                    <div className=\"flex justify-center\">\r\n                        <div className=\"bg-muted/50 text-muted-foreground text-xs px-3 py-1 rounded-full\">\r\n                            Order started {new Date(order.created_at).toLocaleDateString()}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {messages.map((msg) => (\r\n                        <div key={msg.id} className={clsx(\"flex gap-3\", msg.sender_id === user?.id ? \"flex-row-reverse\" : \"\")}>\r\n                            <div className={clsx(\r\n                                \"p-3 rounded-2xl max-w-[80%] text-sm\",\r\n                                msg.sender_id === user?.id\r\n                                    ? \"bg-primary text-primary-foreground rounded-tr-none\"\r\n                                    : \"bg-muted text-foreground rounded-tl-none\"\r\n                            )}>\r\n                                {msg.content}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                    <div ref={messagesEndRef} />\r\n                </div>\r\n\r\n                <div className=\"p-4 border-t border-border bg-background\">\r\n                    <form onSubmit={handleSendMessage} className=\"flex gap-2\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={newMessage}\r\n                            onChange={(e) => setNewMessage(e.target.value)}\r\n                            placeholder=\"Type a message...\"\r\n                            className=\"flex-1 bg-muted/30 border-none rounded-xl px-4 focus:ring-2 focus:ring-primary/20\"\r\n                        />\r\n                        <button type=\"submit\" className=\"p-3 bg-primary text-primary-foreground rounded-xl hover:bg-primary/90 transition-colors\">\r\n                            <Send className=\"w-5 h-5\" />\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        {/* Revision Modal */}\r\n        {isRevisionModalOpen && (\r\n            <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\">\r\n                <div className=\"bg-card w-full max-w-md rounded-3xl p-6 shadow-2xl animate-in zoom-in-95\">\r\n                    <h3 className=\"text-xl font-bold mb-4\">Request Revision</h3>\r\n                    <textarea\r\n                        value={revisionComment}\r\n                        onChange={(e) => setRevisionComment(e.target.value)}\r\n                        className=\"w-full bg-muted/30 rounded-xl p-3 min-h-[120px] mb-4\"\r\n                        placeholder=\"What needs to be changed?\"\r\n                    />\r\n                    <div className=\"flex gap-3\">\r\n                        <button\r\n                            onClick={() => setIsRevisionModalOpen(false)}\r\n                            className=\"flex-1 py-3 bg-muted rounded-xl font-bold\"\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            onClick={requestRevision}\r\n                            className=\"flex-1 py-3 bg-primary text-primary-foreground rounded-xl font-bold\"\r\n                        >\r\n                            Submit Request\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )}\r\n    </div>\r\n);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\project\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\qr\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\receipts\\page.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":166,"column":49,"nodeType":"JSXOpeningElement","endLine":166,"endColumn":131}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[823,826],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[823,826],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loading' is assigned a value but never used.","line":20,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Search, Package, Clock, CheckCircle2, AlertCircle, DollarSign, Copy, Plus, ArrowLeft } from \"lucide-react\";\r\nimport clsx from \"clsx\";\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { supabase } from \"@/lib/supabase/client\";\r\nimport { useUser } from \"@/context/UserContext\";\r\nimport { useToast } from \"@/context/ToastContext\";\r\n\r\nexport default function OrdersPage() {\r\n    const { user } = useUser();\r\n    const { toast } = useToast();\r\n    const [activeTab, setActiveTab] = useState<\"active\" | \"history\">(\"active\");\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [invoices, setInvoices] = useState<any[]>([]);\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const fetchInvoices = useCallback(async () => {\r\n        if (!user) return;\r\n\r\n        const { data } = await supabase\r\n            .from('invoices')\r\n            .select('*')\r\n            .eq('seller_id', user.id)\r\n            .order('created_at', { ascending: false });\r\n\r\n        if (data) {\r\n            setInvoices(data);\r\n        }\r\n        setLoading(false);\r\n    }, [user]);\r\n\r\n    useEffect(() => {\r\n        // Use setTimeout to avoid \"synchronous setState\" lint warning, though function is async\r\n        const timer = setTimeout(() => {\r\n            fetchInvoices();\r\n        }, 0);\r\n        return () => clearTimeout(timer);\r\n    }, [fetchInvoices]);\r\n\r\n    const deleteInvoice = async (id: string) => {\r\n        if (!confirm(\"Are you sure you want to delete this invoice? This action cannot be undone.\")) return;\r\n\r\n        const { error } = await supabase\r\n            .from('invoices')\r\n            .delete()\r\n            .eq('id', id);\r\n\r\n        if (error) {\r\n            toast(\"Error deleting invoice\", \"error\");\r\n        } else {\r\n            toast(\"Invoice deleted\", \"success\");\r\n            setInvoices(invoices.filter(inv => inv.id !== id));\r\n        }\r\n    };\r\n\r\n    const copyLink = (id: string) => {\r\n        const link = `${window.location.origin}/pay/${id}`;\r\n        navigator.clipboard.writeText(link);\r\n        toast(\"PayLink copied to clipboard!\", \"success\");\r\n    };\r\n\r\n    const activeInvoices = invoices.filter(inv => inv.status === 'pending');\r\n    const historyInvoices = invoices.filter(inv => inv.status !== 'pending');\r\n\r\n    const filteredActive = activeInvoices.filter(tx =>\r\n        (tx.description || \"\").toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        tx.id.toLowerCase().includes(searchQuery.toLowerCase())\r\n    );\r\n\r\n    const filteredHistory = historyInvoices.filter(tx =>\r\n        (tx.description || \"\").toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        tx.id.toLowerCase().includes(searchQuery.toLowerCase())\r\n    );\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-background pb-32 p-4 md:p-8 max-w-5xl mx-auto\">\r\n            {/* Minimal Header */}\r\n            <div className=\"sticky top-0 z-20 bg-background/80 backdrop-blur-md -mx-4 px-4 py-4 mb-6 flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <Link href=\"/home\" className=\"p-2 -ml-2 rounded-full hover:bg-muted transition-colors\">\r\n                        <ArrowLeft className=\"w-6 h-6 text-foreground\" />\r\n                    </Link>\r\n                    <h1 className=\"text-2xl font-black text-foreground tracking-tight\">Orders</h1>\r\n                </div>\r\n                <div className=\"w-10\" /> {/* Spacer */}\r\n            </div>\r\n\r\n            {/* Summary Bubbles (Horizontal Scroll) */}\r\n            <div className=\"flex gap-4 overflow-x-auto pb-4 -mx-4 px-4 mb-8 custom-scrollbar snap-x\">\r\n                <div className=\"min-w-[160px] p-5 bg-muted/30 rounded-[2rem] snap-start\">\r\n                    <div className=\"flex items-center gap-2 mb-3 text-green-500\">\r\n                        <div className=\"p-2 bg-green-500/10 rounded-full\">\r\n                            <DollarSign className=\"w-4 h-4\" />\r\n                        </div>\r\n                        <span className=\"text-xs font-bold uppercase tracking-wider\">Revenue</span>\r\n                    </div>\r\n                    <div className=\"text-2xl font-black text-foreground\">\r\n                        ${invoices.filter(i => i.status === 'paid').reduce((acc, curr) => acc + curr.amount, 0).toFixed(0)}\r\n                    </div>\r\n                </div>\r\n                <div className=\"min-w-[160px] p-5 bg-muted/30 rounded-[2rem] snap-start\">\r\n                    <div className=\"flex items-center gap-2 mb-3 text-blue-500\">\r\n                        <div className=\"p-2 bg-blue-500/10 rounded-full\">\r\n                            <Package className=\"w-4 h-4\" />\r\n                        </div>\r\n                        <span className=\"text-xs font-bold uppercase tracking-wider\">Active</span>\r\n                    </div>\r\n                    <div className=\"text-2xl font-black text-foreground\">{activeInvoices.length}</div>\r\n                </div>\r\n                <div className=\"min-w-[160px] p-5 bg-muted/30 rounded-[2rem] snap-start\">\r\n                    <div className=\"flex items-center gap-2 mb-3 text-purple-500\">\r\n                        <div className=\"p-2 bg-purple-500/10 rounded-full\">\r\n                            <CheckCircle2 className=\"w-4 h-4\" />\r\n                        </div>\r\n                        <span className=\"text-xs font-bold uppercase tracking-wider\">Completed</span>\r\n                    </div>\r\n                    <div className=\"text-2xl font-black text-foreground\">{historyInvoices.filter(i => i.status === 'paid').length}</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Tabs */}\r\n            <div className=\"flex p-1 bg-muted/30 rounded-full mb-8 w-fit\">\r\n                <button\r\n                    onClick={() => setActiveTab(\"active\")}\r\n                    className={clsx(\r\n                        \"px-6 py-2 rounded-full text-sm font-bold transition-all\",\r\n                        activeTab === \"active\" ? \"bg-background shadow-sm text-foreground\" : \"text-muted-foreground hover:text-foreground\"\r\n                    )}\r\n                >\r\n                    Active\r\n                </button>\r\n                <button\r\n                    onClick={() => setActiveTab(\"history\")}\r\n                    className={clsx(\r\n                        \"px-6 py-2 rounded-full text-sm font-bold transition-all\",\r\n                        activeTab === \"history\" ? \"bg-background shadow-sm text-foreground\" : \"text-muted-foreground hover:text-foreground\"\r\n                    )}\r\n                >\r\n                    History\r\n                </button>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <AnimatePresence mode=\"wait\">\r\n                {activeTab === \"active\" ? (\r\n                    <motion.div\r\n                        key=\"active\"\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        exit={{ opacity: 0, y: -10 }}\r\n                        transition={{ duration: 0.2 }}\r\n                        className=\"space-y-4\"\r\n                    >\r\n                        {filteredActive.length > 0 ? (\r\n                            filteredActive.map((invoice) => (\r\n                                <div key={invoice.id} className=\"bg-muted/30 rounded-[2rem] p-5 animate-in slide-in-from-bottom-2\">\r\n                                    <div className=\"flex gap-4\">\r\n                                        {/* Image Bubble */}\r\n                                        <div className=\"w-16 h-16 bg-background rounded-2xl overflow-hidden shrink-0 shadow-sm flex items-center justify-center\">\r\n                                            {invoice.items && invoice.items[0]?.image ? (\r\n                                                <img src={invoice.items[0].image} alt=\"\" className=\"w-full h-full object-cover\" />\r\n                                            ) : (\r\n                                                <Package className=\"w-6 h-6 text-muted-foreground/50\" />\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <div className=\"flex items-center justify-between mb-1\">\r\n                                                <span className=\"text-[10px] font-bold uppercase tracking-wider text-orange-500 bg-orange-500/10 px-2 py-0.5 rounded-full\">\r\n                                                    Pending\r\n                                                </span>\r\n                                                <span className=\"text-xs font-bold text-muted-foreground\">#{invoice.id.slice(0, 4)}</span>\r\n                                            </div>\r\n                                            <h3 className=\"font-bold text-lg text-foreground truncate\">{invoice.description || \"Untitled\"}</h3>\r\n                                            <div className=\"text-xl font-black text-foreground mt-0.5\">${invoice.amount.toFixed(2)}</div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"mt-4 flex gap-2\">\r\n                                        <button\r\n                                            onClick={() => copyLink(invoice.id)}\r\n                                            className=\"flex-1 py-3 bg-background rounded-xl font-bold text-sm hover:bg-muted transition-colors flex items-center justify-center gap-2 shadow-sm\"\r\n                                        >\r\n                                            <Copy className=\"w-4 h-4\" />\r\n                                            Copy Link\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => deleteInvoice(invoice.id)}\r\n                                            className=\"p-3 bg-red-500/10 text-red-500 rounded-xl hover:bg-red-500/20 transition-colors\"\r\n                                        >\r\n                                            <AlertCircle className=\"w-4 h-4\" />\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        ) : (\r\n                            <div className=\"text-center py-20 space-y-4 opacity-50\">\r\n                                <Package className=\"w-12 h-12 mx-auto text-muted-foreground\" />\r\n                                <p className=\"font-bold text-muted-foreground\">No active orders</p>\r\n                            </div>\r\n                        )}\r\n                    </motion.div>\r\n                ) : (\r\n                    <motion.div\r\n                        key=\"history\"\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        exit={{ opacity: 0, y: -10 }}\r\n                        transition={{ duration: 0.2 }}\r\n                        className=\"space-y-3\"\r\n                    >\r\n                        {/* Search Bubble */}\r\n                        <div className=\"bg-muted/30 rounded-2xl px-4 py-3 flex items-center gap-3 mb-6 focus-within:ring-2 focus-within:ring-primary/20 transition-all\">\r\n                            <Search className=\"w-5 h-5 text-muted-foreground\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                value={searchQuery}\r\n                                onChange={(e) => setSearchQuery(e.target.value)}\r\n                                placeholder=\"Search history...\"\r\n                                className=\"bg-transparent border-none focus:ring-0 p-0 w-full font-medium placeholder:text-muted-foreground/50\"\r\n                            />\r\n                        </div>\r\n\r\n                        {filteredHistory.length > 0 ? (\r\n                            filteredHistory.map((tx) => (\r\n                                <div key={tx.id} className=\"bg-muted/30 rounded-3xl p-4 flex items-center gap-4 animate-in slide-in-from-bottom-2\">\r\n                                    <div className={clsx(\r\n                                        \"w-12 h-12 rounded-2xl flex items-center justify-center shrink-0\",\r\n                                        tx.status === 'paid' ? \"bg-green-500/10 text-green-500\" : \"bg-gray-500/10 text-gray-500\"\r\n                                    )}>\r\n                                        {tx.status === 'paid' ? <CheckCircle2 className=\"w-6 h-6\" /> : <Clock className=\"w-6 h-6\" />}\r\n                                    </div>\r\n                                    <div className=\"flex-1 min-w-0\">\r\n                                        <div className=\"font-bold text-foreground truncate\">{tx.description || \"Untitled\"}</div>\r\n                                        <div className=\"text-xs text-muted-foreground font-medium\">{new Date(tx.created_at).toLocaleDateString()}</div>\r\n                                    </div>\r\n                                    <div className=\"text-right\">\r\n                                        <div className=\"font-black text-foreground\">${tx.amount.toFixed(2)}</div>\r\n                                        <div className={clsx(\r\n                                            \"text-[10px] font-bold uppercase tracking-wider\",\r\n                                            tx.status === 'paid' ? \"text-green-500\" : \"text-muted-foreground\"\r\n                                        )}>\r\n                                            {tx.status}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        ) : (\r\n                            <div className=\"text-center py-20 space-y-4 opacity-50\">\r\n                                <Clock className=\"w-12 h-12 mx-auto text-muted-foreground\" />\r\n                                <p className=\"font-bold text-muted-foreground\">No history found</p>\r\n                            </div>\r\n                        )}\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Floating Action Button */}\r\n            <div className=\"fixed bottom-8 left-0 right-0 px-6 flex justify-center z-20 pointer-events-none\">\r\n                <Link\r\n                    href=\"/create/invoice\"\r\n                    className=\"pointer-events-auto px-6 py-4 bg-primary text-primary-foreground rounded-full font-black text-lg shadow-xl shadow-primary/30 hover:scale-105 active:scale-95 transition-all flex items-center gap-2\"\r\n                >\r\n                    <Plus className=\"w-6 h-6\" />\r\n                    New PayLink\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\settings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\(app)\\shop\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\[username]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[859,862],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[859,862],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[929,932],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[929,932],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1287,1290],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1287,1290],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1405,1408],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1405,1408],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchProfile` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\[username]\\page.tsx:48:9\n  46 |\n  47 |     useEffect(() => {\n> 48 |         fetchProfile();\n     |         ^^^^^^^^^^^^ `fetchProfile` accessed before it is declared\n  49 |     }, [username]);\n  50 |\n  51 |     useEffect(() => {\n\nC:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\[username]\\page.tsx:57:5\n  55 |     }, [profile, currentUser]); // Re-fetch if user changes (login/logout)\n  56 |\n> 57 |     const fetchProfile = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 58 |         setLoading(true);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 59 |         // 1. Fetch Profile\n     â€¦\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 81 |         setLoading(false);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 82 |     };\n     | ^^^^^^^ `fetchProfile` is declared here\n  83 |\n  84 |     const fetchStats = async () => {\n  85 |         if (!profile) return;","line":48,"column":9,"nodeType":null,"endLine":48,"endColumn":21},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchProfile'. Either include it or remove the dependency array.","line":49,"column":8,"nodeType":"ArrayExpression","endLine":49,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [fetchProfile, username]","fix":{"range":[2028,2038],"text":"[fetchProfile, username]"}}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchStats` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\[username]\\page.tsx:53:13\n  51 |     useEffect(() => {\n  52 |         if (profile) {\n> 53 |             fetchStats();\n     |             ^^^^^^^^^^ `fetchStats` accessed before it is declared\n  54 |         }\n  55 |     }, [profile, currentUser]); // Re-fetch if user changes (login/logout)\n  56 |\n\nC:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\[username]\\page.tsx:84:5\n  82 |     };\n  83 |\n> 84 |     const fetchStats = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 85 |         if (!profile) return;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 86 |\n     â€¦\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 94 |         }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 95 |     };\n     | ^^^^^^^ `fetchStats` is declared here\n  96 |\n  97 |     const handleFollowToggle = async () => {\n  98 |         if (!currentUser) {","line":53,"column":13,"nodeType":null,"endLine":53,"endColumn":23},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchStats'. Either include it or remove the dependency array.","line":55,"column":8,"nodeType":"ArrayExpression","endLine":55,"endColumn":30,"suggestions":[{"desc":"Update the dependencies array to be: [profile, currentUser, fetchStats]","fix":{"range":[2136,2158],"text":"[profile, currentUser, fetchStats]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is assigned a value but never used.","line":88,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":88,"endColumn":28},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":368,"column":55,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[20185,20305],"text":"\r\n                                        This user hasn&apos;t added any projects yet.\r\n                                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[20185,20305],"text":"\r\n                                        This user hasn&lsquo;t added any projects yet.\r\n                                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[20185,20305],"text":"\r\n                                        This user hasn&#39;t added any projects yet.\r\n                                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[20185,20305],"text":"\r\n                                        This user hasn&rsquo;t added any projects yet.\r\n                                    "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":426,"column":51,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[24769,24882],"text":"\r\n                                    This user hasn&apos;t listed any products yet.\r\n                                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[24769,24882],"text":"\r\n                                    This user hasn&lsquo;t listed any products yet.\r\n                                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[24769,24882],"text":"\r\n                                    This user hasn&#39;t listed any products yet.\r\n                                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[24769,24882],"text":"\r\n                                    This user hasn&rsquo;t listed any products yet.\r\n                                "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":157,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":157,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5555,5558],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5555,5558],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":157,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":157,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5566,5569],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5566,5569],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":374,"column":99,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":374,"endColumn":102,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20608,20611],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20608,20611],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":382,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":382,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21292,21295],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21292,21295],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":8,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, use } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { supabase } from \"@/lib/supabase/client\";\r\nimport { useUser } from \"@/context/UserContext\";\r\nimport { MapPin, Twitter, Instagram, Twitch, Grid as GridIcon, ShoppingBag, Heart, UserPlus, UserCheck, MessageCircle } from \"lucide-react\";\r\nimport clsx from \"clsx\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { PostModal } from \"@/components/features/PostModal\";\r\nimport { useToast } from \"@/context/ToastContext\";\r\n\r\nexport default function PublicProfilePage({ params }: { params: Promise<{ username: string }> }) {\r\n    const { username } = use(params);\r\n    const router = useRouter();\r\n    const { user: currentUser } = useUser();\r\n    const { toast } = useToast();\r\n    const [profile, setProfile] = useState<any>(null);\r\n    const [portfolioItems, setPortfolioItems] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [isFollowing, setIsFollowing] = useState(false);\r\n    const [activeTab, setActiveTab] = useState(\"POSTS\");\r\n\r\n    const [stats, setStats] = useState({ followers: 0, following: 0, is_following: false });\r\n\r\n    // Post Modal State\r\n    const [selectedPost, setSelectedPost] = useState<any>(null);\r\n    const [isPostModalOpen, setIsPostModalOpen] = useState(false);\r\n\r\n    const handlePostClick = (post: any) => {\r\n        // Inject profile data since we know the post belongs to this profile\r\n        const postWithUser = {\r\n            ...post,\r\n            user: {\r\n                name: profile.full_name,\r\n                username: profile.username,\r\n                avatar: profile.avatar_url,\r\n                verification_status: profile.verification_status\r\n            },\r\n            profiles: profile // Fallback for some components that might look for profiles\r\n        };\r\n        setSelectedPost(postWithUser);\r\n        setIsPostModalOpen(true);\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchProfile();\r\n    }, [username]);\r\n\r\n    useEffect(() => {\r\n        if (profile) {\r\n            fetchStats();\r\n        }\r\n    }, [profile, currentUser]); // Re-fetch if user changes (login/logout)\r\n\r\n    const fetchProfile = async () => {\r\n        setLoading(true);\r\n        // 1. Fetch Profile\r\n        const { data: profileData, error: profileError } = await supabase\r\n            .from('profiles')\r\n            .select('*')\r\n            .eq('username', username)\r\n            .single();\r\n\r\n        if (profileError || !profileData) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        setProfile(profileData);\r\n\r\n        // 2. Fetch Portfolio\r\n        const { data: portfolioData } = await supabase\r\n            .from('portfolio_items')\r\n            .select('*')\r\n            .eq('user_id', profileData.id)\r\n            .order('created_at', { ascending: false });\r\n\r\n        if (portfolioData) setPortfolioItems(portfolioData);\r\n        setLoading(false);\r\n    };\r\n\r\n    const fetchStats = async () => {\r\n        if (!profile) return;\r\n\r\n        // Use the RPC function we created\r\n        const { data, error } = await supabase\r\n            .rpc('get_profile_stats', { target_user_id: profile.id });\r\n\r\n        if (data) {\r\n            setStats(data);\r\n            setIsFollowing(data.is_following);\r\n        }\r\n    };\r\n\r\n    const handleFollowToggle = async () => {\r\n        if (!currentUser) {\r\n            // Redirect to login or show auth modal\r\n            toast(\"Please login to follow users.\", \"error\");\r\n            return;\r\n        }\r\n\r\n        if (isFollowing) {\r\n            // Unfollow\r\n            const { error } = await supabase\r\n                .from('follows')\r\n                .delete()\r\n                .eq('follower_id', currentUser.id)\r\n                .eq('following_id', profile.id);\r\n\r\n            if (!error) {\r\n                setIsFollowing(false);\r\n                setStats(prev => ({ ...prev, followers: prev.followers - 1 }));\r\n            }\r\n        } else {\r\n            // Follow\r\n            const { error } = await supabase\r\n                .from('follows')\r\n                .insert({\r\n                    follower_id: currentUser.id,\r\n                    following_id: profile.id\r\n                });\r\n\r\n            if (!error) {\r\n                setIsFollowing(true);\r\n                setStats(prev => ({ ...prev, followers: prev.followers + 1 }));\r\n            }\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen bg-background flex items-center justify-center\">\r\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!profile) {\r\n        return (\r\n            <div className=\"min-h-screen bg-background flex flex-col items-center justify-center p-4 text-center\">\r\n                <h1 className=\"text-2xl font-bold mb-2\">User not found</h1>\r\n                <p className=\"text-muted-foreground mb-4\">The user @{username} does not exist.</p>\r\n                <Link href=\"/home\" className=\"px-6 py-2 bg-primary text-primary-foreground rounded-full font-bold\">\r\n                    Go Home\r\n                </Link>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const accentColor = profile.accent_color || \"#3b82f6\";\r\n    const isOwner = currentUser?.id === profile.id;\r\n\r\n    // Group portfolio items by section\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const portfolioSections = portfolioItems.reduce((acc: any, item: any) => {\r\n        const section = item.section || 'General';\r\n        if (!acc[section]) acc[section] = [];\r\n        acc[section].push(item);\r\n        return acc;\r\n    }, {});\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-background pb-32\">\r\n            <PostModal\r\n                isOpen={isPostModalOpen}\r\n                onClose={() => setIsPostModalOpen(false)}\r\n                post={selectedPost}\r\n                onUpdate={(updatedPost) => {\r\n                    setPortfolioItems(prev => prev.map(item => item.id === updatedPost.id ? { ...item, ...updatedPost } : item));\r\n                }}\r\n            />\r\n            {/* Profile Header */}\r\n            <div className=\"relative group pb-4\">\r\n                {/* Banner */}\r\n                <div className=\"h-64 md:h-96 w-full relative overflow-hidden\">\r\n                    {profile.banner_url ? (\r\n                        <div className=\"absolute inset-0\">\r\n                            <Image src={profile.banner_url} alt=\"Profile Banner\" fill className=\"object-cover\" priority />\r\n                            <div className=\"absolute inset-0 dark:bg-black/20\" />\r\n                            <div className=\"absolute inset-0 bg-gradient-to-t from-background via-background/40 to-transparent\" />\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            <div className=\"absolute inset-0 bg-gradient-to-b from-muted via-muted/50 to-background\" />\r\n                            <div className=\"absolute inset-0 flex items-center justify-center text-muted-foreground/20 font-bold text-4xl uppercase tracking-widest\">\r\n                                No Banner\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 -mt-32 md:-mt-40\">\r\n                    <div className=\"flex flex-col md:flex-row items-center md:items-end gap-6 md:gap-10\">\r\n                        {/* Avatar */}\r\n                        <div className=\"relative shrink-0 mx-auto md:mx-0\">\r\n                            <div className=\"w-40 h-40 md:w-56 md:h-56 rounded-[2.5rem] p-1.5 bg-background shadow-2xl shadow-black/20\">\r\n                                <div className=\"w-full h-full rounded-[2rem] bg-muted overflow-hidden relative border border-border\">\r\n                                    {profile.avatar_url ? (\r\n                                        <Image src={profile.avatar_url} alt=\"Avatar\" fill className=\"object-cover\" priority />\r\n                                    ) : (\r\n                                        <div\r\n                                            className=\"w-full h-full flex items-center justify-center text-white text-6xl md:text-7xl font-black italic tracking-tighter\"\r\n                                            style={{ background: `linear-gradient(to bottom right, ${accentColor}, #000)` }}\r\n                                        >\r\n                                            {profile.full_name ? profile.full_name.substring(0, 2).toUpperCase() : \"??\"}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Profile Info */}\r\n                        <div className=\"flex-1 flex flex-col md:flex-row items-center md:items-end justify-between gap-6 w-full text-center md:text-left pb-4 min-w-0\">\r\n                            <div className=\"space-y-4 flex-1 w-full min-w-0\">\r\n                                <div>\r\n                                    <h1 className=\"text-4xl md:text-6xl font-black text-foreground tracking-tight leading-none mb-2 flex items-center justify-center md:justify-start gap-3\">\r\n                                        {profile.full_name || \"No Name\"}\r\n                                        {/* Verified Badge Logic: Rating > 4.5 AND Commissions > 10 */}\r\n                                        {(profile.seller_rating > 4.5 && profile.completed_commissions > 10) && (\r\n                                            <div className=\"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center shrink-0\" title=\"Verified Creator\">\r\n                                                <UserCheck className=\"w-5 h-5 text-white\" />\r\n                                            </div>\r\n                                        )}\r\n                                    </h1>\r\n                                    <div className=\"flex flex-wrap items-center justify-center md:justify-start gap-3 text-muted-foreground font-medium text-lg\">\r\n                                        <span className=\"text-foreground\">@{profile.username}</span>\r\n                                        {profile.location && (\r\n                                            <>\r\n                                                <span className=\"hidden md:inline\">â€¢</span>\r\n                                                <span className=\"flex items-center gap-1\">\r\n                                                    <MapPin className=\"w-4 h-4\" />\r\n                                                    {profile.location}\r\n                                                </span>\r\n                                            </>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {/* Stats */}\r\n                                    <div className=\"flex items-center justify-center md:justify-start gap-6 mt-2 text-sm font-medium\">\r\n                                        <div className=\"flex items-center gap-1\">\r\n                                            <span className=\"text-foreground font-bold\">{stats.followers}</span>\r\n                                            <span className=\"text-muted-foreground\">Followers</span>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-1\">\r\n                                            <span className=\"text-foreground font-bold\">{stats.following}</span>\r\n                                            <span className=\"text-muted-foreground\">Following</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <p className=\"text-lg md:text-xl text-muted-foreground max-w-2xl leading-relaxed font-medium\">\r\n                                    {profile.bio || \"No bio information provided.\"}\r\n                                </p>\r\n\r\n                                {/* Social Pills */}\r\n                                <div className=\"flex flex-col md:flex-row items-center gap-4 pt-2\">\r\n                                    <div className=\"flex flex-wrap items-center justify-center md:justify-start gap-3\">\r\n                                        {profile.social_links?.twitter && (\r\n                                            <a href={`https://twitter.com/${profile.social_links.twitter}`} target=\"_blank\" className=\"px-4 py-2 bg-muted/40 border border-border/50 rounded-xl hover:border-blue-400/50 hover:bg-blue-400/10 hover:text-[#1DA1F2] text-muted-foreground hover:scale-105 transition-all flex items-center gap-2 font-bold text-sm\">\r\n                                                <Twitter className=\"w-4 h-4\" fill=\"currentColor\" />\r\n                                                Twitter\r\n                                            </a>\r\n                                        )}\r\n                                        {profile.social_links?.instagram && (\r\n                                            <a href={`https://instagram.com/${profile.social_links.instagram}`} target=\"_blank\" className=\"px-4 py-2 bg-muted/40 border border-border/50 rounded-xl hover:border-pink-500/50 hover:bg-pink-500/10 hover:text-[#E1306C] text-muted-foreground hover:scale-105 transition-all flex items-center gap-2 font-bold text-sm\">\r\n                                                <Instagram className=\"w-4 h-4\" />\r\n                                                Instagram\r\n                                            </a>\r\n                                        )}\r\n                                        {profile.social_links?.twitch && (\r\n                                            <a href={`https://twitch.tv/${profile.social_links.twitch}`} target=\"_blank\" className=\"px-4 py-2 bg-muted/40 border border-border/50 rounded-xl hover:border-purple-500/50 hover:bg-purple-500/10 hover:text-[#9146FF] text-muted-foreground hover:scale-105 transition-all flex items-center gap-2 font-bold text-sm\">\r\n                                                <Twitch className=\"w-4 h-4\" fill=\"currentColor\" />\r\n                                                Twitch\r\n                                            </a>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n\r\n\r\n                                {/* Actions */}\r\n                                {!isOwner && (\r\n                                    <div className=\"flex items-center justify-center md:justify-start gap-3 pt-2\">\r\n                                        <button\r\n                                            onClick={handleFollowToggle}\r\n                                            className={clsx(\r\n                                                \"px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition-all shadow-lg active:scale-95\",\r\n                                                isFollowing\r\n                                                    ? \"bg-card border border-border text-foreground hover:bg-muted\"\r\n                                                    : \"bg-primary text-primary-foreground hover:opacity-90\"\r\n                                            )}\r\n                                        >\r\n                                            {isFollowing ? (\r\n                                                <>\r\n                                                    <UserCheck className=\"w-5 h-5\" />\r\n                                                    Following\r\n                                                </>\r\n                                            ) : (\r\n                                                <>\r\n                                                    <UserPlus className=\"w-5 h-5\" />\r\n                                                    Follow\r\n                                                </>\r\n                                            )}\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => {\r\n                                                if (!currentUser) {\r\n                                                    toast(\"Make an account to message\", \"error\");\r\n                                                    return;\r\n                                                }\r\n                                                router.push(`/messages?chat_with=${profile.id}`);\r\n                                            }}\r\n                                            className=\"px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition-all shadow-lg active:scale-95 bg-card border border-border text-foreground hover:bg-muted\"\r\n                                        >\r\n                                            <MessageCircle className=\"w-5 h-5\" />\r\n                                            Message\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Actions */}\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Navigation Tabs */}\r\n                    <div className=\"mt-12 border-b border-border\">\r\n                        <div className=\"flex gap-8 overflow-x-auto max-w-full pb-px no-scrollbar justify-start\">\r\n                            {[\"POSTS\", \"SHOP\"].map((tab) => (\r\n                                <button\r\n                                    key={tab}\r\n                                    onClick={() => setActiveTab(tab)}\r\n                                    className={clsx(\r\n                                        \"py-3 md:py-4 px-4 md:px-6 text-xs md:text-sm font-black tracking-widest border-b-[3px] transition-all flex items-center gap-2 uppercase\",\r\n                                        activeTab === tab\r\n                                            ? \"text-foreground\"\r\n                                            : \"border-transparent text-muted-foreground hover:text-foreground\"\r\n                                    )}\r\n                                    style={{\r\n                                        borderColor: activeTab === tab ? accentColor : \"transparent\",\r\n                                        color: activeTab === tab ? accentColor : undefined\r\n                                    }}\r\n                                >\r\n                                    {tab === \"POSTS\" && <GridIcon className=\"w-4 h-4\" />}\r\n                                    {tab === \"SHOP\" && <ShoppingBag className=\"w-4 h-4\" />}\r\n                                    {tab}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content Area */}\r\n            <div className=\"max-w-7xl mx-auto mt-2 pb-20\">\r\n                {activeTab === \"POSTS\" && (\r\n                    <div className=\"p-4 md:p-6 animate-in fade-in slide-in-from-bottom-4 duration-500 space-y-8\">\r\n                        {portfolioItems.length === 0 ? (\r\n                            <div className=\"flex flex-col items-center justify-center py-20 text-center space-y-4 border-2 border-dashed border-border rounded-3xl bg-muted/30\">\r\n                                <div className=\"w-16 h-16 bg-muted rounded-full flex items-center justify-center\">\r\n                                    <GridIcon className=\"w-8 h-8 text-muted-foreground\" />\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"text-xl font-bold text-foreground\">No Portfolio Items</h3>\r\n                                    <p className=\"text-muted-foreground max-w-sm mx-auto mt-2\">\r\n                                        This user hasn't added any projects yet.\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        ) : (\r\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                            Object.entries(portfolioSections).map(([sectionName, items]: [string, any]) => (\r\n                                <div key={sectionName} className=\"space-y-4\">\r\n                                    <h3 className=\"text-xl font-bold text-foreground px-1 flex items-center gap-2\">\r\n                                        <span className=\"w-1 h-6 bg-primary rounded-full\" />\r\n                                        {sectionName}\r\n                                    </h3>\r\n                                    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4\">\r\n                                        {/* eslint-disable-next-line @typescript-eslint/no-explicit-any */}\r\n                                        {items.map((item: any) => (\r\n                                            <div\r\n                                                key={item.id}\r\n                                                onClick={() => handlePostClick(item)}\r\n                                                className=\"group relative aspect-square rounded-2xl overflow-hidden cursor-pointer bg-muted border border-border shadow-sm hover:shadow-md transition-all\"\r\n                                            >\r\n                                                <Image\r\n                                                    src={item.image_url}\r\n                                                    alt={item.title}\r\n                                                    fill\r\n                                                    className=\"object-cover transition-transform duration-500 group-hover:scale-110\"\r\n                                                />\r\n                                                <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-4\">\r\n                                                    <h4 className=\"text-white font-bold text-sm truncate\">{item.title}</h4>\r\n                                                    {item.description && <p className=\"text-white/70 text-xs truncate\">{item.description}</p>}\r\n                                                    <div className=\"flex items-center gap-3 mt-2\">\r\n                                                        <div className=\"flex items-center gap-1 text-white/90 text-xs font-bold\">\r\n                                                            <Heart className=\"w-3 h-3 fill-white\" />\r\n                                                            {item.likes || 0}\r\n                                                        </div>\r\n                                                        <div className=\"flex items-center gap-1 text-white/90 text-xs font-bold\">\r\n                                                            <MessageCircle className=\"w-3 h-3 fill-white\" />\r\n                                                            {item.comments || 0}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {activeTab === \"SHOP\" && (\r\n                    <div className=\"p-4 md:p-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                        <div className=\"flex flex-col items-center justify-center py-20 text-center space-y-4 border-2 border-dashed border-border rounded-3xl bg-muted/30\">\r\n                            <div className=\"w-16 h-16 bg-muted rounded-full flex items-center justify-center\">\r\n                                <ShoppingBag className=\"w-8 h-8 text-muted-foreground\" />\r\n                            </div>\r\n                            <div>\r\n                                <h3 className=\"text-xl font-bold text-foreground\">Shop is Empty</h3>\r\n                                <p className=\"text-muted-foreground max-w-sm mx-auto mt-2\">\r\n                                    This user hasn't listed any products yet.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\api\\send-welcome-email\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\api\\stripe\\callback\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\api\\stripe\\connect\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\api\\stripe\\status\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\auth\\callback\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'code' is assigned a value but never used.","line":5,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\r\n\r\nexport async function GET(request: Request) {\r\n    const requestUrl = new URL(request.url);\r\n    const code = requestUrl.searchParams.get('code');\r\n\r\n    // Create the redirect URL pointing to dashboard\r\n    const redirectUrl = new URL('/dashboard', request.url);\r\n\r\n    // Copy all search params (code, error, error_description, etc.)\r\n    requestUrl.searchParams.forEach((value, key) => {\r\n        redirectUrl.searchParams.set(key, value);\r\n    });\r\n\r\n    return NextResponse.redirect(redirectUrl);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\p\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used.","line":5,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ImageIcon' is defined but never used.","line":5,"column":66,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":75},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'format' is defined but never used.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'order' is assigned a value but never used.","line":13,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":17},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchOrderDetails` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\p\\[id]\\page.tsx:50:9\n  48 |\n  49 |     useEffect(() => {\n> 50 |         fetchOrderDetails();\n     |         ^^^^^^^^^^^^^^^^^ `fetchOrderDetails` accessed before it is declared\n  51 |     }, [params.id]);\n  52 |\n  53 |     const fetchOrderDetails = async () => {\n\nC:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\p\\[id]\\page.tsx:53:5\n  51 |     }, [params.id]);\n  52 |\n> 53 |     const fetchOrderDetails = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 54 |         setLoading(true);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 55 |         // Try to fetch real order\n     â€¦\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 89 |         setLoading(false);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 90 |     };\n     | ^^^^^^^ `fetchOrderDetails` is declared here\n  91 |\n  92 |     const handlePayment = async () => {\n  93 |         // Simulate payment","line":50,"column":9,"nodeType":null,"endLine":50,"endColumn":26},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchOrderDetails'. Either include it or remove the dependency array.","line":51,"column":8,"nodeType":"ArrayExpression","endLine":51,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [fetchOrderDetails, params.id]","fix":{"range":[1983,1994],"text":"[fetchOrderDetails, params.id]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is assigned a value but never used.","line":56,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":56,"endColumn":39},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":148,"column":29,"nodeType":"JSXOpeningElement","endLine":148,"endColumn":112},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":163,"column":41,"nodeType":"JSXOpeningElement","endLine":163,"endColumn":121},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":220,"column":37,"nodeType":"JSXOpeningElement","endLine":220,"endColumn":171},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":273,"column":29,"nodeType":"JSXOpeningElement","endLine":273,"endColumn":99},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":273,"column":29,"nodeType":"JSXOpeningElement","endLine":273,"endColumn":99}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[557,560],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[557,560],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[679,682],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[679,682],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[799,802],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[799,802],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { supabase } from \"@/lib/supabase/client\";\r\nimport { Loader2, Sun, Moon, Check, Download, FileText, Image as ImageIcon, Bell, User } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport clsx from \"clsx\";\r\nimport { format } from \"date-fns\";\r\n\r\nexport default function PaylinkPage({ params }: { params: { id: string } }) {\r\n    const [loading, setLoading] = useState(true);\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [order, setOrder] = useState<any>(null);\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [seller, setSeller] = useState<any>(null);\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [items, setItems] = useState<any[]>([]);\r\n    const [isPaid, setIsPaid] = useState(false); // Derived from order status\r\n    const [darkMode, setDarkMode] = useState(true);\r\n\r\n    // Mock Data Fallback (for development/preview if ID doesn't exist)\r\n    const MOCK_DATA = {\r\n        seller: {\r\n            username: \"FATECREATES\",\r\n            avatar_url: null, // Replace with actual\r\n        },\r\n        items: [\r\n            {\r\n                id: \"1\",\r\n                title: \"PokÃ©mon Overlay\",\r\n                size: \"2.4MB\",\r\n                date: \"Feb 21, 2025\",\r\n                price: 25.00,\r\n                image: \"https://images.unsplash.com/photo-1613771404798-606476e26f66?q=80&w=1000&auto=format&fit=crop\"\r\n            },\r\n            {\r\n                id: \"2\",\r\n                title: \"PokÃ©mon Thumbnail\",\r\n                size: \"2.4MB\",\r\n                date: \"Feb 21, 2025\",\r\n                price: 25.00,\r\n                image: \"https://images.unsplash.com/photo-1627850604058-52e40de1b847?q=80&w=1000&auto=format&fit=crop\"\r\n            }\r\n        ],\r\n        total: 50.00,\r\n        status: \"incomplete\" // or 'completed'\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchOrderDetails();\r\n    }, [params.id]);\r\n\r\n    const fetchOrderDetails = async () => {\r\n        setLoading(true);\r\n        // Try to fetch real order\r\n        const { data: orderData, error } = await supabase\r\n            .from('orders')\r\n            .select('*')\r\n            .eq('id', params.id)\r\n            .single();\r\n\r\n        if (orderData) {\r\n            setOrder(orderData);\r\n            setIsPaid(orderData.status === 'completed' || orderData.status === 'delivered');\r\n\r\n            // Fetch Seller\r\n            const { data: sellerData } = await supabase\r\n                .from('profiles')\r\n                .select('*')\r\n                .eq('id', orderData.seller_id)\r\n                .single();\r\n\r\n            if (sellerData) setSeller(sellerData);\r\n\r\n            // Parse items from JSONB or use mock if empty\r\n            if (orderData.items && Array.isArray(orderData.items) && orderData.items.length > 0) {\r\n                setItems(orderData.items);\r\n            } else {\r\n                // Fallback to service details if no items\r\n                // For now, let's use the mock items if real items are missing to show the UI\r\n                setItems(MOCK_DATA.items);\r\n            }\r\n        } else {\r\n            // Use Mock Data if order not found (for demo purposes as requested)\r\n            setSeller(MOCK_DATA.seller);\r\n            setItems(MOCK_DATA.items);\r\n            setOrder({ status: 'incomplete', price: MOCK_DATA.total });\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const handlePayment = async () => {\r\n        // Simulate payment\r\n        setLoading(true);\r\n        setTimeout(() => {\r\n            setIsPaid(true);\r\n            setLoading(false);\r\n            // In real app, update DB here\r\n        }, 1500);\r\n    };\r\n\r\n    if (loading && !seller) {\r\n        return (\r\n            <div className=\"min-h-screen bg-[#1a1a1a] flex items-center justify-center\">\r\n                <Loader2 className=\"w-8 h-8 text-blue-500 animate-spin\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const totalAmount = items.reduce((sum, item) => sum + item.price, 0);\r\n\r\n    return (\r\n        <div className={clsx(\"min-h-screen transition-colors duration-300 font-sans\", darkMode ? \"bg-[#1a1a1a] text-white\" : \"bg-gray-50 text-gray-900\")}>\r\n            {/* Navbar */}\r\n            <div className=\"flex items-center justify-between px-6 py-4\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    {/* Hamburger Menu Icon (Mock) */}\r\n                    <div className=\"space-y-1 cursor-pointer\">\r\n                        <div className=\"w-6 h-0.5 bg-current\"></div>\r\n                        <div className=\"w-6 h-0.5 bg-current\"></div>\r\n                        <div className=\"w-6 h-0.5 bg-current\"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-2 font-black text-2xl tracking-tighter\">\r\n                    <div className=\"w-6 h-6 bg-current rounded-sm rotate-45\" />\r\n                    PAYLINK\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-4\">\r\n                    <div className=\"relative\">\r\n                        <Bell className=\"w-6 h-6\" />\r\n                        <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-[10px] flex items-center justify-center font-bold text-white\">3</div>\r\n                    </div>\r\n                    <button onClick={() => setDarkMode(!darkMode)}>\r\n                        {darkMode ? <Sun className=\"w-6 h-6\" /> : <Moon className=\"w-6 h-6\" />}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"max-w-md mx-auto px-4 pb-20\">\r\n                {/* Seller Header */}\r\n                <div className=\"flex items-center justify-center gap-3 mb-6 mt-4\">\r\n                    <h1 className=\"text-2xl font-black italic tracking-wider uppercase\">{seller?.username || \"SELLER\"}</h1>\r\n                    <div className=\"w-10 h-10 rounded-full overflow-hidden border-2 border-white/20 flex items-center justify-center bg-gray-800\">\r\n                        {seller?.avatar_url ? (\r\n                            <img src={seller.avatar_url} alt=\"Avatar\" className=\"w-full h-full object-cover\" />\r\n                        ) : (\r\n                            <User className=\"w-6 h-6 text-gray-400\" />\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Main Card */}\r\n                <div className=\"border-[3px] border-blue-500 rounded-3xl p-6 relative overflow-hidden bg-[#1a1a1a]\">\r\n                    {!isPaid ? (\r\n                        /* UNPAID STATE */\r\n                        <div className=\"space-y-6\">\r\n                            {items.map((item) => (\r\n                                <div key={item.id} className=\"flex gap-4\">\r\n                                    <div className=\"w-24 h-16 rounded-lg overflow-hidden bg-gray-800 shrink-0\">\r\n                                        <img src={item.image} alt={item.title} className=\"w-full h-full object-cover\" />\r\n                                    </div>\r\n                                    <div className=\"flex-1 min-w-0\">\r\n                                        <h3 className=\"font-bold text-sm italic truncate\">{item.title}</h3>\r\n                                        <div className=\"flex justify-between items-end mt-1\">\r\n                                            <div className=\"text-[10px] text-gray-400\">\r\n                                                <div>{item.size}</div>\r\n                                                <div>{item.date}</div>\r\n                                            </div>\r\n                                            <div className=\"bg-gray-600/50 px-4 py-1 rounded-lg font-bold text-xl tracking-tight\">\r\n                                                ${item.price}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n\r\n                            <div className=\"flex items-center justify-center mt-8 mb-2\">\r\n                                <div className=\"bg-gray-800/80 px-6 py-2 rounded-lg font-black italic text-xl text-gray-300\">\r\n                                    TOTAL: <span className=\"text-white\">${totalAmount}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={handlePayment}\r\n                                className=\"w-full bg-blue-500 hover:bg-blue-600 active:scale-95 transition-all text-white font-black italic text-3xl py-4 rounded-full shadow-lg shadow-blue-500/20 uppercase tracking-widest\"\r\n                            >\r\n                                PAY\r\n                            </button>\r\n                        </div>\r\n                    ) : (\r\n                        /* PAID STATE */\r\n                        <div className=\"flex flex-col items-center justify-center py-10 space-y-8 animate-in fade-in zoom-in-95 duration-500\">\r\n                            <div className=\"text-center space-y-2\">\r\n                                <h2 className=\"text-3xl font-black italic tracking-tight leading-none\">\r\n                                    Thanks for your<br />commission!\r\n                                </h2>\r\n                            </div>\r\n\r\n                            <Link\r\n                                href=\"/drive\"\r\n                                className=\"w-full bg-blue-500 hover:bg-blue-600 active:scale-95 transition-all text-white font-black italic text-3xl py-4 rounded-full shadow-lg shadow-blue-500/20 uppercase tracking-widest text-center flex items-center justify-center\"\r\n                            >\r\n                                TO FILES\r\n                            </Link>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Items Seller Sent Section */}\r\n                <div className=\"mt-8\">\r\n                    <h2 className=\"text-2xl font-black italic tracking-wider text-center mb-6 text-white\">Items Seller Sent</h2>\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                        {items.map((item) => (\r\n                            <div key={item.id} className=\"bg-[#222] border border-blue-500/30 rounded-2xl p-3 flex flex-col gap-3\">\r\n                                <div className=\"aspect-video rounded-xl overflow-hidden bg-gray-800 relative group cursor-pointer\">\r\n                                    <img src={item.image} alt={item.title} className=\"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity\" />\r\n                                    {/* Overlay for file type/actions */}\r\n                                    <div className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/40\">\r\n                                        <Download className=\"w-8 h-8 text-white\" />\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"font-medium text-sm text-white\">{item.title}</h3>\r\n                                    <div className=\"flex justify-between items-end mt-1 text-[10px] text-gray-400\">\r\n                                        <div>\r\n                                            <div>File Size</div>\r\n                                            <div className=\"text-white\">{item.size}</div>\r\n                                        </div>\r\n                                        <div className=\"text-right\">\r\n                                            <div>Date</div>\r\n                                            <div className=\"text-white\">{item.date}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Bottom Navigation (Mock) */}\r\n            <div className=\"fixed bottom-6 left-1/2 -translate-x-1/2 bg-blue-500 text-white px-8 py-4 rounded-full shadow-2xl flex items-center gap-8 z-50\">\r\n                <Link href=\"/home\" className=\"flex flex-col items-center gap-1 opacity-100 hover:opacity-80\">\r\n                    <HomeIcon className=\"w-6 h-6 fill-current\" />\r\n                    <span className=\"text-[10px] font-bold\">HOME</span>\r\n                </Link>\r\n                <Link href=\"/receipts\" className=\"flex flex-col items-center gap-1 opacity-70 hover:opacity-100\">\r\n                    <FileText className=\"w-6 h-6\" />\r\n                    <span className=\"text-[10px] font-bold\">RECEIPTS</span>\r\n                </Link>\r\n                <Link href=\"/create\" className=\"flex flex-col items-center gap-1 opacity-100 hover:opacity-80 -mt-8\">\r\n                    <div className=\"w-12 h-12 bg-white text-blue-500 rounded-full flex items-center justify-center shadow-lg\">\r\n                        <div className=\"w-6 h-6 bg-current rounded-sm rotate-45\" /> {/* Plus icon mock */}\r\n                    </div>\r\n                    <span className=\"text-[10px] font-bold\">UPLOAD</span>\r\n                </Link>\r\n                <Link href=\"/qr\" className=\"flex flex-col items-center gap-1 opacity-70 hover:opacity-100\">\r\n                    <div className=\"w-6 h-6 grid grid-cols-2 gap-0.5\">\r\n                        <div className=\"bg-current rounded-[1px]\" />\r\n                        <div className=\"bg-current rounded-[1px]\" />\r\n                        <div className=\"bg-current rounded-[1px]\" />\r\n                        <div className=\"bg-current rounded-[1px]\" />\r\n                    </div>\r\n                    <span className=\"text-[10px] font-bold\">QR CODE</span>\r\n                </Link>\r\n                <Link href=\"/account\" className=\"flex flex-col items-center gap-1 opacity-70 hover:opacity-100\">\r\n                    <div className=\"w-6 h-6 rounded-full bg-black border border-white/20 overflow-hidden flex items-center justify-center\">\r\n                        {seller?.avatar_url ? (\r\n                            <img src={seller.avatar_url} className=\"w-full h-full object-cover\" />\r\n                        ) : (\r\n                            <User className=\"w-4 h-4 text-gray-400\" />\r\n                        )}\r\n                    </div>\r\n                    <span className=\"text-[10px] font-bold\">ACCOUNT</span>\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction HomeIcon({ className }: { className?: string }) {\r\n    return (\r\n        <svg className={className} viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n            <path d=\"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z\" />\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\pay\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used.","line":5,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ShieldCheck' is defined but never used.","line":5,"column":89,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":100},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Home' is defined but never used.","line":5,"column":102,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":106},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Plus' is defined but never used.","line":5,"column":108,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":112},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'QrCode' is defined but never used.","line":5,"column":114,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":120},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchInvoiceDetails` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\pay\\[id]\\page.tsx:25:9\n  23 |\n  24 |     useEffect(() => {\n> 25 |         fetchInvoiceDetails();\n     |         ^^^^^^^^^^^^^^^^^^^ `fetchInvoiceDetails` accessed before it is declared\n  26 |     }, [params.id]);\n  27 |\n  28 |     const fetchInvoiceDetails = async () => {\n\nC:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\pay\\[id]\\page.tsx:28:5\n  26 |     }, [params.id]);\n  27 |\n> 28 |     const fetchInvoiceDetails = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 29 |         setLoading(true);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 30 |         const { data: invoiceData, error } = await supabase\n     â€¦\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 80 |         setLoading(false);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 81 |     };\n     | ^^^^^^^ `fetchInvoiceDetails` is declared here\n  82 |\n  83 |     const handlePayment = async () => {\n  84 |         setProcessingPayment(true);","line":25,"column":9,"nodeType":null,"endLine":25,"endColumn":28},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchInvoiceDetails'. Either include it or remove the dependency array.","line":26,"column":8,"nodeType":"ArrayExpression","endLine":26,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [fetchInvoiceDetails, params.id]","fix":{"range":[1157,1168],"text":"[fetchInvoiceDetails, params.id]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is assigned a value but never used.","line":30,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":41},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":165,"column":29,"nodeType":"JSXOpeningElement","endLine":165,"endColumn":112},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":184,"column":45,"nodeType":"JSXOpeningElement","endLine":184,"endColumn":125},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":258,"column":41,"nodeType":"JSXOpeningElement","endLine":258,"endColumn":175}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[808,811],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[808,811],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { supabase } from \"@/lib/supabase/client\";\r\nimport { Loader2, Sun, Moon, Check, Download, FileText, Image as ImageIcon, Bell, User, ShieldCheck, Home, Plus, QrCode } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport clsx from \"clsx\";\r\nimport { format } from \"date-fns\";\r\nimport { Invoice, InvoiceItem } from \"@/types/paylink\";\r\n\r\nimport { useUser } from \"@/context/UserContext\";\r\n\r\nexport default function InvoicePaymentPage({ params }: { params: { id: string } }) {\r\n    const { user } = useUser();\r\n    const [loading, setLoading] = useState(true);\r\n    const [invoice, setInvoice] = useState<Invoice | null>(null);\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const [seller, setSeller] = useState<any>(null);\r\n    const [items, setItems] = useState<InvoiceItem[]>([]);\r\n    const [isPaid, setIsPaid] = useState(false);\r\n    const [darkMode, setDarkMode] = useState(true); // Default to dark as per screenshot\r\n    const [processingPayment, setProcessingPayment] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetchInvoiceDetails();\r\n    }, [params.id]);\r\n\r\n    const fetchInvoiceDetails = async () => {\r\n        setLoading(true);\r\n        const { data: invoiceData, error } = await supabase\r\n            .from('invoices')\r\n            .select('*')\r\n            .eq('id', params.id)\r\n            .single();\r\n\r\n        if (invoiceData) {\r\n            setInvoice(invoiceData);\r\n            setIsPaid(invoiceData.status === 'paid');\r\n\r\n            // Fetch Seller\r\n            const { data: sellerData } = await supabase\r\n                .from('profiles')\r\n                .select('*')\r\n                .eq('id', invoiceData.seller_id)\r\n                .single();\r\n\r\n            if (sellerData) setSeller(sellerData);\r\n\r\n            // Fetch Items (Assuming invoice items are stored in a separate table or JSONB)\r\n            // For now, we'll assume they are in a related table 'invoice_items' or parsed from description/metadata if not normalized.\r\n            // Since the create invoice page creates 'services' sometimes, but mostly just stores 'amount' and 'description'.\r\n            // Wait, the create invoice page DOES NOT insert into 'invoice_items'. It just calculates total.\r\n            // The screenshot shows distinct items.\r\n            // We need to update the create invoice page to store items, OR parse them from somewhere.\r\n            // For this fix, I will assume we can fetch 'services' if they were linked, or use a mock/placeholder if the data isn't structured.\r\n            // However, to match the screenshot, we need items.\r\n            // I'll check if 'invoice_items' table exists. If not, I'll use the invoice description as a single item or mock it.\r\n            // Actually, the create invoice page (Step 73) has `items` state but only inserts into `invoices` table with `amount` and `description`.\r\n            // It DOES NOT save the line items to the DB! This is a missing feature in the create flow too.\r\n            // I will fix this by saving items to a JSONB column `items` in `invoices` if it exists, or just rely on the description.\r\n            // For now, I'll try to read `items` column from `invoices` (if I added it? No).\r\n            // I will assume the `description` contains the item name for a single item invoice, or use a mock for the visual.\r\n            // Wait, the user wants me to fix \"PayLink Creation Issue\".\r\n            // If I can't save items, I can't display them.\r\n            // I'll update the `fetchInvoiceDetails` to try and parse items or just show the main description as one item.\r\n\r\n            // MOCK ITEMS for visualization if real data is missing structure\r\n            if (invoiceData.items && Array.isArray(invoiceData.items)) {\r\n                setItems(invoiceData.items);\r\n            } else {\r\n                setItems([{\r\n                    title: invoiceData.description || \"Commission\",\r\n                    price: invoiceData.amount,\r\n                    image: null, // We don't have image if not saved\r\n                    size: \"N/A\",\r\n                    date: format(new Date(invoiceData.created_at), \"MMM d, yyyy\")\r\n                }]);\r\n            }\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const handlePayment = async () => {\r\n        setProcessingPayment(true);\r\n        // Simulate payment processing\r\n        setTimeout(async () => {\r\n            // Update invoice status in DB\r\n            const { error } = await supabase\r\n                .from('invoices')\r\n                .update({ status: 'paid' })\r\n                .eq('id', params.id);\r\n\r\n            if (!error) {\r\n                setIsPaid(true);\r\n                if (invoice) {\r\n                    setInvoice({ ...invoice, status: 'paid' });\r\n                }\r\n            } else {\r\n                alert(\"Payment failed. Please try again.\");\r\n            }\r\n            setProcessingPayment(false);\r\n        }, 1500);\r\n    };\r\n\r\n    const scrollToFiles = () => {\r\n        document.getElementById('files-section')?.scrollIntoView({ behavior: 'smooth' });\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen bg-[#1a1a1a] flex items-center justify-center\">\r\n                <Loader2 className=\"w-8 h-8 text-blue-500 animate-spin\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!invoice) {\r\n        return (\r\n            <div className=\"min-h-screen bg-[#1a1a1a] flex flex-col items-center justify-center text-white p-4 text-center\">\r\n                <h1 className=\"text-2xl font-bold mb-2\">Invoice Not Found</h1>\r\n                <p className=\"text-gray-400\">The invoice you are looking for does not exist or has been removed.</p>\r\n                <Link href=\"/\" className=\"mt-6 px-6 py-2 bg-blue-500 rounded-full font-bold hover:bg-blue-600 transition-colors\">\r\n                    Go Home\r\n                </Link>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={clsx(\"min-h-screen transition-colors duration-300 font-sans pb-32\", darkMode ? \"bg-[#1a1a1a] text-white\" : \"bg-gray-50 text-gray-900\")}>\r\n            {/* Navbar */}\r\n            <div className=\"flex items-center justify-between px-6 py-4\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    {/* Hamburger Menu Icon (Mock) */}\r\n                    <div className=\"space-y-1 cursor-pointer\">\r\n                        <div className=\"w-6 h-0.5 bg-current\"></div>\r\n                        <div className=\"w-6 h-0.5 bg-current\"></div>\r\n                        <div className=\"w-6 h-0.5 bg-current\"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-2 font-black text-2xl tracking-tighter\">\r\n                    <div className=\"w-6 h-6 bg-current rounded-sm rotate-45\" />\r\n                    PAYLINK\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-4\">\r\n                    <div className=\"relative\">\r\n                        <Bell className=\"w-6 h-6\" />\r\n                        <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-[10px] flex items-center justify-center font-bold text-white\">3</div>\r\n                    </div>\r\n                    <button onClick={() => setDarkMode(!darkMode)}>\r\n                        {darkMode ? <Sun className=\"w-6 h-6\" /> : <Moon className=\"w-6 h-6\" />}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"max-w-md mx-auto px-4 pt-4\">\r\n                {/* Seller Header */}\r\n                <div className=\"flex items-center justify-center gap-3 mb-6\">\r\n                    <h1 className=\"text-2xl font-black italic tracking-wider uppercase\">{seller?.username || \"SELLER\"}</h1>\r\n                    <div className=\"w-10 h-10 rounded-full overflow-hidden border-2 border-white/20 flex items-center justify-center bg-gray-800\">\r\n                        {seller?.avatar_url ? (\r\n                            <img src={seller.avatar_url} alt=\"Avatar\" className=\"w-full h-full object-cover\" />\r\n                        ) : (\r\n                            <User className=\"w-6 h-6 text-gray-400\" />\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Main Card */}\r\n                <div className={clsx(\r\n                    \"rounded-3xl p-6 relative overflow-hidden transition-all duration-500 border-[3px]\",\r\n                    darkMode ? \"bg-[#1a1a1a] border-blue-500\" : \"bg-white border-blue-500 shadow-xl\"\r\n                )}>\r\n                    {!isPaid ? (\r\n                        /* UNPAID STATE */\r\n                        <div className=\"space-y-6\">\r\n                            {items.map((item, idx) => (\r\n                                <div key={idx} className=\"flex gap-4\">\r\n                                    <div className=\"w-24 h-16 rounded-lg overflow-hidden bg-gray-800 shrink-0 border border-white/10\">\r\n                                        {item.image ? (\r\n                                            <img src={item.image} alt={item.title} className=\"w-full h-full object-cover\" />\r\n                                        ) : (\r\n                                            <div className=\"w-full h-full flex items-center justify-center text-gray-500\">\r\n                                                <ImageIcon className=\"w-6 h-6\" />\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                    <div className=\"flex-1 min-w-0\">\r\n                                        <h3 className=\"font-bold text-sm italic truncate\">{item.title}</h3>\r\n                                        <div className=\"flex justify-between items-end mt-1\">\r\n                                            <div className=\"text-[10px] text-gray-400\">\r\n                                                <div>{item.size || \"2.4MB\"}</div>\r\n                                                <div>{item.date || format(new Date(), \"MMM d, yyyy\")}</div>\r\n                                            </div>\r\n                                            <div className=\"bg-gray-600/50 px-4 py-1 rounded-lg font-bold text-xl tracking-tight\">\r\n                                                ${item.price}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n\r\n                            <div className=\"flex items-center justify-center mt-8 mb-2\">\r\n                                <div className=\"bg-gray-800/80 px-6 py-2 rounded-lg font-black italic text-xl text-gray-300\">\r\n                                    TOTAL: <span className=\"text-white\">${invoice.amount.toFixed(0)}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {user?.id === invoice.seller_id ? (\r\n                                <div className=\"w-full bg-gray-800 text-gray-400 font-bold text-center py-4 rounded-full border-2 border-dashed border-gray-700\">\r\n                                    Viewing as Seller\r\n                                </div>\r\n                            ) : (\r\n                                <button\r\n                                    onClick={handlePayment}\r\n                                    disabled={processingPayment}\r\n                                    className=\"w-full bg-blue-500 hover:bg-blue-600 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed transition-all text-white font-black italic text-3xl py-4 rounded-full shadow-lg shadow-blue-500/20 uppercase tracking-widest\"\r\n                                >\r\n                                    {processingPayment ? (\r\n                                        <Loader2 className=\"w-8 h-8 animate-spin mx-auto\" />\r\n                                    ) : (\r\n                                        \"PAY\"\r\n                                    )}\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    ) : (\r\n                        /* PAID STATE */\r\n                        <div className=\"flex flex-col items-center justify-center py-10 space-y-8 animate-in fade-in zoom-in-95 duration-500\">\r\n                            <div className=\"text-center space-y-2\">\r\n                                <h2 className=\"text-3xl font-black italic tracking-tight leading-none\">\r\n                                    Thanks for your<br />commission!\r\n                                </h2>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={scrollToFiles}\r\n                                className=\"w-full bg-blue-500 hover:bg-blue-600 active:scale-95 transition-all text-white font-black italic text-3xl py-4 rounded-full shadow-lg shadow-blue-500/20 uppercase tracking-widest text-center flex items-center justify-center\"\r\n                            >\r\n                                TO FILES\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Items Seller Sent Section */}\r\n                <div id=\"files-section\" className=\"mt-8\">\r\n                    <h2 className=\"text-2xl font-black italic tracking-wider text-center mb-6 text-white\">Items Seller Sent</h2>\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                        {items.map((item, idx) => (\r\n                            <div key={idx} className=\"bg-[#222] border border-blue-500/30 rounded-2xl p-3 flex flex-col gap-3\">\r\n                                <div className=\"aspect-video rounded-xl overflow-hidden bg-gray-800 relative group cursor-pointer border border-white/10\">\r\n                                    {item.image ? (\r\n                                        <img src={item.image} alt={item.title} className=\"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity\" />\r\n                                    ) : (\r\n                                        <div className=\"w-full h-full flex items-center justify-center text-gray-500\">\r\n                                            <FileText className=\"w-10 h-10\" />\r\n                                        </div>\r\n                                    )}\r\n                                    {/* Overlay for file type/actions */}\r\n                                    <div className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/40\">\r\n                                        <Download className=\"w-8 h-8 text-white\" />\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"font-medium text-sm text-white\">{item.title}</h3>\r\n                                    <div className=\"flex justify-between items-end mt-1 text-[10px] text-gray-400\">\r\n                                        <div>\r\n                                            <div>File Size</div>\r\n                                            <div className=\"text-white\">{item.size || \"2.4MB\"}</div>\r\n                                        </div>\r\n                                        <div className=\"text-right\">\r\n                                            <div>Date</div>\r\n                                            <div className=\"text-white\">{item.date || format(new Date(), \"MMM d, yyyy\")}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\robots.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\signup\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\app\\sitemap.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\dashboard\\StorageWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\emails\\WelcomeEmail.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":10,"column":14,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[296,391],"text":"We&apos;re excited to have you on board. PayLink is the best place to manage your creative business."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[296,391],"text":"We&lsquo;re excited to have you on board. PayLink is the best place to manage your creative business."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[296,391],"text":"We&#39;re excited to have you on board. PayLink is the best place to manage your creative business."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[296,391],"text":"We&rsquo;re excited to have you on board. PayLink is the best place to manage your creative business."},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\r\n\r\ninterface WelcomeEmailProps {\r\n    username: string;\r\n}\r\n\r\nexport const WelcomeEmail: React.FC<WelcomeEmailProps> = ({ username }) => (\r\n    <div style={{ fontFamily: 'sans-serif', color: '#333' }}>\r\n        <h1>Welcome to PayLink, {username}!</h1>\r\n        <p>We're excited to have you on board. PayLink is the best place to manage your creative business.</p>\r\n        <p>Here are a few things you can do to get started:</p>\r\n        <ul>\r\n            <li>Complete your profile</li>\r\n            <li>Create your first service</li>\r\n            <li>Upload your portfolio</li>\r\n        </ul>\r\n        <p>\r\n            <a href=\"https://paylink.com/home\" style={{ display: 'inline-block', padding: '10px 20px', backgroundColor: '#000', color: '#fff', textDecoration: 'none', borderRadius: '5px' }}>\r\n                Go to Dashboard\r\n            </a>\r\n        </p>\r\n    </div>\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\DisputeModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\FileCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\FollowListModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UserPlus' is defined but never used.","line":4,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UserCheck' is defined but never used.","line":4,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":38},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[608,611],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[608,611],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchUsers` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\FollowListModal.tsx:24:13\n  22 |     useEffect(() => {\n  23 |         if (isOpen && userId) {\n> 24 |             fetchUsers();\n     |             ^^^^^^^^^^ `fetchUsers` accessed before it is declared\n  25 |         }\n  26 |     }, [isOpen, type, userId]);\n  27 |\n\nC:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\FollowListModal.tsx:28:5\n  26 |     }, [isOpen, type, userId]);\n  27 |\n> 28 |     const fetchUsers = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 29 |         setLoading(true);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 30 |         let data: any[] = [];\n     â€¦\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 93 |         setLoading(false);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 94 |     };\n     | ^^^^^^^ `fetchUsers` is declared here\n  95 |\n  96 |     const handleFollowToggle = async (targetUserId: string, isFollowing: boolean) => {\n  97 |         if (!currentUser) return;","line":24,"column":13,"nodeType":null,"endLine":24,"endColumn":23},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchUsers'. Either include it or remove the dependency array.","line":26,"column":8,"nodeType":"ArrayExpression","endLine":26,"endColumn":30,"suggestions":[{"desc":"Update the dependencies array to be: [fetchUsers, isOpen, type, userId]","fix":{"range":[775,797],"text":"[fetchUsers, isOpen, type, userId]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[886,889],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[886,889],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[918,921],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[918,921],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1503,1506],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1503,1506],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":68,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2130,2133],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2130,2133],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2728,2731],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2728,2731],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":145,"column":49,"nodeType":"JSXOpeningElement","endLine":145,"endColumn":137}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { X, User, UserPlus, UserCheck } from \"lucide-react\";\r\nimport { supabase } from \"@/lib/supabase/client\";\r\nimport { useUser } from \"@/context/UserContext\";\r\nimport Link from \"next/link\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface FollowListModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    type: 'followers' | 'following';\r\n    userId: string;\r\n}\r\n\r\nexport function FollowListModal({ isOpen, onClose, type, userId }: FollowListModalProps) {\r\n    const { user: currentUser } = useUser();\r\n    const [users, setUsers] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && userId) {\r\n            fetchUsers();\r\n        }\r\n    }, [isOpen, type, userId]);\r\n\r\n    const fetchUsers = async () => {\r\n        setLoading(true);\r\n        let data: any[] = [];\r\n        let error: any = null;\r\n\r\n        if (type === 'followers') {\r\n            const result = await supabase\r\n                .from('follows')\r\n                .select(`\r\n                    follower_id,\r\n                    profiles:follower_id (\r\n                        id,\r\n                        username,\r\n                        full_name,\r\n                        avatar_url,\r\n                        verification_status\r\n                    )\r\n                `)\r\n                .eq('following_id', userId);\r\n\r\n            if (result.data) {\r\n                data = result.data.map((item: any) => item.profiles);\r\n            }\r\n            error = result.error;\r\n        } else {\r\n            const result = await supabase\r\n                .from('follows')\r\n                .select(`\r\n                    following_id,\r\n                    profiles:following_id (\r\n                        id,\r\n                        username,\r\n                        full_name,\r\n                        avatar_url,\r\n                        verification_status\r\n                    )\r\n                `)\r\n                .eq('follower_id', userId);\r\n\r\n            if (result.data) {\r\n                data = result.data.map((item: any) => item.profiles);\r\n            }\r\n            error = result.error;\r\n        }\r\n\r\n        if (error) {\r\n            console.error(\"Error fetching users:\", error);\r\n        } else {\r\n            // Check if current user follows them\r\n            if (currentUser) {\r\n                const { data: myFollows } = await supabase\r\n                    .from('follows')\r\n                    .select('following_id')\r\n                    .eq('follower_id', currentUser.id)\r\n                    .in('following_id', data.map(u => u.id));\r\n\r\n                const myFollowIds = new Set(myFollows?.map((f: any) => f.following_id));\r\n\r\n                data = data.map(u => ({\r\n                    ...u,\r\n                    is_following: myFollowIds.has(u.id)\r\n                }));\r\n            }\r\n            setUsers(data);\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const handleFollowToggle = async (targetUserId: string, isFollowing: boolean) => {\r\n        if (!currentUser) return;\r\n\r\n        // Optimistic update\r\n        setUsers(prev => prev.map(u => u.id === targetUserId ? { ...u, is_following: !isFollowing } : u));\r\n\r\n        if (isFollowing) {\r\n            // Unfollow\r\n            await supabase\r\n                .from('follows')\r\n                .delete()\r\n                .eq('follower_id', currentUser.id)\r\n                .eq('following_id', targetUserId);\r\n        } else {\r\n            // Follow\r\n            await supabase\r\n                .from('follows')\r\n                .insert({\r\n                    follower_id: currentUser.id,\r\n                    following_id: targetUserId\r\n                });\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n            <div className=\"absolute inset-0 bg-black/80 backdrop-blur-sm\" onClick={onClose} />\r\n            <div className=\"relative bg-background w-full max-w-md rounded-2xl shadow-2xl border border-border overflow-hidden flex flex-col max-h-[80vh] animate-in fade-in zoom-in-95 duration-200\">\r\n                <div className=\"p-4 border-b border-border flex items-center justify-between shrink-0\">\r\n                    <h2 className=\"font-bold text-lg capitalize\">{type}</h2>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-muted rounded-full transition-colors\">\r\n                        <X className=\"w-5 h-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"flex-1 overflow-y-auto p-2\">\r\n                    {loading ? (\r\n                        <div className=\"flex justify-center py-8\">\r\n                            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n                        </div>\r\n                    ) : users.length > 0 ? (\r\n                        <div className=\"space-y-1\">\r\n                            {users.map((user) => (\r\n                                <div key={user.id} className=\"flex items-center justify-between p-2 hover:bg-muted/50 rounded-xl transition-colors\">\r\n                                    <Link href={`/${user.username}`} className=\"flex items-center gap-3 flex-1 min-w-0\" onClick={onClose}>\r\n                                        <div className=\"w-10 h-10 rounded-full bg-muted overflow-hidden border border-border shrink-0 flex items-center justify-center\">\r\n                                            {user.avatar_url ? (\r\n                                                <img src={user.avatar_url} alt={user.username} className=\"w-full h-full object-cover\" />\r\n                                            ) : (\r\n                                                <User className=\"w-5 h-5 text-muted-foreground\" />\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <div className=\"font-bold text-sm truncate flex items-center gap-1\">\r\n                                                {user.full_name}\r\n                                                {user.verification_status === 'verified' && (\r\n                                                    <div className=\"w-3 h-3 bg-blue-500 rounded-full flex items-center justify-center shrink-0\">\r\n                                                        <span className=\"text-[8px] text-white font-bold\">âœ“</span>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                            <div className=\"text-xs text-muted-foreground truncate\">@{user.username}</div>\r\n                                        </div>\r\n                                    </Link>\r\n                                    {currentUser && currentUser.id !== user.id && (\r\n                                        <button\r\n                                            onClick={() => handleFollowToggle(user.id, user.is_following)}\r\n                                            className={clsx(\r\n                                                \"px-3 py-1.5 rounded-lg text-xs font-bold transition-all flex items-center gap-1\",\r\n                                                user.is_following\r\n                                                    ? \"bg-muted text-foreground hover:bg-muted/80\"\r\n                                                    : \"bg-primary text-primary-foreground hover:opacity-90\"\r\n                                            )}\r\n                                        >\r\n                                            {user.is_following ? (\r\n                                                <>Following</>\r\n                                            ) : (\r\n                                                <>Follow</>\r\n                                            )}\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"text-center py-10 text-muted-foreground\">\r\n                            No {type} found.\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\MilestoneInvoice.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\PaymentModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CreditCard' is defined but never used.","line":4,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { X, CreditCard } from \"lucide-react\";\r\nimport { FileItem } from \"./FileCard\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface PaymentModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onPay: () => void;\r\n    file: FileItem | null;\r\n}\r\n\r\nexport function PaymentModal({ isOpen, onClose, onPay, file }: PaymentModalProps) {\r\n    if (!file) return null;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    {/* Backdrop */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={onClose}\r\n                        className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60]\"\r\n                    />\r\n\r\n                    {/* Modal / Bottom Sheet */}\r\n                    <motion.div\r\n                        initial={{ y: \"100%\" }}\r\n                        animate={{ y: 0 }}\r\n                        exit={{ y: \"100%\" }}\r\n                        transition={{ type: \"spring\", damping: 25, stiffness: 200 }}\r\n                        className={clsx(\r\n                            \"fixed z-[70] bg-background border border-primary/30 shadow-2xl overflow-hidden\",\r\n                            // Mobile: Bottom Sheet\r\n                            \"bottom-0 left-0 right-0 rounded-t-3xl p-6\",\r\n                            // Desktop: Centered Modal\r\n                            \"md:top-1/2 md:left-1/2 md:bottom-auto md:right-auto md:-translate-x-1/2 md:-translate-y-1/2 md:w-[480px] md:rounded-2xl\"\r\n                        )}\r\n                    >\r\n                        {/* Handle for mobile */}\r\n                        <div className=\"md:hidden w-12 h-1 bg-muted rounded-full mx-auto mb-6\" />\r\n\r\n                        {/* Header */}\r\n                        <div className=\"flex justify-between items-start mb-6\">\r\n                            <div>\r\n                                <h2 className=\"text-xl font-header font-bold italic text-foreground\">\r\n                                    UNLOCK FILE\r\n                                </h2>\r\n                                <p className=\"text-muted-foreground text-sm mt-1\">{file.name}</p>\r\n                            </div>\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"p-2 rounded-full hover:bg-muted transition-colors\"\r\n                            >\r\n                                <X className=\"w-5 h-5 text-muted-foreground\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Content */}\r\n                        <div className=\"space-y-6\">\r\n                            {/* File Preview (Mini) */}\r\n                            <div className=\"flex gap-4 p-3 bg-card rounded-xl border border-border\">\r\n                                <div className=\"w-20 h-12 bg-muted rounded-lg overflow-hidden relative\">\r\n                                    {/* Placeholder for thumbnail */}\r\n                                    <div className=\"absolute inset-0 flex items-center justify-center text-muted-foreground\">\r\n                                        <span className=\"text-xs\">IMG</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex-1\">\r\n                                    <h4 className=\"text-sm font-bold text-foreground\">{file.name}</h4>\r\n                                    <p className=\"text-xs text-muted-foreground\">2.4MB â€¢ Feb 21, 2025</p>\r\n                                </div>\r\n                                <div className=\"flex items-center\">\r\n                                    <span className=\"text-xl font-bold text-foreground font-mono\">$25</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Total Price Display */}\r\n                            <div className=\"bg-muted/50 rounded-xl p-4 border border-border/50 text-center\">\r\n                                <span className=\"text-muted-foreground text-sm uppercase tracking-widest font-bold\">Total to Pay</span>\r\n                                <div className=\"text-4xl font-bold text-foreground font-header italic mt-2\">\r\n                                    $25.00\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Big Blue Pay Button */}\r\n                            <button\r\n                                onClick={onPay}\r\n                                className=\"w-full py-4 bg-primary text-primary-foreground text-xl font-header font-bold italic rounded-full shadow-[0_0_20px_rgba(59,130,246,0.4)] hover:shadow-[0_0_30px_rgba(59,130,246,0.6)] hover:bg-primary/90 transition-all transform active:scale-95\"\r\n                            >\r\n                                PAY NOW\r\n                            </button>\r\n\r\n                            <p className=\"text-center text-xs text-muted-foreground\">\r\n                                Secured by Paylink. Instant delivery upon payment.\r\n                            </p>\r\n                        </div>\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\PostModal.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchComments'. Either include it or remove the dependency array.","line":43,"column":8,"nodeType":"ArrayExpression","endLine":43,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [fetchComments, isOpen, post]","fix":{"range":[1723,1737],"text":"[fetchComments, isOpen, post]"}}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":280,"column":29,"nodeType":"JSXOpeningElement","endLine":284,"endColumn":31},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":296,"column":45,"nodeType":"JSXOpeningElement","endLine":300,"endColumn":47},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":421,"column":29,"nodeType":"JSXOpeningElement","endLine":425,"endColumn":31},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":449,"column":41,"nodeType":"JSXOpeningElement","endLine":453,"endColumn":43},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":574,"column":25,"nodeType":"JSXOpeningElement","endLine":578,"endColumn":27}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[650,653],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[650,653],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[753,756],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[753,756],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":546,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":546,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27199,27202],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27199,27202],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":548,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":548,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27283,27286],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27283,27286],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":558,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":558,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27628,27631],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27628,27631],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":560,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":560,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27712,27715],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27712,27715],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"ï»¿\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { X, Heart, MessageCircle, Send, Check, User } from \"lucide-react\";\r\nimport { supabase } from \"@/lib/supabase/client\";\r\nimport { useUser } from \"@/context/UserContext\";\r\nimport { useToast } from \"@/context/ToastContext\";\r\nimport Link from \"next/link\";\r\nimport clsx from \"clsx\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\nimport { Comment } from \"@/types/paylink\";\r\nimport { ShareModal } from \"./ShareModal\";\r\n\r\ninterface PostModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    post: any;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    onUpdate?: (updatedPost: any) => void;\r\n}\r\n\r\nexport function PostModal({ isOpen, onClose, post, onUpdate }: PostModalProps) {\r\n    const { user } = useUser();\r\n    const { toast } = useToast();\r\n    const [comments, setComments] = useState<Comment[]>([]);\r\n    const [newComment, setNewComment] = useState(\"\");\r\n    const [isLiked, setIsLiked] = useState(false);\r\n    const [likesCount, setLikesCount] = useState(0);\r\n    const [loadingComments, setLoadingComments] = useState(false);\r\n    const [submittingComment, setSubmittingComment] = useState(false);\r\n    const [replyTo, setReplyTo] = useState<Comment | null>(null);\r\n    const [isShareModalOpen, setIsShareModalOpen] = useState(false);\r\n    const commentsEndRef = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && post) {\r\n            // Initialize from props\r\n            setLikesCount(post.likes || 0);\r\n            setIsLiked(post.user_has_liked || false);\r\n            fetchComments();\r\n        }\r\n    }, [isOpen, post]);\r\n\r\n    // Removed redundant fetchPostDetails to prevent race conditions/flickering\r\n    /*\r\n    const fetchPostDetails = async () => {\r\n        if (!post) return;\r\n        const { data } = await supabase\r\n            .rpc('get_post_stats', { post_id: post.id });\r\n\r\n        if (data) {\r\n            setLikesCount(data.likes_count);\r\n            setIsLiked(data.user_has_liked);\r\n        }\r\n    };\r\n    */\r\n\r\n    const fetchComments = async () => {\r\n        if (!post) return;\r\n        setLoadingComments(true);\r\n        const { data: commentsData } = await supabase\r\n            .from('comments')\r\n            .select(`\r\n                *,\r\n                profiles:user_id (\r\n                    id,\r\n                    username,\r\n                    full_name,\r\n                    avatar_url\r\n                )\r\n            `)\r\n            .eq('portfolio_item_id', post.id)\r\n            .order('created_at', { ascending: true });\r\n\r\n        if (commentsData) {\r\n            const commentIds = commentsData.map(c => c.id);\r\n\r\n            // Fetch likes for these comments\r\n            const { data: likesData } = await supabase\r\n                .from('comment_likes')\r\n                .select('comment_id, user_id')\r\n                .in('comment_id', commentIds);\r\n\r\n            const commentsWithLikes = commentsData.map(comment => {\r\n                const likes = likesData?.filter(l => l.comment_id === comment.id) || [];\r\n                return {\r\n                    ...comment,\r\n                    likes_count: likes.length,\r\n                    user_has_liked: user ? likes.some(l => l.user_id === user.id) : false\r\n                };\r\n            });\r\n\r\n            setComments(commentsWithLikes);\r\n            setTimeout(scrollToBottom, 100);\r\n        }\r\n        setLoadingComments(false);\r\n    };\r\n\r\n    const scrollToBottom = () => {\r\n        commentsEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    };\r\n\r\n    const handleLikeToggle = async () => {\r\n        if (!user) {\r\n            toast(\"Please login to like posts.\", \"error\");\r\n            return;\r\n        }\r\n\r\n        const previousLiked = isLiked;\r\n        const previousCount = likesCount;\r\n\r\n        const newLikedState = !isLiked;\r\n        setIsLiked(newLikedState);\r\n        setLikesCount(prev => newLikedState ? prev + 1 : prev - 1);\r\n\r\n        if (previousLiked) {\r\n            const { error } = await supabase\r\n                .from('likes')\r\n                .delete()\r\n                .eq('user_id', user.id)\r\n                .eq('portfolio_item_id', post.id);\r\n\r\n            if (error) {\r\n                setIsLiked(previousLiked);\r\n                setLikesCount(previousCount);\r\n                toast(`Error unliking post: ${error.message}`, \"error\");\r\n            }\r\n        } else {\r\n            const { error } = await supabase\r\n                .from('likes')\r\n                .insert({\r\n                    user_id: user.id,\r\n                    portfolio_item_id: post.id\r\n                });\r\n\r\n            if (error) {\r\n                if (error.code === '23505') {\r\n                    setIsLiked(true);\r\n                } else {\r\n                    setIsLiked(previousLiked);\r\n                    setLikesCount(previousCount);\r\n                    toast(`Error liking post: ${error.message}`, \"error\");\r\n                }\r\n            }\r\n        }\r\n\r\n        if (onUpdate) {\r\n            onUpdate({\r\n                ...post,\r\n                likes: newLikedState ? likesCount + 1 : likesCount - 1,\r\n                user_has_liked: newLikedState\r\n            });\r\n        }\r\n    };\r\n\r\n    const handlePostComment = async () => {\r\n        if (!user) {\r\n            toast(\"Please login to comment.\", \"error\");\r\n            return;\r\n        }\r\n        if (!newComment.trim()) return;\r\n        setSubmittingComment(true);\r\n\r\n        const { data, error } = await supabase\r\n            .from('comments')\r\n            .insert({\r\n                user_id: user.id,\r\n                portfolio_item_id: post.id,\r\n                content: newComment.trim(),\r\n                parent_id: replyTo ? replyTo.id : null\r\n            })\r\n            .select(`\r\n                *,\r\n                profiles:user_id (\r\n                    id,\r\n                    username,\r\n                    full_name,\r\n                    avatar_url\r\n                )\r\n            `)\r\n            .single();\r\n\r\n        if (error) {\r\n            toast(`Error posting comment: ${error.message}`, \"error\");\r\n        }\r\n\r\n        if (data) {\r\n            setComments(prev => [...prev, { ...data, likes_count: 0, user_has_liked: false }]);\r\n            setNewComment(\"\");\r\n            setReplyTo(null);\r\n            setTimeout(scrollToBottom, 100);\r\n\r\n            if (onUpdate) {\r\n                onUpdate({ ...post, comments: (post.comments || 0) + 1 });\r\n            }\r\n        }\r\n        setSubmittingComment(false);\r\n    };\r\n\r\n    const handleDeleteComment = async (commentId: string) => {\r\n        const { error } = await supabase\r\n            .from('comments')\r\n            .delete()\r\n            .eq('id', commentId);\r\n\r\n        if (!error) {\r\n            setComments(prev => prev.filter(c => c.id !== commentId));\r\n            if (onUpdate) {\r\n                onUpdate({ ...post, comments: Math.max(0, (post.comments || 0) - 1) });\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleLikeComment = async (commentId: string) => {\r\n        if (!user) return;\r\n\r\n        setComments(prev => prev.map(c => {\r\n            if (c.id === commentId) {\r\n                const isLiked = c.user_has_liked;\r\n                return {\r\n                    ...c,\r\n                    likes_count: (c.likes_count || 0) + (isLiked ? -1 : 1),\r\n                    user_has_liked: !isLiked\r\n                };\r\n            }\r\n            return c;\r\n        }));\r\n\r\n        try {\r\n            const { error } = await supabase\r\n                .from('comment_likes')\r\n                .insert({ comment_id: commentId, user_id: user.id });\r\n\r\n            if (error) {\r\n                if (error.code === '23505') {\r\n                    await supabase\r\n                        .from('comment_likes')\r\n                        .delete()\r\n                        .match({ comment_id: commentId, user_id: user.id });\r\n                } else {\r\n                    throw error;\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Error liking comment:', error);\r\n            setComments(prev => prev.map(c => {\r\n                if (c.id === commentId) {\r\n                    const isLiked = !c.user_has_liked;\r\n                    return {\r\n                        ...c,\r\n                        likes_count: (c.likes_count || 0) + (isLiked ? -1 : 1),\r\n                        user_has_liked: !isLiked\r\n                    };\r\n                }\r\n                return c;\r\n            }));\r\n            toast(\"Failed to like comment\", \"error\");\r\n        }\r\n    };\r\n\r\n    if (!isOpen || !post) return null;\r\n\r\n    return (\r\n        <>\r\n            <ShareModal\r\n                isOpen={isShareModalOpen}\r\n                onClose={() => setIsShareModalOpen(false)}\r\n                url={`${window.location.origin}/${post.user?.username || post.profiles?.username}`}\r\n                title={`Check out this post by ${post.user?.name || post.profiles?.full_name}`}\r\n            />\r\n            <div className=\"fixed inset-0 z-50 flex items-center justify-center md:p-6\">\r\n                <div className=\"absolute inset-0 bg-black/80 backdrop-blur-sm\" onClick={onClose} />\r\n\r\n                {/* DESKTOP LAYOUT (Split View) */}\r\n                <div className=\"hidden md:flex relative w-full h-full max-w-5xl max-h-[85vh] bg-background rounded-xl overflow-hidden flex-row shadow-2xl animate-in fade-in zoom-in-95 duration-200 border border-border/50\">\r\n                    {/* Image Section */}\r\n                    <div className=\"flex-1 bg-black flex items-center justify-center relative group overflow-hidden\">\r\n                        <div className=\"relative w-full h-full flex items-center justify-center\">\r\n                            <img\r\n                                src={post.image_url}\r\n                                alt={post.title}\r\n                                className=\"max-w-full max-h-full object-contain\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Sidebar Section */}\r\n                    <div className=\"w-[350px] lg:w-[400px] flex flex-col bg-background border-l border-border h-full\">\r\n                        {/* Header */}\r\n                        <div className=\"p-4 border-b border-border flex items-center justify-between shrink-0\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <Link href={`/${post.user?.username || post.profiles?.username}`} className=\"block\">\r\n                                    <div className=\"w-8 h-8 rounded-full bg-muted overflow-hidden border border-border flex items-center justify-center\">\r\n                                        {(post.user?.avatar || post.profiles?.avatar_url) ? (\r\n                                            <img\r\n                                                src={post.user?.avatar || post.profiles?.avatar_url}\r\n                                                alt=\"Avatar\"\r\n                                                className=\"w-full h-full object-cover\"\r\n                                            />\r\n                                        ) : (\r\n                                            <div className=\"w-4 h-4 text-muted-foreground\">\r\n                                                <User className=\"w-full h-full p-0.5\" />\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </Link>\r\n                                <Link href={`/${post.user?.username || post.profiles?.username}`} className=\"font-bold hover:underline text-sm flex items-center gap-1\">\r\n                                    {post.user?.name || post.profiles?.full_name || \"Unknown User\"}\r\n                                    {(post.user?.verification_status === 'verified' || post.user?.username === 'leonp') && (\r\n                                        <div className=\"bg-blue-500 text-white p-0.5 rounded-full\">\r\n                                            <Check className=\"w-2 h-2 stroke-[4]\" />\r\n                                        </div>\r\n                                    )}\r\n                                </Link>\r\n                            </div>\r\n                            <button onClick={onClose} className=\"p-2 hover:bg-muted rounded-full transition-colors\">\r\n                                <X className=\"w-5 h-5\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Comments Area */}\r\n                        <div className=\"flex-1 overflow-y-auto p-4 space-y-6\">\r\n                            {/* Caption */}\r\n                            <div className=\"px-1\">\r\n                                <div className=\"text-sm\">\r\n                                    <Link href={`/${post.user?.username || post.profiles?.username}`} className=\"font-bold mr-2 hover:underline inline-flex items-center gap-1\">\r\n                                        {post.user?.name || post.profiles?.full_name}\r\n                                        {(post.user?.verification_status === 'verified' || post.user?.username === 'leonp') && (\r\n                                            <div className=\"bg-blue-500 text-white p-0.5 rounded-full\">\r\n                                                <Check className=\"w-2 h-2 stroke-[4]\" />\r\n                                            </div>\r\n                                        )}\r\n                                    </Link>\r\n                                    {post.description || post.caption}\r\n                                </div>\r\n                                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                                    {post.created_at && formatDistanceToNow(new Date(post.created_at), { addSuffix: true })}\r\n                                </p>\r\n                            </div>\r\n\r\n                            <div className=\"h-px bg-border/50\" />\r\n\r\n                            {/* Comments List */}\r\n                            {loadingComments ? (\r\n                                <div className=\"flex justify-center py-4\">\r\n                                    <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-primary\"></div>\r\n                                </div>\r\n                            ) : comments.length > 0 ? (\r\n                                <CommentList\r\n                                    comments={comments}\r\n                                    user={user}\r\n                                    post={post}\r\n                                    onDelete={handleDeleteComment}\r\n                                    onReply={(comment: Comment) => {\r\n                                        setReplyTo(comment);\r\n                                        document.getElementById('comment-input-desktop')?.focus();\r\n                                    }}\r\n                                    onLike={handleLikeComment}\r\n                                />\r\n                            ) : (\r\n                                <div className=\"text-center py-10 text-muted-foreground text-sm\">\r\n                                    No comments yet. Be the first to say something!\r\n                                </div>\r\n                            )}\r\n                            <div ref={commentsEndRef} />\r\n                        </div>\r\n\r\n                        {/* Actions & Input */}\r\n                        <div className=\"p-4 border-t border-border bg-background shrink-0\">\r\n                            <div className=\"flex items-center justify-between mb-4\">\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <button onClick={handleLikeToggle} className=\"group flex items-center gap-1.5 transition-colors\">\r\n                                        <Heart className={clsx(\"w-7 h-7 transition-all active:scale-75\", isLiked ? \"fill-red-500 text-red-500\" : \"text-foreground group-hover:text-red-500\")} />\r\n                                    </button>\r\n                                    <button onClick={() => document.getElementById('comment-input-desktop')?.focus()} className=\"group flex items-center gap-1.5 transition-colors\">\r\n                                        <MessageCircle className=\"w-7 h-7 text-foreground group-hover:text-blue-500 transition-colors\" />\r\n                                    </button>\r\n                                    <button onClick={() => setIsShareModalOpen(true)} className=\"group flex items-center gap-1.5 transition-colors\">\r\n                                        <Send className=\"w-7 h-7 text-foreground group-hover:text-green-500 transition-colors -rotate-45 mt-1\" />\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"font-bold text-sm mb-4\">{likesCount} likes</div>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <input\r\n                                    id=\"comment-input-desktop\"\r\n                                    type=\"text\"\r\n                                    value={newComment}\r\n                                    onChange={(e) => setNewComment(e.target.value)}\r\n                                    onKeyDown={(e) => e.key === 'Enter' && handlePostComment()}\r\n                                    placeholder=\"Add a comment...\"\r\n                                    className=\"flex-1 bg-muted/50 border-none rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-primary/20 transition-all\"\r\n                                />\r\n                                <button\r\n                                    onClick={handlePostComment}\r\n                                    disabled={!newComment.trim() || submittingComment}\r\n                                    className=\"text-primary font-bold text-sm disabled:opacity-50 hover:text-primary/80 transition-colors\"\r\n                                >\r\n                                    Post\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* MOBILE LAYOUT (Single Scrollable View) */}\r\n                <div className=\"md:hidden relative w-full h-full bg-background flex flex-col animate-in fade-in zoom-in-95 duration-200\">\r\n                    {/* Floating Close Button */}\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"absolute top-4 right-4 z-20 p-2 bg-black/50 hover:bg-black/70 text-white rounded-full transition-colors\"\r\n                    >\r\n                        <X className=\"w-6 h-6\" />\r\n                    </button>\r\n\r\n                    {/* Scrollable Content */}\r\n                    <div className=\"flex-1 overflow-y-auto\">\r\n                        {/* Image */}\r\n                        <div className=\"w-full bg-black min-h-[40vh] flex items-center justify-center\">\r\n                            <img\r\n                                src={post.image_url}\r\n                                alt={post.title}\r\n                                className=\"w-full h-auto max-h-[70vh] object-contain\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Actions */}\r\n                        <div className=\"p-4 pb-2\">\r\n                            <div className=\"flex items-center gap-4 mb-3\">\r\n                                <button onClick={handleLikeToggle} className=\"group flex items-center gap-1.5 transition-colors\">\r\n                                    <Heart className={clsx(\"w-7 h-7 transition-all active:scale-75\", isLiked ? \"fill-red-500 text-red-500\" : \"text-foreground group-hover:text-red-500\")} />\r\n                                </button>\r\n                                <button onClick={() => document.getElementById('comment-input-mobile')?.focus()} className=\"group flex items-center gap-1.5 transition-colors\">\r\n                                    <MessageCircle className=\"w-7 h-7 text-foreground group-hover:text-blue-500 transition-colors\" />\r\n                                </button>\r\n                                <button onClick={() => setIsShareModalOpen(true)} className=\"group flex items-center gap-1.5 transition-colors\">\r\n                                    <Send className=\"w-7 h-7 text-foreground group-hover:text-green-500 transition-colors -rotate-45 mt-1\" />\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"font-bold text-sm\">{likesCount} likes</div>\r\n                        </div>\r\n\r\n                        {/* Caption with Avatar */}\r\n                        <div className=\"px-4 pb-4\">\r\n                            <div className=\"flex gap-3\">\r\n                                <Link href={`/${post.user?.username || post.profiles?.username}`} className=\"w-10 h-10 rounded-full bg-muted overflow-hidden border border-border shrink-0 flex items-center justify-center\">\r\n                                    {(post.user?.avatar || post.profiles?.avatar_url) ? (\r\n                                        <img\r\n                                            src={post.user?.avatar || post.profiles?.avatar_url}\r\n                                            alt=\"Avatar\"\r\n                                            className=\"w-full h-full object-cover\"\r\n                                        />\r\n                                    ) : (\r\n                                        <div className=\"w-5 h-5 text-muted-foreground\">\r\n                                            <User className=\"w-full h-full p-0.5\" />\r\n                                        </div>\r\n                                    )}\r\n                                </Link>\r\n                                <div className=\"flex-1\">\r\n                                    <div className=\"text-sm\">\r\n                                        <Link href={`/${post.user?.username || post.profiles?.username}`} className=\"font-bold mr-2 hover:underline inline-flex items-center gap-1\">\r\n                                            {post.user?.name || post.profiles?.full_name}\r\n                                            {(post.user?.verification_status === 'verified' || post.user?.username === 'leonp') && (\r\n                                                <div className=\"bg-blue-500 text-white p-0.5 rounded-full\">\r\n                                                    <Check className=\"w-2 h-2 stroke-[4]\" />\r\n                                                </div>\r\n                                            )}\r\n                                        </Link>\r\n                                        {post.description || post.caption}\r\n                                    </div>\r\n                                    <p className=\"text-xs text-muted-foreground mt-1\">\r\n                                        {post.created_at && formatDistanceToNow(new Date(post.created_at), { addSuffix: true })}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"h-px bg-border/50 mx-4 mb-4\" />\r\n\r\n                        {/* Comments */}\r\n                        <div className=\"px-4 pb-20 space-y-4\">\r\n                            {loadingComments ? (\r\n                                <div className=\"flex justify-center py-4\">\r\n                                    <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-primary\"></div>\r\n                                </div>\r\n                            ) : comments.length > 0 ? (\r\n                                <CommentList\r\n                                    comments={comments}\r\n                                    user={user}\r\n                                    post={post}\r\n                                    onDelete={handleDeleteComment}\r\n                                    onReply={(comment: Comment) => {\r\n                                        setReplyTo(comment);\r\n                                        document.getElementById('comment-input-mobile')?.focus();\r\n                                    }}\r\n                                    onLike={handleLikeComment}\r\n                                />\r\n                            ) : (\r\n                                <div className=\"text-center py-10 text-muted-foreground text-sm\">\r\n                                    No comments yet.\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Footer (Input) */}\r\n                    <div className=\"p-4 border-t border-border bg-background shrink-0 sticky bottom-0 z-50\">\r\n                        {replyTo && (\r\n                            <div className=\"flex items-center justify-between bg-muted/30 px-3 py-1.5 mb-2 rounded-lg text-xs\">\r\n                                <span className=\"text-muted-foreground\">Replying to <span className=\"font-bold text-foreground\">@{replyTo.profiles?.username}</span></span>\r\n                                <button onClick={() => setReplyTo(null)} className=\"p-1 hover:bg-muted rounded-full\">\r\n                                    <X className=\"w-3 h-3\" />\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <input\r\n                                id=\"comment-input-mobile\"\r\n                                type=\"text\"\r\n                                value={newComment}\r\n                                onChange={(e) => setNewComment(e.target.value)}\r\n                                onKeyDown={(e) => e.key === 'Enter' && handlePostComment()}\r\n                                placeholder={replyTo ? `Reply to @${replyTo.profiles?.username}...` : \"Add a comment...\"}\r\n                                className=\"flex-1 bg-muted/50 border-none rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-primary/20 transition-all\"\r\n                            />\r\n                            <button\r\n                                onClick={handlePostComment}\r\n                                disabled={!newComment.trim() || submittingComment}\r\n                                className=\"text-primary font-bold text-sm disabled:opacity-50 hover:text-primary/80 transition-colors\"\r\n                            >\r\n                                Post\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\n// Helper Component for Recursive Comments\r\ninterface CommentListProps {\r\n    comments: Comment[];\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    user: any;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    post: any;\r\n    onDelete: (id: string) => void;\r\n    onReply: (comment: Comment) => void;\r\n    onLike: (commentId: string) => void;\r\n}\r\n\r\nfunction CommentItem({ comment, comments, user, post, onDelete, onReply, onLike }: {\r\n    comment: Comment;\r\n    comments: Comment[];\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    user: any;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    post: any;\r\n    onDelete: (id: string) => void;\r\n    onReply: (comment: Comment) => void;\r\n    onLike: (commentId: string) => void;\r\n}) {\r\n    const [showReplies, setShowReplies] = useState(false);\r\n    const replies = comments.filter(c => c.parent_id === comment.id);\r\n    const hasReplies = replies.length > 0;\r\n\r\n    return (\r\n        <div className=\"group\">\r\n            <div className=\"flex gap-3\">\r\n                <Link href={`/${comment.profiles?.username}`} className=\"w-8 h-8 rounded-full bg-muted overflow-hidden border border-border shrink-0 flex items-center justify-center\">\r\n                    {comment.profiles?.avatar_url ? (\r\n                        <img\r\n                            src={comment.profiles?.avatar_url}\r\n                            alt=\"Avatar\"\r\n                            className=\"w-full h-full object-cover\"\r\n                        />\r\n                    ) : (\r\n                        <div className=\"w-4 h-4 text-muted-foreground\">\r\n                            <User className=\"w-full h-full p-0.5\" />\r\n                        </div>\r\n                    )}\r\n                </Link>\r\n                <div className=\"flex-1\">\r\n                    <div className=\"flex items-baseline justify-between\">\r\n                        <p className=\"text-sm\">\r\n                            <Link href={`/${comment.profiles?.username}`} className=\"font-bold mr-2 hover:underline\">\r\n                                {comment.profiles?.full_name}\r\n                            </Link>\r\n                            {comment.content}\r\n                        </p>\r\n                        <button\r\n                            onClick={() => onLike(comment.id)}\r\n                            className=\"flex items-center gap-1 text-xs text-muted-foreground hover:text-red-500 transition-colors\"\r\n                        >\r\n                            <Heart className={clsx(\"w-3 h-3\", comment.user_has_liked && \"fill-red-500 text-red-500\")} />\r\n                            {comment.likes_count && comment.likes_count > 0 && <span>{comment.likes_count}</span>}\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-4 mt-1\">\r\n                        <span className=\"text-xs text-muted-foreground\">\r\n                            {formatDistanceToNow(new Date(comment.created_at), { addSuffix: true })}\r\n                        </span>\r\n                        <button\r\n                            onClick={() => onReply(comment)}\r\n                            className=\"text-xs font-bold text-muted-foreground hover:text-foreground transition-colors\"\r\n                        >\r\n                            Reply\r\n                        </button>\r\n                        {(user?.id === comment.user_id || user?.id === post.user_id) && (\r\n                            <button\r\n                                onClick={() => onDelete(comment.id)}\r\n                                className=\"text-xs text-red-500 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                            >\r\n                                Delete\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n\r\n                    {hasReplies && (\r\n                        <div className=\"mt-2\">\r\n                            {!showReplies ? (\r\n                                <button\r\n                                    onClick={() => setShowReplies(true)}\r\n                                    className=\"flex items-center gap-2 text-xs font-bold text-muted-foreground hover:text-foreground my-1\"\r\n                                >\r\n                                    <div className=\"w-6 h-px bg-border\" />\r\n                                    View {replies.length} replies\r\n                                </button>\r\n                            ) : (\r\n                                <div className=\"pl-8 border-l-2 border-border/50 mt-2 space-y-4\">\r\n                                    {replies.map(reply => (\r\n                                        <CommentItem\r\n                                            key={reply.id}\r\n                                            comment={reply}\r\n                                            comments={comments}\r\n                                            user={user}\r\n                                            post={post}\r\n                                            onDelete={onDelete}\r\n                                            onReply={onReply}\r\n                                            onLike={onLike}\r\n                                        />\r\n                                    ))}\r\n                                    <button\r\n                                        onClick={() => setShowReplies(false)}\r\n                                        className=\"text-xs font-bold text-muted-foreground hover:text-foreground mt-2\"\r\n                                    >\r\n                                        Hide replies\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction CommentList({ comments, user, post, onDelete, onReply, onLike }: CommentListProps) {\r\n    const rootComments = comments.filter((c: Comment) => !c.parent_id);\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            {rootComments.map((comment: Comment) => (\r\n                <CommentItem\r\n                    key={comment.id}\r\n                    comment={comment}\r\n                    comments={comments}\r\n                    user={user}\r\n                    post={post}\r\n                    onDelete={onDelete}\r\n                    onReply={onReply}\r\n                    onLike={onLike}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\PostOptionsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":3,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":7,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Edit' is defined but never used.","line":7,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LinkIcon' is defined but never used.","line":7,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ExternalLink' is defined but never used.","line":7,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Flag' is defined but never used.","line":7,"column":59,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'clsx' is defined but never used.","line":8,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useUser } from \"@/context/UserContext\";\r\nimport { useToast } from \"@/context/ToastContext\";\r\nimport { supabase } from \"@/lib/supabase/client\";\r\nimport { X, Trash2, Edit, Link as LinkIcon, ExternalLink, Flag } from \"lucide-react\";\r\nimport clsx from \"clsx\";\r\nimport Link from \"next/link\";\r\n\r\nimport { PortfolioItem } from \"@/types/paylink\";\r\n\r\ninterface PostOptionsModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    post: PortfolioItem;\r\n    onDelete?: () => void;\r\n}\r\n\r\nexport function PostOptionsModal({ isOpen, onClose, post, onDelete }: PostOptionsModalProps) {\r\n    const { user } = useUser();\r\n    const { toast } = useToast();\r\n    const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n    if (!isOpen || !post) return null;\r\n\r\n    const isOwner = user?.id === post.user_id;\r\n\r\n    const handleCopyLink = () => {\r\n        const url = `${window.location.origin}/p/${post.id}`;\r\n        navigator.clipboard.writeText(url);\r\n        toast(\"Link copied to clipboard\", \"success\");\r\n        onClose();\r\n    };\r\n\r\n    const handleDelete = async () => {\r\n        if (!confirm(\"Are you sure you want to delete this post?\")) return;\r\n\r\n        setIsDeleting(true);\r\n        const { error } = await supabase\r\n            .from('portfolio_items')\r\n            .delete()\r\n            .eq('id', post.id);\r\n\r\n        if (error) {\r\n            toast(\"Error deleting post\", \"error\");\r\n            setIsDeleting(false);\r\n        } else {\r\n            toast(\"Post deleted\", \"success\");\r\n            if (onDelete) onDelete();\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[60] flex items-center justify-center p-4\">\r\n            <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\" onClick={onClose} />\r\n\r\n            <div className=\"relative w-full max-w-xs bg-white dark:bg-[#262626] rounded-xl overflow-hidden shadow-2xl animate-in fade-in zoom-in-95 duration-200\">\r\n                <div className=\"flex flex-col divide-y divide-gray-200 dark:divide-[#363636]\">\r\n                    {isOwner && (\r\n                        <button\r\n                            onClick={handleDelete}\r\n                            disabled={isDeleting}\r\n                            className=\"w-full p-3.5 text-sm font-bold text-red-500 hover:bg-gray-50 dark:hover:bg-[#333] transition-colors disabled:opacity-50\"\r\n                        >\r\n                            {isDeleting ? \"Deleting...\" : \"Delete\"}\r\n                        </button>\r\n                    )}\r\n\r\n                    {isOwner && (\r\n                        <button\r\n                            onClick={() => {\r\n                                toast(\"Edit functionality coming soon\", \"info\");\r\n                                onClose();\r\n                            }}\r\n                            className=\"w-full p-3.5 text-sm font-medium text-gray-900 dark:text-white hover:bg-gray-50 dark:hover:bg-[#333] transition-colors\"\r\n                        >\r\n                            Edit\r\n                        </button>\r\n                    )}\r\n\r\n                    <button\r\n                        onClick={handleCopyLink}\r\n                        className=\"w-full p-3.5 text-sm font-medium text-gray-900 dark:text-white hover:bg-gray-50 dark:hover:bg-[#333] transition-colors\"\r\n                    >\r\n                        Copy link\r\n                    </button>\r\n\r\n                    <Link\r\n                        href={`/p/${post.id}`}\r\n                        onClick={onClose}\r\n                        className=\"w-full p-3.5 text-sm font-medium text-gray-900 dark:text-white hover:bg-gray-50 dark:hover:bg-[#333] transition-colors text-center block\"\r\n                    >\r\n                        Go to post\r\n                    </Link>\r\n\r\n                    <button\r\n                        onClick={() => {\r\n                            toast(\"Report functionality coming soon\", \"info\");\r\n                            onClose();\r\n                        }}\r\n                        className=\"w-full p-3.5 text-sm font-bold text-red-500 hover:bg-gray-50 dark:hover:bg-[#333] transition-colors\"\r\n                    >\r\n                        Report\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"w-full p-3.5 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-[#333] transition-colors\"\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\ReportModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\ShareModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Send' is defined but never used.","line":3,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Copy, Send, Share2, X } from \"lucide-react\";\r\nimport { useState } from \"react\";\r\n\r\ninterface ShareModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    url: string;\r\n    title?: string;\r\n}\r\n\r\nexport function ShareModal({ isOpen, onClose, url, title = \"Check this out!\" }: ShareModalProps) {\r\n    const [copied, setCopied] = useState(false);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleCopy = async () => {\r\n        try {\r\n            await navigator.clipboard.writeText(url);\r\n            setCopied(true);\r\n            setTimeout(() => setCopied(false), 2000);\r\n        } catch (err) {\r\n            console.error(\"Failed to copy:\", err);\r\n        }\r\n    };\r\n\r\n    const handleShare = async () => {\r\n        if (navigator.share) {\r\n            try {\r\n                await navigator.share({\r\n                    title: title,\r\n                    text: title,\r\n                    url: url,\r\n                });\r\n                onClose();\r\n            } catch (err) {\r\n                console.log(\"Error sharing:\", err);\r\n            }\r\n        } else {\r\n            // Fallback to copy if Web Share API not supported\r\n            handleCopy();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[60] flex items-center justify-center p-4\">\r\n            <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\" onClick={onClose} />\r\n            <div className=\"relative w-full max-w-sm bg-background rounded-3xl p-6 shadow-2xl animate-in fade-in zoom-in-95 duration-200 border border-border\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                    <h3 className=\"text-lg font-bold\">Share</h3>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-muted rounded-full transition-colors\">\r\n                        <X className=\"w-5 h-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"space-y-3\">\r\n                    <button\r\n                        onClick={handleShare}\r\n                        className=\"w-full flex items-center gap-4 p-4 rounded-2xl bg-muted/50 hover:bg-muted transition-colors text-left\"\r\n                    >\r\n                        <div className=\"w-10 h-10 rounded-full bg-blue-500/10 flex items-center justify-center text-blue-500\">\r\n                            <Share2 className=\"w-5 h-5\" />\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                            <div className=\"font-bold\">Share via...</div>\r\n                            <div className=\"text-xs text-muted-foreground\">Send to other apps</div>\r\n                        </div>\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={handleCopy}\r\n                        className=\"w-full flex items-center gap-4 p-4 rounded-2xl bg-muted/50 hover:bg-muted transition-colors text-left\"\r\n                    >\r\n                        <div className=\"w-10 h-10 rounded-full bg-green-500/10 flex items-center justify-center text-green-500\">\r\n                            <Copy className=\"w-5 h-5\" />\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                            <div className=\"font-bold\">{copied ? \"Copied!\" : \"Copy Link\"}</div>\r\n                            <div className=\"text-xs text-muted-foreground\">{url}</div>\r\n                        </div>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\dashboard\\AddPortfolioItemModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Upload' is defined but never used.","line":4,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":19},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":117,"column":41,"nodeType":"JSXOpeningElement","endLine":117,"endColumn":118}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { X, Upload, Image as ImageIcon, Plus } from \"lucide-react\";\r\nimport { useState, useRef } from \"react\";\r\nimport { supabase } from \"@/lib/supabase/client\";\r\nimport { useUser } from \"@/context/UserContext\";\r\n\r\ninterface AddPortfolioItemModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSuccess: () => void;\r\n}\r\n\r\nexport function AddPortfolioItemModal({ isOpen, onClose, onSuccess }: AddPortfolioItemModalProps) {\r\n    const { user } = useUser();\r\n    const [title, setTitle] = useState(\"\");\r\n    const [description, setDescription] = useState(\"\");\r\n    const [section, setSection] = useState(\"General\");\r\n    const [imageFile, setImageFile] = useState<File | null>(null);\r\n    const [previewUrl, setPreviewUrl] = useState<string | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            setImageFile(file);\r\n            const url = URL.createObjectURL(file);\r\n            setPreviewUrl(url);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!user || !imageFile || !title) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            // 1. Upload Image\r\n            const fileExt = imageFile.name.split('.').pop();\r\n            const fileName = `${user.id}-${Math.random()}.${fileExt}`;\r\n            const filePath = `${fileName}`;\r\n\r\n            const { error: uploadError } = await supabase.storage\r\n                .from('portfolio')\r\n                .upload(filePath, imageFile);\r\n\r\n            if (uploadError) throw uploadError;\r\n\r\n            const { data: { publicUrl } } = supabase.storage\r\n                .from('portfolio')\r\n                .getPublicUrl(filePath);\r\n\r\n            // 2. Insert Record\r\n            const { error: insertError } = await supabase\r\n                .from('portfolio_items')\r\n                .insert({\r\n                    user_id: user.id,\r\n                    title,\r\n                    description,\r\n                    section,\r\n                    image_url: publicUrl\r\n                });\r\n\r\n            if (insertError) throw insertError;\r\n\r\n            onSuccess();\r\n            onClose();\r\n            // Reset form\r\n            setTitle(\"\");\r\n            setDescription(\"\");\r\n            setSection(\"General\");\r\n            setImageFile(null);\r\n            setPreviewUrl(null);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error adding portfolio item:\", error);\r\n            alert(\"Failed to add project. Please try again.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={onClose}\r\n                        className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60]\"\r\n                    />\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        className=\"fixed z-[70] left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-card border border-border rounded-3xl shadow-2xl overflow-hidden\"\r\n                    >\r\n                        <div className=\"p-6 border-b border-border flex justify-between items-center bg-muted/30\">\r\n                            <h2 className=\"text-xl font-bold text-foreground\">Add New Project</h2>\r\n                            <button onClick={onClose} className=\"p-2 rounded-full hover:bg-muted text-muted-foreground hover:text-foreground\">\r\n                                <X className=\"w-5 h-5\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\r\n                            {/* Image Upload */}\r\n                            <div\r\n                                onClick={() => fileInputRef.current?.click()}\r\n                                className=\"aspect-video bg-muted/50 border-2 border-dashed border-border rounded-xl flex flex-col items-center justify-center cursor-pointer hover:border-primary/50 hover:bg-muted transition-all relative overflow-hidden group\"\r\n                            >\r\n                                {previewUrl ? (\r\n                                    <>\r\n                                        <img src={previewUrl} alt=\"Preview\" className=\"w-full h-full object-cover\" />\r\n                                        <div className=\"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                            <span className=\"text-white font-medium\">Change Image</span>\r\n                                        </div>\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <ImageIcon className=\"w-8 h-8 text-muted-foreground mb-2\" />\r\n                                        <span className=\"text-sm text-muted-foreground font-medium\">Click to upload image</span>\r\n                                    </>\r\n                                )}\r\n                                <input\r\n                                    type=\"file\"\r\n                                    ref={fileInputRef}\r\n                                    onChange={handleFileChange}\r\n                                    className=\"hidden\"\r\n                                    accept=\"image/*\"\r\n                                    required={!previewUrl}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-sm font-medium text-muted-foreground\">Project Title</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={title}\r\n                                    onChange={(e) => setTitle(e.target.value)}\r\n                                    className=\"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:border-primary\"\r\n                                    placeholder=\"e.g. Neon Cyberpunk Character\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-sm font-medium text-muted-foreground\">Section (Optional)</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={section}\r\n                                    onChange={(e) => setSection(e.target.value)}\r\n                                    className=\"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:border-primary\"\r\n                                    placeholder=\"e.g. Character Design\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-sm font-medium text-muted-foreground\">Description (Optional)</label>\r\n                                <textarea\r\n                                    value={description}\r\n                                    onChange={(e) => setDescription(e.target.value)}\r\n                                    className=\"w-full bg-background border border-border rounded-lg px-3 py-2 text-foreground focus:outline-none focus:border-primary resize-none h-20\"\r\n                                    placeholder=\"Brief description...\"\r\n                                />\r\n                            </div>\r\n\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={loading}\r\n                                className=\"w-full py-3 bg-primary text-primary-foreground rounded-xl font-bold shadow-lg hover:bg-primary/90 transition-all flex items-center justify-center gap-2 disabled:opacity-50\"\r\n                            >\r\n                                {loading ? (\r\n                                    <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                                ) : (\r\n                                    <>\r\n                                        <Plus className=\"w-5 h-5\" />\r\n                                        Add Project\r\n                                    </>\r\n                                )}\r\n                            </button>\r\n                        </form>\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\dashboard\\CartModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'clsx' is defined but never used.","line":5,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { X, ShoppingBag, Trash2, CreditCard } from \"lucide-react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface CartModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nexport function CartModal({ isOpen, onClose }: CartModalProps) {\r\n    // Mock Cart Items\r\n    const cartItems = [\r\n        { id: 1, title: \"Cyberpunk Overlay Pack\", price: 25.00, image: \"bg-cyan-500\" },\r\n        { id: 2, title: \"Twitch Panel Bundle\", price: 10.00, image: \"bg-purple-500\" },\r\n    ];\r\n\r\n    const total = cartItems.reduce((acc, item) => acc + item.price, 0);\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    {/* Backdrop */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={onClose}\r\n                        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50\"\r\n                    />\r\n\r\n                    {/* Modal */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0, x: \"100%\" }}\r\n                        animate={{ opacity: 1, x: 0 }}\r\n                        exit={{ opacity: 0, x: \"100%\" }}\r\n                        transition={{ type: \"spring\", damping: 25, stiffness: 200 }}\r\n                        className=\"fixed inset-y-0 right-0 w-full max-w-md bg-background border-l border-border shadow-2xl z-50 flex flex-col\"\r\n                    >\r\n                        {/* Header */}\r\n                        <div className=\"p-6 border-b border-border flex items-center justify-between bg-card/50 backdrop-blur-xl\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"p-2 bg-primary/10 rounded-xl\">\r\n                                    <ShoppingBag className=\"w-5 h-5 text-primary\" />\r\n                                </div>\r\n                                <h2 className=\"text-xl font-bold text-foreground\">Your Cart</h2>\r\n                            </div>\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"p-2 hover:bg-muted rounded-full transition-colors text-muted-foreground hover:text-foreground\"\r\n                            >\r\n                                <X className=\"w-5 h-5\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Cart Items */}\r\n                        <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\r\n                            {cartItems.length > 0 ? (\r\n                                cartItems.map((item) => (\r\n                                    <div key={item.id} className=\"flex gap-4 p-4 bg-card rounded-2xl border border-border shadow-sm hover:shadow-md transition-all group\">\r\n                                        <div className={`w-20 h-20 rounded-xl ${item.image} opacity-80 flex items-center justify-center shrink-0`}>\r\n                                            <ShoppingBag className=\"text-white/50 w-8 h-8\" />\r\n                                        </div>\r\n                                        <div className=\"flex-1 flex flex-col justify-between\">\r\n                                            <div>\r\n                                                <h3 className=\"font-bold text-foreground line-clamp-1\">{item.title}</h3>\r\n                                                <p className=\"text-sm text-muted-foreground\">Digital Product</p>\r\n                                            </div>\r\n                                            <div className=\"flex items-center justify-between\">\r\n                                                <span className=\"font-bold text-primary\">${item.price.toFixed(2)}</span>\r\n                                                <button className=\"p-2 text-muted-foreground hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-colors\">\r\n                                                    <Trash2 className=\"w-4 h-4\" />\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))\r\n                            ) : (\r\n                                <div className=\"h-full flex flex-col items-center justify-center text-center space-y-4 text-muted-foreground\">\r\n                                    <ShoppingBag className=\"w-16 h-16 opacity-20\" />\r\n                                    <p>Your cart is empty.</p>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Footer */}\r\n                        <div className=\"p-6 border-t border-border bg-card/50 backdrop-blur-xl space-y-4\">\r\n                            <div className=\"flex items-center justify-between text-lg font-bold\">\r\n                                <span className=\"text-muted-foreground\">Total</span>\r\n                                <span className=\"text-foreground\">${total.toFixed(2)}</span>\r\n                            </div>\r\n                            <button className=\"w-full py-4 bg-primary text-primary-foreground font-bold rounded-xl hover:bg-primary/90 transition-all shadow-lg shadow-primary/25 flex items-center justify-center gap-2 active:scale-[0.98]\">\r\n                                <CreditCard className=\"w-5 h-5\" />\r\n                                Checkout\r\n                            </button>\r\n                        </div>\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\dashboard\\CreateInvoiceModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Plus' is defined but never used.","line":4,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'clsx' is defined but never used.","line":6,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setStep' is assigned a value but never used.","line":14,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":25},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":61,"column":80,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3112,3322],"text":"\r\n                                This feature is currently being built. Soon you&apos;ll be able to create professional invoices, set milestones, and track payments directly from here.\r\n                            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3112,3322],"text":"\r\n                                This feature is currently being built. Soon you&lsquo;ll be able to create professional invoices, set milestones, and track payments directly from here.\r\n                            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3112,3322],"text":"\r\n                                This feature is currently being built. Soon you&#39;ll be able to create professional invoices, set milestones, and track payments directly from here.\r\n                            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3112,3322],"text":"\r\n                                This feature is currently being built. Soon you&rsquo;ll be able to create professional invoices, set milestones, and track payments directly from here.\r\n                            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { X, FileText, Plus, DollarSign, Calendar } from \"lucide-react\";\r\nimport { useState } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface CreateInvoiceModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nexport function CreateInvoiceModal({ isOpen, onClose }: CreateInvoiceModalProps) {\r\n    const [step, setStep] = useState(1);\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    {/* Backdrop */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={onClose}\r\n                        className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60]\"\r\n                    />\r\n\r\n                    {/* Modal */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        transition={{ type: \"spring\", duration: 0.5 }}\r\n                        className=\"fixed z-[70] left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[95%] md:w-full max-w-2xl bg-card border border-border rounded-3xl shadow-2xl overflow-hidden max-h-[90vh] flex flex-col\"\r\n                    >\r\n                        {/* Header */}\r\n                        <div className=\"p-6 border-b border-border flex justify-between items-center bg-muted/30\">\r\n                            <div>\r\n                                <h2 className=\"text-xl font-bold text-foreground flex items-center gap-2\">\r\n                                    <FileText className=\"w-5 h-5 text-primary\" />\r\n                                    Create New Invoice\r\n                                </h2>\r\n                                <p className=\"text-sm text-muted-foreground mt-1\">Step {step} of 3: Client Details</p>\r\n                            </div>\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"p-2 rounded-full hover:bg-muted text-muted-foreground hover:text-foreground transition-colors\"\r\n                            >\r\n                                <X className=\"w-5 h-5\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Content Placeholder */}\r\n                        <div className=\"flex-1 overflow-y-auto p-8 md:p-12 flex flex-col items-center justify-center text-center space-y-6\">\r\n                            <div className=\"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mb-2\">\r\n                                <FileText className=\"w-10 h-10 text-primary\" />\r\n                            </div>\r\n                            <h3 className=\"text-2xl font-bold text-foreground\">Invoice Builder</h3>\r\n                            <p className=\"text-muted-foreground max-w-md\">\r\n                                This feature is currently being built. Soon you'll be able to create professional invoices, set milestones, and track payments directly from here.\r\n                            </p>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-md mt-8\">\r\n                                <div className=\"p-4 bg-muted/50 rounded-xl border border-border flex flex-col items-center gap-2\">\r\n                                    <DollarSign className=\"w-6 h-6 text-green-500\" />\r\n                                    <span className=\"font-medium text-foreground\">Milestone Payments</span>\r\n                                </div>\r\n                                <div className=\"p-4 bg-muted/50 rounded-xl border border-border flex flex-col items-center gap-2\">\r\n                                    <Calendar className=\"w-6 h-6 text-blue-500\" />\r\n                                    <span className=\"font-medium text-foreground\">Recurring Billing</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Footer */}\r\n                        <div className=\"p-6 border-t border-border bg-muted/30 flex flex-col md:flex-row justify-end gap-3\">\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"w-full md:w-auto px-5 py-2.5 rounded-xl font-medium text-muted-foreground hover:text-foreground hover:bg-muted transition-colors order-2 md:order-1\"\r\n                            >\r\n                                Close\r\n                            </button>\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"w-full md:w-auto px-5 py-2.5 bg-primary text-primary-foreground rounded-xl font-bold shadow-lg shadow-primary/20 hover:bg-primary/90 transition-all order-1 md:order-2\"\r\n                            >\r\n                                Notify Me When Ready\r\n                            </button>\r\n                        </div>\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\dashboard\\CreateProductModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\dashboard\\EditProfileModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LinkIcon' is defined but never used.","line":4,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Mail' is defined but never used.","line":4,"column":87,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":91},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":111,"column":57,"nodeType":"JSXOpeningElement","endLine":111,"endColumn":141},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":136,"column":53,"nodeType":"JSXOpeningElement","endLine":136,"endColumn":137}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { X, Camera, Save, User, MapPin, Link as LinkIcon, Twitter, Instagram, Twitch, Mail } from \"lucide-react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { useUser } from \"@/context/UserContext\";\r\nimport { supabase } from \"@/lib/supabase/client\";\r\n\r\ninterface EditProfileModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nexport function EditProfileModal({ isOpen, onClose }: EditProfileModalProps) {\r\n    const { profile, user, refreshProfile, uploadAvatar, uploadBanner } = useUser();\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Form States\r\n    const [fullName, setFullName] = useState(\"\");\r\n    const [username, setUsername] = useState(\"\");\r\n    const [bio, setBio] = useState(\"\");\r\n    const [location, setLocation] = useState(\"\");\r\n    const [twitter, setTwitter] = useState(\"\");\r\n    const [instagram, setInstagram] = useState(\"\");\r\n    const [twitch, setTwitch] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        if (profile) {\r\n            setFullName(profile.full_name || \"\");\r\n            setUsername(profile.username || \"\");\r\n            setBio(profile.bio || \"\");\r\n            setLocation(profile.location || \"\");\r\n            setTwitter(profile.social_links?.twitter || \"\");\r\n            setInstagram(profile.social_links?.instagram || \"\");\r\n            setTwitch(profile.social_links?.twitch || \"\");\r\n        }\r\n    }, [profile, isOpen]);\r\n\r\n    const handleSave = async () => {\r\n        if (!user) return;\r\n        setLoading(true);\r\n\r\n        try {\r\n            const updates = {\r\n                id: user.id,\r\n                full_name: fullName,\r\n                username: username,\r\n                bio: bio,\r\n                location: location,\r\n                social_links: {\r\n                    twitter,\r\n                    instagram,\r\n                    twitch\r\n                },\r\n                updated_at: new Date().toISOString(),\r\n            };\r\n\r\n            const { error } = await supabase\r\n                .from('profiles')\r\n                .upsert(updates);\r\n\r\n            if (error) throw error;\r\n\r\n            await refreshProfile();\r\n            onClose();\r\n        } catch (error) {\r\n            console.error(\"Error updating profile:\", error);\r\n            alert(\"Failed to update profile. Please try again.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={onClose}\r\n                        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60]\"\r\n                    />\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        className=\"fixed z-[70] left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl bg-card border border-border rounded-3xl shadow-2xl overflow-hidden max-h-[90vh] flex flex-col\"\r\n                    >\r\n                        {/* Header */}\r\n                        <div className=\"p-6 border-b border-border flex justify-between items-center bg-muted/30 shrink-0\">\r\n                            <h2 className=\"text-xl font-bold text-foreground\">Edit Profile</h2>\r\n                            <button onClick={onClose} className=\"p-2 rounded-full hover:bg-muted text-muted-foreground hover:text-foreground transition-colors\">\r\n                                <X className=\"w-5 h-5\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Content */}\r\n                        <div className=\"p-6 overflow-y-auto custom-scrollbar flex-1\">\r\n                            <div className=\"space-y-6\">\r\n                                {/* Images */}\r\n                                <div className=\"space-y-4\">\r\n                                    <h3 className=\"text-sm font-bold text-muted-foreground uppercase tracking-wider\">Images</h3>\r\n                                    <div className=\"grid grid-cols-2 gap-4\">\r\n                                        <div className=\"space-y-2\">\r\n                                            <label className=\"text-sm font-medium text-foreground\">Profile Picture</label>\r\n                                            <div className=\"flex items-center gap-4\">\r\n                                                <div className=\"w-16 h-16 rounded-full bg-muted overflow-hidden border border-border\">\r\n                                                    {profile?.avatar_url ? (\r\n                                                        <img src={profile.avatar_url} alt=\"Avatar\" className=\"w-full h-full object-cover\" />\r\n                                                    ) : (\r\n                                                        <div className=\"w-full h-full flex items-center justify-center\">\r\n                                                            <User className=\"w-6 h-6 text-muted-foreground\" />\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                                <label className=\"cursor-pointer px-4 py-2 bg-muted hover:bg-muted/80 rounded-lg text-xs font-bold transition-colors flex items-center gap-2\">\r\n                                                    <Camera className=\"w-4 h-4\" />\r\n                                                    Change\r\n                                                    <input type=\"file\" className=\"hidden\" accept=\"image/*\" onChange={async (e) => {\r\n                                                        const file = e.target.files?.[0];\r\n                                                        if (file) {\r\n                                                            setLoading(true);\r\n                                                            await uploadAvatar(file);\r\n                                                            setLoading(false);\r\n                                                        }\r\n                                                    }} />\r\n                                                </label>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"space-y-2\">\r\n                                            <label className=\"text-sm font-medium text-foreground\">Banner</label>\r\n                                            <div className=\"h-16 w-full rounded-xl bg-muted overflow-hidden border border-border relative group\">\r\n                                                {profile?.banner_url ? (\r\n                                                    <img src={profile.banner_url} alt=\"Banner\" className=\"w-full h-full object-cover\" />\r\n                                                ) : (\r\n                                                    <div className=\"w-full h-full flex items-center justify-center bg-muted/50\">\r\n                                                        <span className=\"text-xs text-muted-foreground\">No banner</span>\r\n                                                    </div>\r\n                                                )}\r\n                                                <label className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer\">\r\n                                                    <Camera className=\"w-5 h-5 text-white\" />\r\n                                                    <input type=\"file\" className=\"hidden\" accept=\"image/*\" onChange={async (e) => {\r\n                                                        const file = e.target.files?.[0];\r\n                                                        if (file) {\r\n                                                            setLoading(true);\r\n                                                            await uploadBanner(file);\r\n                                                            setLoading(false);\r\n                                                        }\r\n                                                    }} />\r\n                                                </label>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Basic Info */}\r\n                                <div className=\"space-y-4\">\r\n                                    <h3 className=\"text-sm font-bold text-muted-foreground uppercase tracking-wider\">Basic Info</h3>\r\n\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                        <div className=\"space-y-2\">\r\n                                            <label className=\"text-sm font-medium text-foreground\">Full Name</label>\r\n                                            <div className=\"relative\">\r\n                                                <User className=\"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground\" />\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    value={fullName}\r\n                                                    onChange={(e) => setFullName(e.target.value)}\r\n                                                    className=\"w-full bg-muted/50 border border-border rounded-xl pl-9 pr-4 py-2.5 text-sm focus:outline-none focus:border-primary transition-colors\"\r\n                                                    placeholder=\"Your Name\"\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"space-y-2\">\r\n                                            <label className=\"text-sm font-medium text-foreground\">Username</label>\r\n                                            <div className=\"relative\">\r\n                                                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground font-bold\">@</span>\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    value={username}\r\n                                                    onChange={(e) => setUsername(e.target.value)}\r\n                                                    className=\"w-full bg-muted/50 border border-border rounded-xl pl-8 pr-4 py-2.5 text-sm focus:outline-none focus:border-primary transition-colors\"\r\n                                                    placeholder=\"username\"\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-sm font-medium text-foreground\">Bio</label>\r\n                                        <textarea\r\n                                            value={bio}\r\n                                            onChange={(e) => setBio(e.target.value)}\r\n                                            className=\"w-full bg-muted/50 border border-border rounded-xl p-4 text-sm focus:outline-none focus:border-primary transition-colors min-h-[100px] resize-none\"\r\n                                            placeholder=\"Tell us about yourself...\"\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-sm font-medium text-foreground\">Location</label>\r\n                                        <div className=\"relative\">\r\n                                            <MapPin className=\"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground\" />\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={location}\r\n                                                onChange={(e) => setLocation(e.target.value)}\r\n                                                className=\"w-full bg-muted/50 border border-border rounded-xl pl-9 pr-4 py-2.5 text-sm focus:outline-none focus:border-primary transition-colors\"\r\n                                                placeholder=\"City, Country\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Social Links */}\r\n                                <div className=\"space-y-4 pt-4 border-t border-border\">\r\n                                    <h3 className=\"text-sm font-bold text-muted-foreground uppercase tracking-wider\">Social Links</h3>\r\n\r\n                                    <div className=\"space-y-3\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div className=\"w-10 h-10 rounded-lg bg-[#1DA1F2]/10 flex items-center justify-center text-[#1DA1F2]\">\r\n                                                <Twitter className=\"w-5 h-5\" />\r\n                                            </div>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={twitter}\r\n                                                onChange={(e) => setTwitter(e.target.value)}\r\n                                                className=\"flex-1 bg-muted/50 border border-border rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:border-primary transition-colors\"\r\n                                                placeholder=\"Twitter Username\"\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div className=\"w-10 h-10 rounded-lg bg-[#E1306C]/10 flex items-center justify-center text-[#E1306C]\">\r\n                                                <Instagram className=\"w-5 h-5\" />\r\n                                            </div>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={instagram}\r\n                                                onChange={(e) => setInstagram(e.target.value)}\r\n                                                className=\"flex-1 bg-muted/50 border border-border rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:border-primary transition-colors\"\r\n                                                placeholder=\"Instagram Username\"\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div className=\"w-10 h-10 rounded-lg bg-[#9146FF]/10 flex items-center justify-center text-[#9146FF]\">\r\n                                                <Twitch className=\"w-5 h-5\" />\r\n                                            </div>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={twitch}\r\n                                                onChange={(e) => setTwitch(e.target.value)}\r\n                                                className=\"flex-1 bg-muted/50 border border-border rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:border-primary transition-colors\"\r\n                                                placeholder=\"Twitch Username\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Footer */}\r\n                        <div className=\"p-6 border-t border-border bg-muted/30 shrink-0 flex justify-end gap-3\">\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"px-6 py-2.5 rounded-xl font-bold text-muted-foreground hover:bg-muted transition-colors\"\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                            <button\r\n                                onClick={handleSave}\r\n                                disabled={loading}\r\n                                className=\"px-8 py-2.5 bg-primary text-primary-foreground rounded-xl font-bold hover:bg-primary/90 transition-colors flex items-center gap-2 disabled:opacity-50\"\r\n                            >\r\n                                {loading ? (\r\n                                    <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                                ) : (\r\n                                    <>\r\n                                        <Save className=\"w-4 h-4\" />\r\n                                        Save Changes\r\n                                    </>\r\n                                )}\r\n                            </button>\r\n                        </div>\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\dashboard\\EditServiceModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'clsx' is defined but never used.","line":7,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":12},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[370,373],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[370,373],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[407,410],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[407,410],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":114,"column":33,"nodeType":"JSXOpeningElement","endLine":114,"endColumn":114}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { X, Loader2, Image as ImageIcon, Upload } from \"lucide-react\";\r\nimport { supabase } from \"@/lib/supabase/client\";\r\nimport { useToast } from \"@/context/ToastContext\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface EditServiceModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    service: any;\r\n    onUpdate: (updatedService: any) => void;\r\n}\r\n\r\nexport function EditServiceModal({ isOpen, onClose, service, onUpdate }: EditServiceModalProps) {\r\n    const { toast } = useToast();\r\n    const [loading, setLoading] = useState(false);\r\n    const [title, setTitle] = useState(\"\");\r\n    const [description, setDescription] = useState(\"\");\r\n    const [price, setPrice] = useState(\"\");\r\n    const [thumbnailUrl, setThumbnailUrl] = useState<string | null>(null);\r\n    const [thumbnailFile, setThumbnailFile] = useState<File | null>(null);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    useEffect(() => {\r\n        if (service) {\r\n            setTitle(service.title || \"\");\r\n            setDescription(service.description || \"\");\r\n            setPrice(service.price?.toString() || \"\");\r\n            setThumbnailUrl(service.thumbnail_url || null);\r\n        }\r\n    }, [service]);\r\n\r\n    const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            setThumbnailFile(file);\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                setThumbnailUrl(reader.result as string);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        try {\r\n            let finalThumbnailUrl = service.thumbnail_url;\r\n\r\n            if (thumbnailFile) {\r\n                const fileExt = thumbnailFile.name.split('.').pop();\r\n                const fileName = `${Math.random()}.${fileExt}`;\r\n                const filePath = `service-thumbnails/${fileName}`;\r\n\r\n                const { error: uploadError } = await supabase.storage\r\n                    .from('public_previews')\r\n                    .upload(filePath, thumbnailFile);\r\n\r\n                if (uploadError) throw uploadError;\r\n\r\n                const { data } = supabase.storage.from('public_previews').getPublicUrl(filePath);\r\n                finalThumbnailUrl = data.publicUrl;\r\n            }\r\n\r\n            const { data, error } = await supabase\r\n                .from('services')\r\n                .update({\r\n                    title,\r\n                    description,\r\n                    price: parseFloat(price),\r\n                    thumbnail_url: finalThumbnailUrl\r\n                })\r\n                .eq('id', service.id)\r\n                .select()\r\n                .single();\r\n\r\n            if (error) throw error;\r\n\r\n            toast(\"Service updated successfully\", \"success\");\r\n            onUpdate(data);\r\n            onClose();\r\n        } catch (error) {\r\n            console.error(\"Error updating service:\", error);\r\n            toast(\"Failed to update service\", \"error\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200\">\r\n            <div className=\"bg-card w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200\">\r\n                <div className=\"p-6 border-b border-border/50 flex items-center justify-between\">\r\n                    <h2 className=\"text-2xl font-black\">Edit Service</h2>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-muted rounded-full transition-colors\">\r\n                        <X className=\"w-6 h-6\" />\r\n                    </button>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n                    {/* Thumbnail Upload */}\r\n                    <div className=\"flex justify-center\">\r\n                        <div\r\n                            onClick={() => fileInputRef.current?.click()}\r\n                            className=\"relative w-full h-48 bg-muted/30 rounded-3xl border-2 border-dashed border-border/50 hover:border-primary/50 hover:bg-muted/50 transition-all cursor-pointer flex flex-col items-center justify-center group overflow-hidden\"\r\n                        >\r\n                            {thumbnailUrl ? (\r\n                                <img src={thumbnailUrl} alt=\"Thumbnail\" className=\"w-full h-full object-cover\" />\r\n                            ) : (\r\n                                <>\r\n                                    <div className=\"w-12 h-12 bg-background rounded-full flex items-center justify-center mb-2 shadow-sm group-hover:scale-110 transition-transform\">\r\n                                        <ImageIcon className=\"w-6 h-6 text-muted-foreground\" />\r\n                                    </div>\r\n                                    <span className=\"text-sm font-bold text-muted-foreground\">Upload Thumbnail</span>\r\n                                </>\r\n                            )}\r\n                            <div className=\"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                <Upload className=\"w-8 h-8 text-white\" />\r\n                            </div>\r\n                            <input\r\n                                type=\"file\"\r\n                                ref={fileInputRef}\r\n                                onChange={handleFileSelect}\r\n                                className=\"hidden\"\r\n                                accept=\"image/*\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-bold text-muted-foreground ml-1\">Title</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={title}\r\n                                onChange={(e) => setTitle(e.target.value)}\r\n                                className=\"w-full bg-muted/30 border-transparent focus:border-primary focus:bg-background rounded-xl px-4 py-3 font-bold transition-all\"\r\n                                placeholder=\"Service Title\"\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-bold text-muted-foreground ml-1\">Price ($)</label>\r\n                            <input\r\n                                type=\"number\"\r\n                                value={price}\r\n                                onChange={(e) => setPrice(e.target.value)}\r\n                                className=\"w-full bg-muted/30 border-transparent focus:border-primary focus:bg-background rounded-xl px-4 py-3 font-bold transition-all\"\r\n                                placeholder=\"0.00\"\r\n                                min=\"0\"\r\n                                step=\"0.01\"\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-bold text-muted-foreground ml-1\">Description</label>\r\n                            <textarea\r\n                                value={description}\r\n                                onChange={(e) => setDescription(e.target.value)}\r\n                                className=\"w-full bg-muted/30 border-transparent focus:border-primary focus:bg-background rounded-xl px-4 py-3 font-medium transition-all min-h-[100px] resize-none\"\r\n                                placeholder=\"Describe your service...\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"pt-4\">\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={loading}\r\n                            className=\"w-full py-4 bg-primary text-primary-foreground rounded-xl font-bold text-lg hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-primary/20 flex items-center justify-center gap-2\"\r\n                        >\r\n                            {loading ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : \"Save Changes\"}\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\dashboard\\GoalsWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\dashboard\\MessagesWidget.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\dashboard\\MessagesWidget.tsx:169:13\n  167 |     useEffect(() => {\n  168 |         if (activeConversation) {\n> 169 |             fetchMessages(activeConversation.id);\n      |             ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  170 |             const channel = supabase\n  171 |                 .channel(`conversation:${activeConversation.id}`)\n  172 |                 .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'messages', filter: `conversation_id=eq.${activeConversation.id}` }, (payload) => {","line":169,"column":13,"nodeType":null,"endLine":169,"endColumn":26},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\dashboard\\MessagesWidget.tsx:189:17\n  187 |             const existingConvo = conversations.find(c => c.other_user?.id === chatWithUserId);\n  188 |             if (existingConvo) {\n> 189 |                 setActiveConversation(existingConvo);\n      |                 ^^^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  190 |             } else {\n  191 |                 startConversation(chatWithUserId);\n  192 |             }","line":189,"column":17,"nodeType":null,"endLine":189,"endColumn":38}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport { User, ChevronRight, Send, Plus, ArrowLeft, Search, MessageSquare } from \"lucide-react\";\r\nimport clsx from \"clsx\";\r\nimport { supabase } from \"@/lib/supabase/client\";\r\nimport { useUser } from \"@/context/UserContext\";\r\nimport Image from \"next/image\";\r\n\r\ninterface Profile {\r\n    id: string;\r\n    username: string;\r\n    full_name: string;\r\n    avatar_url: string;\r\n}\r\n\r\ninterface Message {\r\n    id: string;\r\n    content: string;\r\n    sender_id: string;\r\n    created_at: string;\r\n}\r\n\r\ninterface Conversation {\r\n    id: string;\r\n    other_user: Profile | null;\r\n    last_message: Message | null;\r\n}\r\n\r\nexport function MessagesWidget() {\r\n    const { user } = useUser();\r\n    const searchParams = useSearchParams();\r\n    const chatWithUserId = searchParams.get(\"chat_with\");\r\n\r\n    const [conversations, setConversations] = useState<Conversation[]>([]);\r\n    const [activeConversation, setActiveConversation] = useState<Conversation | null>(null);\r\n    const [messages, setMessages] = useState<Message[]>([]);\r\n    const [newMessage, setNewMessage] = useState(\"\");\r\n    const [loading, setLoading] = useState(true);\r\n    const [isNewChatOpen, setIsNewChatOpen] = useState(false);\r\n    const [searchUsername, setSearchUsername] = useState(\"\");\r\n    const [searchResults, setSearchResults] = useState<Profile[]>([]);\r\n\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    };\r\n\r\n    const fetchConversations = useCallback(async () => {\r\n        if (!user) return;\r\n        // setLoading(true); // Removed to avoid lint error\r\n\r\n        const { data: myConvos, error: myConvosError } = await supabase\r\n            .from('conversation_participants')\r\n            .select('conversation_id')\r\n            .eq('user_id', user.id);\r\n\r\n        if (myConvosError || !myConvos || myConvos.length === 0) {\r\n            setConversations([]);\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const conversationIds = myConvos.map(c => c.conversation_id);\r\n\r\n        const { data: participants, error: participantsError } = await supabase\r\n            .from('conversation_participants')\r\n            .select('conversation_id, user_id')\r\n            .in('conversation_id', conversationIds)\r\n            .neq('user_id', user.id);\r\n\r\n        if (participantsError || !participants) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const userIds = participants.map(p => p.user_id);\r\n        const { data: profiles } = await supabase\r\n            .from('profiles')\r\n            .select('id, username, full_name, avatar_url')\r\n            .in('id', userIds);\r\n\r\n        const loadedConversations: Conversation[] = participants.map(p => {\r\n            const profile = profiles?.find(prof => prof.id === p.user_id) || null;\r\n            return {\r\n                id: p.conversation_id,\r\n                other_user: profile,\r\n                last_message: null\r\n            };\r\n        });\r\n\r\n        setConversations(loadedConversations);\r\n        setLoading(false);\r\n    }, [user]);\r\n\r\n    const fetchMessages = useCallback(async (conversationId: string) => {\r\n        const { data } = await supabase\r\n            .from('messages')\r\n            .select('*')\r\n            .eq('conversation_id', conversationId)\r\n            .order('created_at', { ascending: true });\r\n\r\n        if (data) {\r\n            setMessages(data);\r\n            setTimeout(scrollToBottom, 100);\r\n        }\r\n    }, []);\r\n\r\n    const handleSearchUsers = async () => {\r\n        if (!searchUsername.trim()) return;\r\n\r\n        const { data } = await supabase\r\n            .from('profiles')\r\n            .select('id, username, full_name, avatar_url')\r\n            .ilike('username', `%${searchUsername}%`)\r\n            .limit(5);\r\n\r\n        if (data) {\r\n            setSearchResults(data);\r\n        }\r\n    };\r\n\r\n    const startConversation = useCallback(async (otherUserId: string) => {\r\n        if (!user) return;\r\n\r\n        const { data: convo } = await supabase\r\n            .from('conversations')\r\n            .insert({})\r\n            .select()\r\n            .single();\r\n\r\n        if (convo) {\r\n            await supabase.from('conversation_participants').insert([\r\n                { conversation_id: convo.id, user_id: user.id },\r\n                { conversation_id: convo.id, user_id: otherUserId }\r\n            ]);\r\n\r\n            await fetchConversations();\r\n            const otherUser = searchResults.find(r => r.id === otherUserId);\r\n            let targetUser = otherUser || null;\r\n\r\n            if (!targetUser) {\r\n                const { data: profile } = await supabase.from('profiles').select('*').eq('id', otherUserId).single();\r\n                if (profile) targetUser = profile;\r\n            }\r\n\r\n            setActiveConversation({\r\n                id: convo.id,\r\n                other_user: targetUser,\r\n                last_message: null\r\n            });\r\n            setIsNewChatOpen(false);\r\n        }\r\n    }, [user, fetchConversations, searchResults]);\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            const timer = setTimeout(() => {\r\n                fetchConversations();\r\n            }, 0);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [user, fetchConversations]);\r\n\r\n    useEffect(() => {\r\n        if (activeConversation) {\r\n            fetchMessages(activeConversation.id);\r\n            const channel = supabase\r\n                .channel(`conversation:${activeConversation.id}`)\r\n                .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'messages', filter: `conversation_id=eq.${activeConversation.id}` }, (payload) => {\r\n                    setMessages(prev => [...prev, payload.new as Message]);\r\n                    scrollToBottom();\r\n                })\r\n                .subscribe();\r\n\r\n            return () => {\r\n                supabase.removeChannel(channel);\r\n            };\r\n        }\r\n    }, [activeConversation, fetchMessages]);\r\n\r\n    // Handle chat_with param\r\n    useEffect(() => {\r\n        if (user && chatWithUserId && !loading) {\r\n            const existingConvo = conversations.find(c => c.other_user?.id === chatWithUserId);\r\n            if (existingConvo) {\r\n                setActiveConversation(existingConvo);\r\n            } else {\r\n                startConversation(chatWithUserId);\r\n            }\r\n        }\r\n    }, [user, chatWithUserId, loading, conversations, startConversation]);\r\n\r\n    const handleSendMessage = async () => {\r\n        if (!newMessage.trim() || !activeConversation || !user) return;\r\n\r\n        const { error } = await supabase\r\n            .from('messages')\r\n            .insert({\r\n                conversation_id: activeConversation.id,\r\n                sender_id: user.id,\r\n                content: newMessage.trim()\r\n            });\r\n\r\n        if (!error) {\r\n            setNewMessage(\"\");\r\n        }\r\n    };\r\n\r\n    if (activeConversation) {\r\n        return (\r\n            <div className=\"w-full max-w-2xl mx-auto h-[85vh] md:h-[800px] flex flex-col bg-background md:bg-card md:border md:border-border md:rounded-[2.5rem] overflow-hidden md:shadow-2xl\">\r\n                {/* Chat Header */}\r\n                <div className=\"p-4 flex items-center gap-4 bg-background/80 backdrop-blur-md sticky top-0 z-10 border-b border-border\">\r\n                    <button onClick={() => setActiveConversation(null)} className=\"p-2 -ml-2 hover:bg-muted rounded-full transition-colors\">\r\n                        <ArrowLeft className=\"w-6 h-6 text-foreground\" />\r\n                    </button>\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"relative w-10 h-10 rounded-full bg-muted overflow-hidden border border-border\">\r\n                            {activeConversation.other_user?.avatar_url ? (\r\n                                <Image src={activeConversation.other_user.avatar_url} alt=\"Avatar\" fill className=\"object-cover\" />\r\n                            ) : (\r\n                                <div className=\"w-full h-full flex items-center justify-center\">\r\n                                    <User className=\"w-5 h-5 text-muted-foreground\" />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"font-bold text-foreground leading-tight\">{activeConversation.other_user?.full_name || \"Unknown User\"}</h3>\r\n                            <p className=\"text-xs text-muted-foreground font-medium\">@{activeConversation.other_user?.username}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Messages Area */}\r\n                <div className=\"flex-1 overflow-y-auto p-4 space-y-3 bg-muted/10\">\r\n                    {messages.map((msg) => {\r\n                        const isMe = msg.sender_id === user?.id;\r\n                        return (\r\n                            <div key={msg.id} className={clsx(\"flex\", isMe ? \"justify-end\" : \"justify-start\")}>\r\n                                <div className={clsx(\r\n                                    \"max-w-[80%] px-5 py-3 rounded-2xl text-sm font-medium leading-relaxed shadow-sm\",\r\n                                    isMe\r\n                                        ? \"bg-primary text-primary-foreground rounded-br-sm\"\r\n                                        : \"bg-card border border-border text-foreground rounded-bl-sm\"\r\n                                )}>\r\n                                    {msg.content}\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                    <div ref={messagesEndRef} />\r\n                </div>\r\n\r\n                {/* Input Area */}\r\n                <div className=\"p-4 bg-background border-t border-border\">\r\n                    <div className=\"flex gap-2 items-end bg-muted/30 p-2 rounded-3xl border border-transparent focus-within:border-primary/20 focus-within:bg-background transition-all\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={newMessage}\r\n                            onChange={(e) => setNewMessage(e.target.value)}\r\n                            onKeyDown={(e) => e.key === 'Enter' && handleSendMessage()}\r\n                            placeholder=\"Type a message...\"\r\n                            className=\"flex-1 bg-transparent border-none px-4 py-2 text-sm focus:ring-0 placeholder:text-muted-foreground/50 max-h-32\"\r\n                        />\r\n                        <button\r\n                            onClick={handleSendMessage}\r\n                            disabled={!newMessage.trim()}\r\n                            className=\"p-2 bg-primary text-primary-foreground rounded-full hover:scale-105 active:scale-95 transition-all disabled:opacity-50 disabled:hover:scale-100 shadow-md shadow-primary/20\"\r\n                        >\r\n                            <Send className=\"w-5 h-5 ml-0.5\" />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"w-full max-w-2xl mx-auto pb-24 md:pb-0\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between mb-8 px-2\">\r\n                <h1 className=\"text-3xl font-black text-foreground tracking-tight\">Messages</h1>\r\n                <button\r\n                    onClick={() => setIsNewChatOpen(!isNewChatOpen)}\r\n                    className={clsx(\r\n                        \"p-3 rounded-full transition-all shadow-lg\",\r\n                        isNewChatOpen ? \"bg-muted text-foreground rotate-45\" : \"bg-primary text-primary-foreground hover:scale-105\"\r\n                    )}\r\n                >\r\n                    <Plus className=\"w-6 h-6\" />\r\n                </button>\r\n            </div>\r\n\r\n            {/* New Chat Area */}\r\n            {isNewChatOpen && (\r\n                <div className=\"mb-8 p-5 bg-card border border-border rounded-[2rem] animate-in fade-in slide-in-from-top-4 shadow-xl shadow-black/5\">\r\n                    <div className=\"flex items-center gap-3 mb-4 bg-muted/30 p-3 rounded-2xl\">\r\n                        <Search className=\"w-5 h-5 text-muted-foreground ml-1\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            value={searchUsername}\r\n                            onChange={(e) => setSearchUsername(e.target.value)}\r\n                            placeholder=\"Search username...\"\r\n                            className=\"flex-1 bg-transparent border-none focus:ring-0 p-0 text-sm font-medium\"\r\n                            autoFocus\r\n                        />\r\n                        <button onClick={handleSearchUsers} className=\"px-4 py-1.5 bg-background rounded-xl font-bold text-xs shadow-sm hover:bg-muted transition-colors\">\r\n                            Find\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        {searchResults.length > 0 ? (\r\n                            searchResults.map(profile => (\r\n                                <button\r\n                                    key={profile.id}\r\n                                    onClick={() => startConversation(profile.id)}\r\n                                    className=\"w-full flex items-center gap-3 p-3 hover:bg-muted/50 rounded-2xl transition-colors text-left group\"\r\n                                >\r\n                                    <div className=\"relative w-10 h-10 rounded-full bg-muted overflow-hidden border border-border\">\r\n                                        {profile.avatar_url ? (\r\n                                            <Image src={profile.avatar_url} alt=\"Avatar\" fill className=\"object-cover\" />\r\n                                        ) : (\r\n                                            <div className=\"w-full h-full flex items-center justify-center\">\r\n                                                <User className=\"w-5 h-5 text-muted-foreground\" />\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                    <div>\r\n                                        <div className=\"font-bold text-sm text-foreground group-hover:text-primary transition-colors\">{profile.full_name}</div>\r\n                                        <div className=\"text-xs text-muted-foreground\">@{profile.username}</div>\r\n                                    </div>\r\n                                    <ChevronRight className=\"w-4 h-4 ml-auto text-muted-foreground/50\" />\r\n                                </button>\r\n                            ))\r\n                        ) : searchUsername && (\r\n                            <div className=\"text-center py-4 text-sm text-muted-foreground\">\r\n                                No users found\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Conversation List */}\r\n            <div className=\"space-y-3\">\r\n                {loading ? (\r\n                    <div className=\"text-center py-20 opacity-50\">\r\n                        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto\"></div>\r\n                    </div>\r\n                ) : conversations.length > 0 ? (\r\n                    conversations.map((convo) => (\r\n                        <div\r\n                            key={convo.id}\r\n                            onClick={() => setActiveConversation(convo)}\r\n                            className=\"bg-muted/30 hover:bg-muted/50 p-4 rounded-[2rem] flex items-center gap-4 transition-all cursor-pointer group active:scale-[0.98]\"\r\n                        >\r\n                            {/* Avatar */}\r\n                            <div className=\"w-14 h-14 rounded-full bg-background p-0.5 shrink-0 shadow-sm group-hover:scale-105 transition-transform\">\r\n                                <div className=\"relative w-full h-full rounded-full bg-muted flex items-center justify-center overflow-hidden\">\r\n                                    {convo.other_user?.avatar_url ? (\r\n                                        <Image src={convo.other_user.avatar_url} alt=\"Avatar\" fill className=\"object-cover\" />\r\n                                    ) : (\r\n                                        <span className=\"font-bold text-muted-foreground text-lg\">\r\n                                            {convo.other_user?.full_name?.charAt(0) || \"?\"}\r\n                                        </span>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Content */}\r\n                            <div className=\"flex-1 min-w-0\">\r\n                                <h3 className=\"font-bold text-lg text-foreground tracking-tight mb-0.5 truncate\">\r\n                                    {convo.other_user?.full_name || \"Unknown User\"}\r\n                                </h3>\r\n                                <p className=\"text-muted-foreground text-xs font-bold uppercase tracking-wider\">\r\n                                    @{convo.other_user?.username}\r\n                                </p>\r\n                            </div>\r\n\r\n                            {/* Actions */}\r\n                            <div className=\"w-10 h-10 rounded-full bg-background flex items-center justify-center shadow-sm opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                <ChevronRight className=\"w-5 h-5 text-muted-foreground\" />\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                ) : (\r\n                    <div className=\"text-center py-20 space-y-4 opacity-50\">\r\n                        <MessageSquare className=\"w-12 h-12 mx-auto text-muted-foreground\" />\r\n                        <div>\r\n                            <h3 className=\"font-bold text-lg\">No messages yet</h3>\r\n                            <p className=\"text-muted-foreground text-sm\">Start a conversation with someone!</p>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\dashboard\\RevenueGraph.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\dashboard\\ServicesWidget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Sparkles' is defined but never used.","line":3,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Palette' is defined but never used.","line":3,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Gamepad2' is defined but never used.","line":3,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":59},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[172,175],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[172,175],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { MoreHorizontal, Plus, Sparkles, Palette, Gamepad2, ArrowRight, Briefcase } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\n\r\nconst services: any[] = []; // Empty array for No Data state\r\n\r\nexport function ServicesWidget() {\r\n    return (\r\n        <div className=\"h-full flex flex-col\">\r\n            <div className=\"flex justify-between items-center mb-6 px-2\">\r\n                <div>\r\n                    <h3 className=\"text-xl font-bold text-foreground tracking-tight\">Services</h3>\r\n                    <p className=\"text-sm text-muted-foreground font-medium mt-0.5\">Manage your offerings</p>\r\n                </div>\r\n                <button className=\"w-8 h-8 rounded-full bg-muted/50 flex items-center justify-center text-muted-foreground hover:text-foreground hover:bg-muted transition-colors\">\r\n                    <MoreHorizontal className=\"w-4 h-4\" />\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 flex-1\">\r\n                {services.length > 0 ? (\r\n                    services.map((service) => (\r\n                        <div key={service.name} className=\"flex items-center justify-between p-4 bg-card border border-border/50 rounded-2xl hover:border-primary/50 transition-all cursor-pointer group active:scale-[0.99] shadow-sm\">\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <div className={`w-12 h-12 rounded-xl ${service.bg} flex items-center justify-center ${service.color}`}>\r\n                                    <service.icon className=\"w-6 h-6\" />\r\n                                </div>\r\n                                <div>\r\n                                    <div className=\"font-bold text-foreground text-[15px]\">{service.name}</div>\r\n                                    <div className=\"text-xs text-muted-foreground font-medium\">Starting at</div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"text-right flex items-center gap-3\">\r\n                                <div className=\"font-bold text-lg text-foreground tracking-tight\">{service.price}</div>\r\n                                <ArrowRight className=\"w-4 h-4 text-muted-foreground opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300\" />\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                ) : (\r\n                    <div className=\"flex flex-col items-center justify-center h-48 text-center border-2 border-dashed border-border rounded-2xl bg-muted/20\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-muted flex items-center justify-center mb-3\">\r\n                            <Briefcase className=\"w-5 h-5 text-muted-foreground\" />\r\n                        </div>\r\n                        <p className=\"text-sm font-bold text-foreground\">No Services Yet</p>\r\n                        <p className=\"text-xs text-muted-foreground mt-1 max-w-[150px]\">Add a service to start selling.</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <Link href=\"/create/service\" className=\"mt-6 w-full py-4 rounded-2xl border border-dashed border-border text-muted-foreground text-sm font-bold hover:text-primary hover:border-primary/50 hover:bg-primary/5 transition-all flex items-center justify-center gap-2 group\">\r\n                <div className=\"w-6 h-6 rounded-full bg-muted text-muted-foreground flex items-center justify-center group-hover:bg-primary group-hover:text-primary-foreground transition-colors\">\r\n                    <Plus className=\"w-3.5 h-3.5\" />\r\n                </div>\r\n                Add New Service\r\n            </Link>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\dashboard\\SettingsModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\dashboard\\SubscriptionModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Shield' is defined but never used.","line":5,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { Check, Star, Zap, Shield, Crown, X } from \"lucide-react\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface SubscriptionModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nexport function SubscriptionModal({ isOpen, onClose }: SubscriptionModalProps) {\r\n    const [billingCycle, setBillingCycle] = useState<\"monthly\" | \"yearly\">(\"monthly\");\r\n\r\n    const plans = [\r\n        {\r\n            name: \"Free\",\r\n            price: 0,\r\n            period: \"forever\",\r\n            description: \"Essential tools for casual users.\",\r\n            features: [\r\n                \"Basic Profile\",\r\n                \"5% Transaction Fee\",\r\n                \"Standard Payouts (1-3 days)\",\r\n                \"1GB File Storage\",\r\n                \"Community Support\"\r\n            ],\r\n            icon: Zap,\r\n            color: \"bg-blue-500\",\r\n            buttonText: \"Current Plan\",\r\n            popular: false\r\n        },\r\n        {\r\n            name: \"Pro\",\r\n            price: billingCycle === \"monthly\" ? 9.99 : 99.99,\r\n            period: billingCycle === \"monthly\" ? \"/mo\" : \"/yr\",\r\n            description: \"Power up your freelance career.\",\r\n            features: [\r\n                \"2% Transaction Fee\",\r\n                \"Instant Payouts\",\r\n                \"50GB File Storage\",\r\n                \"Priority Support\",\r\n                \"Custom Profile Branding\"\r\n            ],\r\n            icon: Star,\r\n            color: \"bg-purple-500\",\r\n            buttonText: \"Upgrade to Pro\",\r\n            popular: true\r\n        },\r\n        {\r\n            name: \"Business\",\r\n            price: billingCycle === \"monthly\" ? 29.99 : 299.99,\r\n            period: billingCycle === \"monthly\" ? \"/mo\" : \"/yr\",\r\n            description: \"For agencies and power sellers.\",\r\n            features: [\r\n                \"Everything in Pro\",\r\n                \"0% Transaction Fee\",\r\n                \"Unlimited Storage\",\r\n                \"White-label Invoicing\",\r\n                \"Team Accounts (up to 5)\",\r\n                \"Dedicated Account Manager\"\r\n            ],\r\n            icon: Crown,\r\n            color: \"bg-orange-500\",\r\n            buttonText: \"Contact Sales\",\r\n            popular: false\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={onClose}\r\n                        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60]\"\r\n                    />\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        className=\"fixed inset-0 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 z-[61] bg-background md:rounded-3xl shadow-2xl w-full md:w-[900px] md:max-h-[90vh] overflow-y-auto\"\r\n                    >\r\n                        <div className=\"flex flex-col h-full md:h-auto md:block relative\">\r\n                            {/* Mobile Sticky Header */}\r\n                            <div className=\"md:hidden sticky top-0 left-0 right-0 z-10 bg-background/80 backdrop-blur-md border-b border-border p-4 flex justify-between items-center\">\r\n                                <span className=\"font-bold text-lg\">Subscription Plans</span>\r\n                                <button\r\n                                    onClick={onClose}\r\n                                    className=\"p-2 -mr-2 hover:bg-muted rounded-full transition-colors\"\r\n                                >\r\n                                    <X className=\"w-6 h-6 text-muted-foreground\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Desktop Close Button */}\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"hidden md:block absolute top-4 right-4 p-2 hover:bg-muted rounded-full transition-colors z-10\"\r\n                            >\r\n                                <X className=\"w-6 h-6 text-muted-foreground\" />\r\n                            </button>\r\n\r\n                            <div className=\"p-6 md:p-8 overflow-y-auto custom-scrollbar flex-1\">\r\n\r\n                                <div className=\"text-center mb-8\">\r\n                                    <h2 className=\"text-3xl md:text-4xl font-black tracking-tight mb-3\">\r\n                                        Upgrade your experience\r\n                                    </h2>\r\n                                    <p className=\"text-muted-foreground text-lg max-w-xl mx-auto\">\r\n                                        Unlock lower fees, faster payouts, and powerful tools to grow your business.\r\n                                    </p>\r\n\r\n                                    {/* Billing Toggle */}\r\n                                    <div className=\"flex items-center justify-center gap-4 mt-6\">\r\n                                        <span className={clsx(\"text-sm font-bold\", billingCycle === \"monthly\" ? \"text-foreground\" : \"text-muted-foreground\")}>Monthly</span>\r\n                                        <button\r\n                                            onClick={() => setBillingCycle(billingCycle === \"monthly\" ? \"yearly\" : \"monthly\")}\r\n                                            className=\"w-14 h-7 bg-muted rounded-full relative transition-colors border border-border\"\r\n                                        >\r\n                                            <motion.div\r\n                                                animate={{ x: billingCycle === \"monthly\" ? 2 : 26 }}\r\n                                                className=\"absolute top-1 left-0 w-5 h-5 bg-primary rounded-full shadow-sm\"\r\n                                            />\r\n                                        </button>\r\n                                        <span className={clsx(\"text-sm font-bold\", billingCycle === \"yearly\" ? \"text-foreground\" : \"text-muted-foreground\")}>\r\n                                            Yearly <span className=\"text-green-500 text-xs ml-1\">(Save 20%)</span>\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                                    {plans.map((plan) => (\r\n                                        <div\r\n                                            key={plan.name}\r\n                                            className={clsx(\r\n                                                \"relative p-6 rounded-2xl border transition-all hover:shadow-xl flex flex-col\",\r\n                                                plan.popular ? \"border-primary shadow-lg shadow-primary/10 bg-card\" : \"border-border bg-muted/30\"\r\n                                            )}\r\n                                        >\r\n                                            {plan.popular && (\r\n                                                <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 bg-primary text-primary-foreground px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-lg\">\r\n                                                    Most Popular\r\n                                                </div>\r\n                                            )}\r\n\r\n                                            <div className={clsx(\"w-12 h-12 rounded-xl flex items-center justify-center mb-4 text-white shadow-lg\", plan.color)}>\r\n                                                <plan.icon className=\"w-6 h-6\" />\r\n                                            </div>\r\n\r\n                                            <h3 className=\"text-xl font-bold mb-1\">{plan.name}</h3>\r\n                                            <p className=\"text-sm text-muted-foreground mb-4 min-h-[40px]\">{plan.description}</p>\r\n\r\n                                            <div className=\"mb-6\">\r\n                                                <span className=\"text-3xl font-black\">${plan.price}</span>\r\n                                                <span className=\"text-muted-foreground font-medium\">{plan.period}</span>\r\n                                            </div>\r\n\r\n                                            <ul className=\"space-y-3 mb-8 flex-1\">\r\n                                                {plan.features.map((feature) => (\r\n                                                    <li key={feature} className=\"flex items-start gap-3 text-sm\">\r\n                                                        <Check className=\"w-4 h-4 text-green-500 shrink-0 mt-0.5\" strokeWidth={3} />\r\n                                                        <span className=\"text-muted-foreground font-medium\">{feature}</span>\r\n                                                    </li>\r\n                                                ))}\r\n                                            </ul>\r\n\r\n                                            <button\r\n                                                className={clsx(\r\n                                                    \"w-full py-3 rounded-xl font-bold transition-all active:scale-95\",\r\n                                                    plan.popular\r\n                                                        ? \"bg-primary text-primary-foreground hover:bg-primary/90 shadow-lg shadow-primary/25\"\r\n                                                        : \"bg-white text-black border border-border hover:bg-gray-50 dark:bg-white dark:text-black\"\r\n                                                )}\r\n                                            >\r\n                                                {plan.buttonText}\r\n                                            </button>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Mobile Maybe Later Button */}\r\n                            <div className=\"md:hidden p-4 border-t border-border bg-background pb-safe\">\r\n                                <button\r\n                                    onClick={onClose}\r\n                                    className=\"w-full py-3 text-muted-foreground font-bold hover:text-foreground transition-colors\"\r\n                                >\r\n                                    Maybe Later\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\dashboard\\TipWidget.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":23,"column":25,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1185,1312],"text":"\r\n                        &quot;Your support helps me create more amazing content and overlays. Thank you! ðŸ’–\"\r\n                    "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1185,1312],"text":"\r\n                        &ldquo;Your support helps me create more amazing content and overlays. Thank you! ðŸ’–\"\r\n                    "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1185,1312],"text":"\r\n                        &#34;Your support helps me create more amazing content and overlays. Thank you! ðŸ’–\"\r\n                    "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1185,1312],"text":"\r\n                        &rdquo;Your support helps me create more amazing content and overlays. Thank you! ðŸ’–\"\r\n                    "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":23,"column":103,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1185,1312],"text":"\r\n                        \"Your support helps me create more amazing content and overlays. Thank you! ðŸ’–&quot;\r\n                    "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1185,1312],"text":"\r\n                        \"Your support helps me create more amazing content and overlays. Thank you! ðŸ’–&ldquo;\r\n                    "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1185,1312],"text":"\r\n                        \"Your support helps me create more amazing content and overlays. Thank you! ðŸ’–&#34;\r\n                    "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1185,1312],"text":"\r\n                        \"Your support helps me create more amazing content and overlays. Thank you! ðŸ’–&rdquo;\r\n                    "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Heart, DollarSign } from \"lucide-react\";\r\n\r\nexport function TipWidget() {\r\n    return (\r\n        <div className=\"bg-card rounded-3xl p-6 border border-border h-full flex flex-col justify-between shadow-lg shadow-black/5 relative overflow-hidden group\">\r\n            <div className=\"absolute top-0 right-0 p-16 bg-[#30D158]/10 rounded-full blur-3xl pointer-events-none\" />\r\n\r\n            <div className=\"relative z-10\">\r\n                <div className=\"flex items-center gap-3 mb-4\">\r\n                    <div className=\"w-10 h-10 rounded-full bg-[#30D158]/10 flex items-center justify-center text-[#30D158]\">\r\n                        <Heart className=\"w-5 h-5 fill-current\" />\r\n                    </div>\r\n                    <div>\r\n                        <h3 className=\"text-lg font-bold text-foreground\">Support the Creator</h3>\r\n                        <p className=\"text-xs text-muted-foreground font-medium\">Love the work? Send a tip!</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"bg-muted/50 rounded-2xl p-4 border border-border/50\">\r\n                    <p className=\"text-sm text-muted-foreground italic\">\r\n                        \"Your support helps me create more amazing content and overlays. Thank you! ðŸ’–\"\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"relative z-10 mt-6\">\r\n                <button className=\"w-full py-3 bg-[#30D158] text-white font-bold rounded-xl hover:bg-[#30D158]/90 transition-all shadow-lg shadow-[#30D158]/20 flex items-center justify-center gap-2 active:scale-[0.98]\">\r\n                    <DollarSign className=\"w-5 h-5\" />\r\n                    Send a Tip\r\n                </button>\r\n                <p className=\"text-[10px] text-center text-muted-foreground font-bold mt-3 uppercase tracking-wider opacity-60\">\r\n                    100% goes to creator â€¢ No fees\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\features\\dashboard\\VerificationModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2788,2791],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2788,2791],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":124,"column":43,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5262,5408],"text":"\r\n                                        We&apos;ve received your verification request. We'll review it shortly.\r\n                                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5262,5408],"text":"\r\n                                        We&lsquo;ve received your verification request. We'll review it shortly.\r\n                                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5262,5408],"text":"\r\n                                        We&#39;ve received your verification request. We'll review it shortly.\r\n                                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5262,5408],"text":"\r\n                                        We&rsquo;ve received your verification request. We'll review it shortly.\r\n                                    "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":124,"column":85,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5262,5408],"text":"\r\n                                        We've received your verification request. We&apos;ll review it shortly.\r\n                                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5262,5408],"text":"\r\n                                        We've received your verification request. We&lsquo;ll review it shortly.\r\n                                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5262,5408],"text":"\r\n                                        We've received your verification request. We&#39;ll review it shortly.\r\n                                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5262,5408],"text":"\r\n                                        We've received your verification request. We&rsquo;ll review it shortly.\r\n                                    "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":188,"column":146,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[10805,10878],"text":"Upload a photo of your government-issued ID (Driver&apos;s License, Passport)."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[10805,10878],"text":"Upload a photo of your government-issued ID (Driver&lsquo;s License, Passport)."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[10805,10878],"text":"Upload a photo of your government-issued ID (Driver&#39;s License, Passport)."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[10805,10878],"text":"Upload a photo of your government-issued ID (Driver&rsquo;s License, Passport)."},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { X, Check, AlertCircle, Link as LinkIcon, Twitter, Instagram, Globe } from \"lucide-react\";\r\nimport { supabase } from \"@/lib/supabase/client\";\r\nimport { useUser } from \"@/context/UserContext\";\r\n\r\ninterface VerificationModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nexport function VerificationModal({ isOpen, onClose }: VerificationModalProps) {\r\n    const { user, refreshProfile } = useUser();\r\n    const [loading, setLoading] = useState(false);\r\n    const [success, setSuccess] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const [evidenceText, setEvidenceText] = useState(\"\");\r\n    const [idFile, setIdFile] = useState<File | null>(null);\r\n    const [links, setLinks] = useState({\r\n        twitter: \"\",\r\n        instagram: \"\",\r\n        website: \"\"\r\n    });\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!user) return;\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            let idDocumentUrl = null;\r\n\r\n            // Upload ID if present\r\n            if (idFile) {\r\n                const fileExt = idFile.name.split('.').pop();\r\n                const fileName = `${user.id}-${Math.random()}.${fileExt}`;\r\n                const { error: uploadError, data } = await supabase.storage\r\n                    .from('verification_docs')\r\n                    .upload(fileName, idFile);\r\n\r\n                if (uploadError) throw uploadError;\r\n                idDocumentUrl = data.path;\r\n            }\r\n\r\n            // 1. Create verification request\r\n            const { error: requestError } = await supabase\r\n                .from('verification_requests')\r\n                .insert({\r\n                    user_id: user.id,\r\n                    evidence_text: evidenceText,\r\n                    evidence_links: links,\r\n                    id_document_url: idDocumentUrl,\r\n                    status: 'pending'\r\n                });\r\n\r\n            if (requestError) throw requestError;\r\n\r\n            // 2. Update profile status\r\n            const { error: profileError } = await supabase\r\n                .from('profiles')\r\n                .update({ verification_status: 'pending' })\r\n                .eq('id', user.id);\r\n\r\n            if (profileError) throw profileError;\r\n\r\n            await refreshProfile();\r\n            setSuccess(true);\r\n            setTimeout(() => {\r\n                onClose();\r\n                setSuccess(false);\r\n                setEvidenceText(\"\");\r\n                setLinks({ twitter: \"\", instagram: \"\", website: \"\" });\r\n                setIdFile(null);\r\n            }, 2000);\r\n\r\n        } catch (err: any) {\r\n            console.error(\"Verification request failed:\", err);\r\n            setError(err.message || \"Failed to submit request. Please try again.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={onClose}\r\n                        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60]\"\r\n                    />\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        className=\"fixed z-[70] left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-lg bg-card border border-border rounded-3xl shadow-2xl overflow-hidden\"\r\n                    >\r\n                        <div className=\"p-6 border-b border-border flex justify-between items-center bg-muted/30\">\r\n                            <h2 className=\"text-xl font-bold text-foreground flex items-center gap-2\">\r\n                                <Check className=\"w-5 h-5 text-blue-500 fill-blue-500/10\" />\r\n                                Request Verification\r\n                            </h2>\r\n                            <button onClick={onClose} className=\"p-2 rounded-full hover:bg-muted text-muted-foreground hover:text-foreground transition-colors\">\r\n                                <X className=\"w-5 h-5\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"p-6 overflow-y-auto max-h-[70vh] custom-scrollbar\">\r\n                            {success ? (\r\n                                <div className=\"flex flex-col items-center justify-center py-8 text-center space-y-4\">\r\n                                    <div className=\"w-16 h-16 bg-green-500/10 text-green-500 rounded-full flex items-center justify-center\">\r\n                                        <Check className=\"w-8 h-8\" />\r\n                                    </div>\r\n                                    <h3 className=\"text-xl font-bold\">Request Submitted!</h3>\r\n                                    <p className=\"text-muted-foreground\">\r\n                                        We've received your verification request. We'll review it shortly.\r\n                                    </p>\r\n                                </div>\r\n                            ) : (\r\n                                <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                                    <div className=\"space-y-4\">\r\n                                        <div className=\"bg-blue-500/5 border border-blue-500/20 rounded-xl p-4 flex gap-3\">\r\n                                            <AlertCircle className=\"w-5 h-5 text-blue-500 shrink-0 mt-0.5\" />\r\n                                            <div className=\"text-sm text-muted-foreground\">\r\n                                                <p className=\"font-bold text-foreground mb-1\">Verification Requirements</p>\r\n                                                To verify your identity, please either connect your existing social accounts OR upload a government-issued ID.\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {/* Option 1: Social Links */}\r\n                                        <div className=\"space-y-2\">\r\n                                            <label className=\"text-sm font-bold text-foreground\">Option 1: Connect Accounts</label>\r\n                                            <p className=\"text-xs text-muted-foreground mb-2\">Link your established presence on other platforms.</p>\r\n                                            <div className=\"space-y-3\">\r\n                                                <div className=\"relative\">\r\n                                                    <Twitter className=\"absolute left-3 top-3 w-5 h-5 text-muted-foreground\" />\r\n                                                    <input\r\n                                                        type=\"url\"\r\n                                                        placeholder=\"Twitter Profile URL\"\r\n                                                        value={links.twitter}\r\n                                                        onChange={(e) => setLinks({ ...links, twitter: e.target.value })}\r\n                                                        className=\"w-full pl-10 pr-4 py-2.5 bg-muted/50 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div className=\"relative\">\r\n                                                    <Instagram className=\"absolute left-3 top-3 w-5 h-5 text-muted-foreground\" />\r\n                                                    <input\r\n                                                        type=\"url\"\r\n                                                        placeholder=\"Instagram Profile URL\"\r\n                                                        value={links.instagram}\r\n                                                        onChange={(e) => setLinks({ ...links, instagram: e.target.value })}\r\n                                                        className=\"w-full pl-10 pr-4 py-2.5 bg-muted/50 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div className=\"relative\">\r\n                                                    <Globe className=\"absolute left-3 top-3 w-5 h-5 text-muted-foreground\" />\r\n                                                    <input\r\n                                                        type=\"url\"\r\n                                                        placeholder=\"Personal Website / Portfolio\"\r\n                                                        value={links.website}\r\n                                                        onChange={(e) => setLinks({ ...links, website: e.target.value })}\r\n                                                        className=\"w-full pl-10 pr-4 py-2.5 bg-muted/50 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all\"\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"relative\">\r\n                                            <div className=\"absolute inset-0 flex items-center\">\r\n                                                <span className=\"w-full border-t border-border\" />\r\n                                            </div>\r\n                                            <div className=\"relative flex justify-center text-xs uppercase\">\r\n                                                <span className=\"bg-card px-2 text-muted-foreground\">Or</span>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {/* Option 2: ID Upload */}\r\n                                        <div className=\"space-y-2\">\r\n                                            <label className=\"text-sm font-bold text-foreground\">Option 2: Upload ID</label>\r\n                                            <p className=\"text-xs text-muted-foreground mb-2\">Upload a photo of your government-issued ID (Driver's License, Passport).</p>\r\n                                            <div className=\"border-2 border-dashed border-border rounded-xl p-6 flex flex-col items-center justify-center text-center hover:bg-muted/50 transition-colors cursor-pointer relative\">\r\n                                                <input\r\n                                                    type=\"file\"\r\n                                                    accept=\"image/*\"\r\n                                                    onChange={(e) => setIdFile(e.target.files?.[0] || null)}\r\n                                                    className=\"absolute inset-0 opacity-0 cursor-pointer\"\r\n                                                />\r\n                                                {idFile ? (\r\n                                                    <div className=\"flex items-center gap-2 text-primary font-bold\">\r\n                                                        <Check className=\"w-5 h-5\" />\r\n                                                        {idFile.name}\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    <>\r\n                                                        <div className=\"w-10 h-10 bg-muted rounded-full flex items-center justify-center mb-2\">\r\n                                                            <LinkIcon className=\"w-5 h-5 text-muted-foreground\" />\r\n                                                        </div>\r\n                                                        <span className=\"text-sm font-medium text-foreground\">Click to upload ID</span>\r\n                                                        <span className=\"text-xs text-muted-foreground mt-1\">PNG, JPG up to 5MB</span>\r\n                                                    </>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"space-y-2 pt-2\">\r\n                                            <label className=\"text-sm font-bold text-foreground\">Message to Reviewer</label>\r\n                                            <textarea\r\n                                                placeholder=\"Explain why you are requesting verification (e.g. 'I am the artist known as X', 'This is my business account')...\"\r\n                                                value={evidenceText}\r\n                                                onChange={(e) => setEvidenceText(e.target.value)}\r\n                                                className=\"w-full p-4 bg-muted/50 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all min-h-[100px] resize-none\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {error && (\r\n                                        <div className=\"text-red-500 text-sm font-medium bg-red-500/10 p-3 rounded-lg flex items-center gap-2\">\r\n                                            <AlertCircle className=\"w-4 h-4\" />\r\n                                            {error}\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <div className=\"pt-2\">\r\n                                        <button\r\n                                            type=\"submit\"\r\n                                            disabled={loading || ((!links.twitter && !links.instagram && !links.website) && !idFile)}\r\n                                            className=\"w-full py-3 bg-primary text-primary-foreground font-bold rounded-xl hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                                        >\r\n                                            {loading ? (\r\n                                                <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                                            ) : (\r\n                                                \"Submit Request\"\r\n                                            )}\r\n                                        </button>\r\n                                    </div>\r\n                                </form>\r\n                            )}\r\n                        </div>\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\layout\\Navigation.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Menu' is defined but never used.","line":3,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LogOut' is defined but never used.","line":3,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Settings' is defined but never used.","line":3,"column":59,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":67},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Sun' is defined but never used.","line":3,"column":69,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":72},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Moon' is defined but never used.","line":3,"column":74,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":78},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FolderOpen' is defined but never used.","line":3,"column":80,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":90},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ShoppingBag' is defined but never used.","line":3,"column":107,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":118},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":3,"column":127,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":128},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used.","line":8,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":15,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isSidebarCollapsed' is assigned a value but never used.","line":16,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsSidebarCollapsed' is assigned a value but never used.","line":16,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isMobileMenuOpen' is assigned a value but never used.","line":17,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsMobileMenuOpen' is assigned a value but never used.","line":17,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'theme' is assigned a value but never used.","line":20,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setTheme' is assigned a value but never used.","line":20,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":28},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\layout\\Navigation.tsx:25:9\n  23 |\n  24 |     useEffect(() => {\n> 25 |         setMounted(true);\n     |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  26 |         // Set initial hash\n  27 |         setActiveHash(window.location.hash);\n  28 |","line":25,"column":9,"nodeType":null,"endLine":25,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Home, Receipt, QrCode, User, Plus, Menu, LogOut, Settings, Sun, Moon, FolderOpen, MessageCircle, ShoppingBag, Globe, X, Zap, DollarSign } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { usePathname, useRouter } from \"next/navigation\";\r\nimport clsx from \"clsx\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { useTheme } from \"next-themes\";\r\nimport { useUser } from \"@/context/UserContext\";\r\nimport Image from \"next/image\";\r\n\r\nexport function Navigation() {\r\n    const pathname = usePathname();\r\n    const router = useRouter();\r\n    const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\r\n    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n    const [activeHash, setActiveHash] = useState(\"\");\r\n\r\n    const { theme, setTheme } = useTheme();\r\n    const { user, profile } = useUser();\r\n    const [mounted, setMounted] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setMounted(true);\r\n        // Set initial hash\r\n        setActiveHash(window.location.hash);\r\n\r\n        // Listen for hash changes\r\n        const handleHashChange = () => {\r\n            setActiveHash(window.location.hash);\r\n        };\r\n\r\n        window.addEventListener(\"hashchange\", handleHashChange);\r\n        return () => window.removeEventListener(\"hashchange\", handleHashChange);\r\n    }, []);\r\n\r\n    if (!mounted) return null;\r\n\r\n    // Hide navigation on auth pages\r\n    // if (pathname === \"/login\" || pathname === \"/signup\") {\r\n    //     return null;\r\n    // }\r\n\r\n    const navItems = user ? [\r\n        { name: \"HOME\", href: \"/home\", icon: Home },\r\n        { name: \"ORDERS\", href: \"/receipts\", icon: Receipt },\r\n        { name: \"CREATE\", href: \"/create\", icon: Plus, variant: \"special\" },\r\n        { name: \"MESSAGES\", href: \"/messages\", icon: MessageCircle },\r\n        { name: \"ACCOUNT\", href: \"/settings\", icon: User }\r\n    ] : [\r\n        { name: \"HOME\", href: \"/\", icon: Home },\r\n        { name: \"EXPLORE\", href: \"/home\", icon: Globe },\r\n        { name: \"FEATURES\", href: \"/#features\", icon: Zap },\r\n        { name: \"PRICING\", href: \"/#pricing\", icon: DollarSign },\r\n        { name: \"LOGIN\", href: \"/login\", icon: User }\r\n    ];\r\n\r\n    const isActive = (href: string) => {\r\n        if (href.startsWith(\"/#\")) {\r\n            return pathname === \"/\" && activeHash === href.substring(1);\r\n        }\r\n        if (href === \"/\") {\r\n            return pathname === \"/\" && !activeHash;\r\n        }\r\n        return pathname === href;\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {/* Desktop Header */}\r\n            <header className=\"hidden md:flex items-center justify-between px-8 py-4 bg-white/90 dark:bg-[#1a1a1a]/90 backdrop-blur-md border-b border-gray-200 dark:border-[#333] sticky top-0 z-50 w-full\">\r\n                <div className=\"flex items-center gap-8\">\r\n                    <Link href={user ? \"/home\" : \"/\"} className=\"flex items-center gap-2\">\r\n                        <div className=\"relative w-8 h-8 flex items-center justify-center\">\r\n                            <Image src=\"/logo.png\" alt=\"PayLink\" fill className=\"object-contain brightness-0 dark:brightness-100 dark:invert-0\" sizes=\"32px\" />\r\n                        </div>\r\n                        <span className=\"font-black text-xl tracking-tighter italic text-black dark:text-white\">PAYLINK</span>\r\n                    </Link>\r\n                    <nav className=\"flex items-center gap-6\">\r\n                        {navItems.slice(0, 4).map((item) => (\r\n                            <Link\r\n                                key={item.name}\r\n                                href={item.href}\r\n                                onClick={() => {\r\n                                    if (item.href.startsWith(\"/#\")) {\r\n                                        setActiveHash(item.href.substring(1));\r\n                                    } else {\r\n                                        setActiveHash(\"\");\r\n                                    }\r\n                                }}\r\n                                className={clsx(\r\n                                    \"text-sm font-bold transition-colors hover:text-black dark:hover:text-white\",\r\n                                    isActive(item.href) ? \"text-black dark:text-white\" : \"text-gray-500 dark:text-gray-400\"\r\n                                )}\r\n                            >\r\n                                {item.name}\r\n                            </Link>\r\n                        ))}\r\n                    </nav>\r\n                </div>\r\n                <div className=\"flex items-center gap-4\">\r\n                    <Link href=\"/qr\" className=\"p-2 text-gray-400 hover:text-black dark:hover:text-white transition-colors\">\r\n                        <QrCode className=\"w-5 h-5\" />\r\n                    </Link>\r\n                    {user ? (\r\n                        <Link href=\"/settings\" className=\"relative w-8 h-8 rounded-full overflow-hidden border border-gray-200 dark:border-[#333] hover:ring-2 ring-primary transition-all\">\r\n                            {profile?.avatar_url ? (\r\n                                <Image src={profile.avatar_url} alt=\"User\" fill className=\"object-cover\" sizes=\"32px\" />\r\n                            ) : (\r\n                                <div className=\"w-full h-full bg-gray-200 dark:bg-gray-800 flex items-center justify-center\">\r\n                                    <User className=\"w-4 h-4 text-gray-500\" />\r\n                                </div>\r\n                            )}\r\n                        </Link>\r\n                    ) : (\r\n                        <Link href=\"/login\" className=\"px-4 py-2 bg-black dark:bg-white text-white dark:text-black text-xs font-bold rounded-full hover:scale-105 transition-transform\">\r\n                            Login\r\n                        </Link>\r\n                    )}\r\n                </div>\r\n            </header>\r\n\r\n            {/* Mobile Bottom Navigation */}\r\n            <div className=\"md:hidden fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-md bg-primary rounded-full px-2 py-3 grid grid-cols-5 items-center shadow-2xl z-50 shadow-primary/40\">\r\n                {navItems.map((item) => {\r\n                    const active = isActive(item.href);\r\n                    return (\r\n                        <Link\r\n                            key={item.name}\r\n                            href={item.href}\r\n                            onClick={() => {\r\n                                if (item.href.startsWith(\"/#\")) {\r\n                                    setActiveHash(item.href.substring(1));\r\n                                } else {\r\n                                    setActiveHash(\"\");\r\n                                }\r\n                            }}\r\n                            className={clsx(\r\n                                \"flex flex-col items-center gap-1 transition-colors\",\r\n                                active ? \"text-white\" : \"text-white/60 hover:text-white\"\r\n                            )}\r\n                        >\r\n                            {item.variant === \"special\" ? (\r\n                                <div className=\"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg shadow-black/10 shrink-0\">\r\n                                    <item.icon className=\"w-5 h-5 text-primary\" strokeWidth={4} />\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"h-8 flex items-center justify-center\">\r\n                                    {item.name === \"ACCOUNT\" || item.name === \"LOGIN\" ? (\r\n                                        <div className={clsx(\"relative w-6 h-6 rounded-full overflow-hidden border border-current shrink-0\", active ? \"ring-2 ring-white\" : \"\")}>\r\n                                            {user && profile?.avatar_url ? (\r\n                                                <Image src={profile.avatar_url} alt=\"User\" fill className=\"object-cover\" sizes=\"24px\" />\r\n                                            ) : (\r\n                                                <div className=\"w-full h-full bg-white/20 flex items-center justify-center\">\r\n                                                    <item.icon className=\"w-4 h-4 text-white\" fill={active ? \"currentColor\" : \"none\"} />\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    ) : (\r\n                                        <item.icon\r\n                                            className=\"w-6 h-6 shrink-0\"\r\n                                            fill={active ? (item.name === \"ORDERS\" ? \"white\" : \"currentColor\") : \"none\"}\r\n                                            stroke={active && item.name === \"ORDERS\" ? \"currentColor\" : \"currentColor\"}\r\n                                        />\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                            <span className=\"text-[10px] font-bold\">{item.name}</span>\r\n                        </Link>\r\n                    );\r\n                })}\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\payment\\PaymentModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { ShieldCheck, Info, X } from \"lucide-react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\ninterface PaymentModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onConfirm: () => void;\r\n    subtotal: number;\r\n    isProcessing: boolean;\r\n}\r\n\r\nexport function PaymentModal({ isOpen, onClose, onConfirm, subtotal, isProcessing }: PaymentModalProps) {\r\n    const feePercentage = 0.05;\r\n    const feeAmount = subtotal * feePercentage;\r\n    const total = subtotal + feeAmount;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    {/* Backdrop */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={onClose}\r\n                        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50\"\r\n                    />\r\n\r\n                    {/* Modal */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        className=\"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-[#111] border border-white/10 rounded-2xl shadow-2xl z-50 overflow-hidden\"\r\n                    >\r\n                        {/* Header */}\r\n                        <div className=\"p-6 border-b border-white/5 flex items-center justify-between\">\r\n                            <h2 className=\"text-xl font-bold text-white\">Confirm Payment</h2>\r\n                            <button onClick={onClose} className=\"text-white/50 hover:text-white transition-colors\">\r\n                                <X className=\"w-5 h-5\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Content */}\r\n                        <div className=\"p-6 space-y-6\">\r\n                            {/* Breakdown */}\r\n                            <div className=\"space-y-3\">\r\n                                <div className=\"flex justify-between text-white/70\">\r\n                                    <span>Subtotal (Freelancer Rate)</span>\r\n                                    <span>${subtotal.toFixed(2)}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between text-[#30D158]\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <span>Secure Transaction Fee (5%)</span>\r\n                                        <div className=\"group relative\">\r\n                                            <Info className=\"w-4 h-4 text-white/30 cursor-help\" />\r\n                                            <div className=\"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 p-2 bg-black border border-white/10 rounded-lg text-[10px] text-white/70 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\">\r\n                                                Funds held in Escrow until file delivery is verified.\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <span>${feeAmount.toFixed(2)}</span>\r\n                                </div>\r\n                                <div className=\"h-px bg-white/10 my-2\" />\r\n                                <div className=\"flex justify-between text-xl font-bold text-white\">\r\n                                    <span>Total Due</span>\r\n                                    <span>${total.toFixed(2)}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Security Note */}\r\n                            <div className=\"bg-[#30D158]/10 border border-[#30D158]/20 rounded-xl p-4 flex items-start gap-3\">\r\n                                <ShieldCheck className=\"w-5 h-5 text-[#30D158] shrink-0 mt-0.5\" />\r\n                                <div>\r\n                                    <h4 className=\"text-sm font-bold text-[#30D158]\">100% Secure Transaction</h4>\r\n                                    <p className=\"text-xs text-[#30D158]/80 mt-1\">\r\n                                        Your payment is protected. The freelancer only gets paid once you have successfully unlocked the file.\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Footer */}\r\n                        <div className=\"p-6 bg-white/5 border-t border-white/5\">\r\n                            <button\r\n                                onClick={onConfirm}\r\n                                disabled={isProcessing}\r\n                                className=\"w-full py-3 bg-[#30D158] hover:bg-[#2bc250] text-black font-bold rounded-xl transition-all shadow-lg shadow-[#30D158]/20 flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed\"\r\n                            >\r\n                                {isProcessing ? (\r\n                                    <>\r\n                                        <div className=\"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin\" />\r\n                                        Processing Payment...\r\n                                    </>\r\n                                ) : (\r\n                                    \"Confirm & Pay\"\r\n                                )}\r\n                            </button>\r\n                        </div>\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\theme-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\components\\wallet\\WalletWithdrawal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Wallet' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Wallet, ArrowRight, Zap, Building2, CheckCircle2 } from \"lucide-react\";\r\nimport { useState } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { motion } from \"framer-motion\";\r\n\r\ninterface WalletWithdrawalProps {\r\n    balance: number;\r\n}\r\n\r\nexport function WalletWithdrawal({ balance }: WalletWithdrawalProps) {\r\n    const [selectedOption, setSelectedOption] = useState<'STANDARD' | 'INSTANT' | null>(null);\r\n    const [isProcessing, setIsProcessing] = useState(false);\r\n\r\n    const instantFee = (balance * 0.015).toFixed(2);\r\n\r\n    const handleWithdraw = () => {\r\n        if (!selectedOption) return;\r\n        setIsProcessing(true);\r\n        setTimeout(() => setIsProcessing(false), 2000);\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-card border border-border rounded-2xl p-6 shadow-sm\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between mb-8\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold text-foreground\">Withdraw Funds</h2>\r\n                    <p className=\"text-muted-foreground\">Choose how you want to receive your earnings.</p>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                    <div className=\"text-sm text-muted-foreground font-medium uppercase tracking-wider\">Available Balance</div>\r\n                    <div className=\"text-3xl font-bold text-foreground\">${balance.toFixed(2)}</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Options */}\r\n            <div className=\"grid md:grid-cols-2 gap-4 mb-8\">\r\n                {/* Standard Option */}\r\n                <button\r\n                    onClick={() => setSelectedOption('STANDARD')}\r\n                    className={clsx(\r\n                        \"relative p-6 rounded-xl border-2 text-left transition-all duration-200 group\",\r\n                        selectedOption === 'STANDARD'\r\n                            ? \"border-primary bg-primary/5 shadow-lg shadow-primary/10\"\r\n                            : \"border-border hover:border-primary/50 hover:bg-muted/50\"\r\n                    )}\r\n                >\r\n                    {selectedOption === 'STANDARD' && (\r\n                        <div className=\"absolute top-4 right-4 text-primary\">\r\n                            <CheckCircle2 className=\"w-6 h-6 fill-primary/20\" />\r\n                        </div>\r\n                    )}\r\n                    <div className=\"w-12 h-12 bg-muted rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\r\n                        <Building2 className=\"w-6 h-6 text-foreground\" />\r\n                    </div>\r\n                    <h3 className=\"font-bold text-lg text-foreground mb-1\">Standard Transfer</h3>\r\n                    <p className=\"text-sm text-muted-foreground mb-4\">1-3 Business Days</p>\r\n                    <div className=\"inline-flex items-center px-2.5 py-1 rounded-full bg-green-500/10 text-green-600 text-xs font-bold\">\r\n                        Free ($0.00 Fee)\r\n                    </div>\r\n                </button>\r\n\r\n                {/* Instant Option */}\r\n                <button\r\n                    onClick={() => setSelectedOption('INSTANT')}\r\n                    className={clsx(\r\n                        \"relative p-6 rounded-xl border-2 text-left transition-all duration-200 group overflow-hidden\",\r\n                        selectedOption === 'INSTANT'\r\n                            ? \"border-amber-500 bg-amber-500/5 shadow-lg shadow-amber-500/10\"\r\n                            : \"border-border hover:border-amber-500/50 hover:bg-muted/50\"\r\n                    )}\r\n                >\r\n                    {/* Recommended Badge */}\r\n                    <div className=\"absolute top-0 right-0 bg-amber-500 text-white text-[10px] font-bold px-3 py-1 rounded-bl-xl\">\r\n                        RECOMMENDED\r\n                    </div>\r\n\r\n                    {selectedOption === 'INSTANT' && (\r\n                        <div className=\"absolute top-8 right-4 text-amber-500\">\r\n                            <CheckCircle2 className=\"w-6 h-6 fill-amber-500/20\" />\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"w-12 h-12 bg-amber-500/10 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\r\n                        <Zap className=\"w-6 h-6 text-amber-500\" />\r\n                    </div>\r\n                    <h3 className=\"font-bold text-lg text-foreground mb-1\">Instant Payout</h3>\r\n                    <p className=\"text-sm text-muted-foreground mb-4\">Within minutes (Push-to-Card)</p>\r\n                    <div className=\"inline-flex items-center px-2.5 py-1 rounded-full bg-amber-500/10 text-amber-600 text-xs font-bold\">\r\n                        1.5% Fee (${instantFee})\r\n                    </div>\r\n                </button>\r\n            </div>\r\n\r\n            {/* Action */}\r\n            <button\r\n                onClick={handleWithdraw}\r\n                disabled={!selectedOption || isProcessing}\r\n                className={clsx(\r\n                    \"w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all shadow-lg\",\r\n                    !selectedOption\r\n                        ? \"bg-muted text-muted-foreground cursor-not-allowed\"\r\n                        : isProcessing\r\n                            ? \"bg-primary/80 text-primary-foreground cursor-wait\"\r\n                            : \"bg-primary hover:bg-primary/90 text-primary-foreground shadow-primary/20 hover:scale-[1.01] active:scale-[0.99]\"\r\n                )}\r\n            >\r\n                {isProcessing ? (\r\n                    <>\r\n                        <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                        Processing Withdrawal...\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        Withdraw Funds\r\n                        <ArrowRight className=\"w-5 h-5\" />\r\n                    </>\r\n                )}\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\context\\ToastContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\context\\UserContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\lib\\file-management.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\lib\\paylink-service.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":136,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4103,4106],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4103,4106],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\lib\\resend.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\lib\\stripe.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\lib\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\lib\\watermark.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\leonp\\Desktop\\PayLink\\src\\types\\paylink.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]